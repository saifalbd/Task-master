import{a as M,S as R}from"./app-layout-5a64374e.js";import{_ as U}from"./PageTitleBox-ca47e2d9.js";import{_ as W,n as G,r as i,p as J,q as K,s as j,t as O,h as I,w as a,e as r,f as c,i as t,b as n,c as u,v as g,F as C,j as b,x as Q,u as X,y as _,z as Y,A as Z}from"./app-40398c3d.js";import{r as x}from"./api-5314060c.js";import{h as $}from"./moment-fbc5633a.js";import{C as ee}from"./CreateButton-7fcf5bfb.js";import{C as te}from"./Create-22196de3.js";import"./FormDialog-4f2b59d0.js";import"./index-139b5806.js";const oe={components:{CreateButton:ee,ArrowDown:G,AppLayout:M,PageTitleBox:U,statusBtnVue:R,AddTask:te},setup(){const y=i(!1),m=i(!1),z=i([]),o=i([]),F=X(),P=i([]),T=i([]),f=i([]),w=i([]),h=i([]),S=e=>$(e).fromNow(),B=e=>{F.push(e)};x(0,e=>{P.value=e}),x(1,e=>{T.value=e}),x(2,e=>{f.value=e}),x(3,e=>{w.value=e}),x(4,e=>{h.value=e});const A=J(()=>[{title:"Pending Tasks",items:P.value},{title:"Accepted Tasks",items:T.value},{title:"Working Tasks",items:f.value},{title:"Submited Tasks",isSubmit:!0,items:w.value},{title:"Completed Tasks",items:h.value}]),k=i([]);axios.get(route("employeeProposal")).then(({data:e})=>{k.value=e});const V=async(e,p)=>{try{await axios.get(route("acceptProposal",{employee:e})),k.value.splice(p,1)}catch(s){console.error(s)}},N=async(e,p)=>{try{await axios.get(route("denyProposal",{employee:e})),k.value.splice(p,1)}catch(s){console.error(s)}},D=async(e,p,s,d)=>{try{const l=route("task.changeStatus",{task:p}),{data:E}=await axios.post(l,{status:e,notify:0});s.splice(d,1)}catch(l){console.error(l)}},L=e=>{P.value.push(e),m.value=!1};return K(()=>{j("employees",e=>{z.value=e}),j("categories",e=>{o.value=e})}),{atNow:S,go:B,push:L,changeStatus:D,statusList:O,busy:y,employeeProposals:k,Accepted:V,Deny:N,showCreate:m,tasks:A,employees:z,categories:o}}},q=y=>(Y("data-v-de65423b"),y=y(),Z(),y),se={class:"task-box-list"},ae=["md"],ne={class:"card-header"},le={class:"recent-task-list"},re={class:"avatar-box"},ce=["src"],ie={class:"task-line"},de={class:"center"},ue={class:"el-dropdown-link"},_e=["onClick"],me={class:"right-side-bar"},pe=q(()=>t("div",{class:"card-header"},[t("span",null,"Employee Proposal")],-1)),ve={class:"employee-proposals"},ye=["onClick"],he={class:"line-one"},ke={style:{"text-align":"center"}},fe=q(()=>t("div",null,"Send you Employee Proposal as empoyeee",-1)),we={class:"line-two"};function ge(y,m,z,o,F,P){const T=r("create-button"),f=r("arrow-down"),w=r("el-icon"),h=r("el-button"),S=r("el-dropdown-item"),B=r("el-dropdown-menu"),A=r("el-dropdown"),k=r("page-title-box"),V=r("el-avatar"),N=r("el-card"),D=r("va-avatar"),L=r("el-link"),e=r("add-task"),p=r("app-layout");return c(),I(p,{busy:o.busy},{default:a(()=>[t("div",null,[n(k,{title:"Home Board"},{default:a(()=>[n(T,{title:"Add Task",onClick:m[0]||(m[0]=s=>o.showCreate=!0)}),n(A,null,{dropdown:a(()=>[n(B,null,{default:a(()=>[(c(!0),u(C,null,g(o.employees,s=>(c(),I(S,{key:s.id,onClick:d=>o.go({name:"userProfile",params:{user:s.user_id}})},{default:a(()=>[b(_(s.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[n(h,{type:"primary",style:{"margin-left":"15px"}},{default:a(()=>[b(" Employees"),n(w,{class:"el-icon--right"},{default:a(()=>[n(f)]),_:1})]),_:1})]),_:1})]),_:1})]),t("div",{class:Q(["home-page admin",{hasProposal:!!o.employeeProposals.length}])},[t("div",se,[(c(!0),u(C,null,g(o.tasks,(s,d)=>(c(),u("div",{sm:24,md:4.8,key:d},[n(N,{class:"box-card mb-3"},{header:a(()=>[t("div",ne,[t("span",null,[t("b",null,_(s.title),1)])])]),default:a(()=>[t("ul",le,[(c(!0),u(C,null,g(s.items,(l,E)=>(c(),u("li",{key:E},[t("div",re,[n(V,{size:25},{default:a(()=>[t("img",{src:l.employee.model.avatar.url},null,8,ce)]),_:2},1024)]),t("div",ie,[t("b",null,_(l.employee.model.name),1),t("small",de,_(o.atNow(l.created_at)),1),n(A,null,{dropdown:a(()=>[n(B,null,{default:a(()=>[(c(!0),u(C,null,g(o.statusList.filter(v=>![0,1,2,3,6,7].includes(v.status)).filter(v=>v.status!=l.status),(v,H)=>(c(),I(S,{key:H,onClick:Ce=>o.changeStatus(v.status,l.id,s.items,E)},{default:a(()=>[b(_(v.title),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:a(()=>[t("span",ue,[n(w,{class:"el-icon--right"},{default:a(()=>[n(f)]),_:1})])]),_:2},1024)]),t("div",{class:"text-box",onClick:v=>o.go({name:"task.show",params:{id:l.id}})},_(l.title),9,_e)]))),128))])]),_:2},1024)],8,ae))),128))]),t("div",me,[n(N,{class:"box-card"},{header:a(()=>[pe]),default:a(()=>[t("ul",ve,[(c(!0),u(C,null,g(o.employeeProposals,(s,d)=>(c(),u("li",{key:d},[t("div",{class:"avatar-box",onClick:l=>o.go({name:"userProfile",params:{user:s.user.id}})},[n(D,{src:s.user.avatar.url,size:30},null,8,["src"])],8,ye),t("div",he,[t("div",null,[n(L,{underline:!1,onClick:l=>o.go({name:"userProfile",params:{user:s.user.id}})},{default:a(()=>[t("b",null,_(s.user.name),1)]),_:2},1032,["onClick"]),t("small",ke,_(o.atNow(s.created_at)),1)]),fe]),t("div",we,[n(h,{size:"small",type:"primary",onClick:l=>o.Accepted(s,d)},{default:a(()=>[b(" Accepted ")]),_:2},1032,["onClick"]),n(h,{size:"small",type:"danger",onClick:l=>o.Deny(s,d)},{default:a(()=>[b(" Deny ")]),_:2},1032,["onClick"])])]))),128))])]),_:1})])],2),n(e,{show:o.showCreate,"onUpdate:show":m[1]||(m[1]=s=>o.showCreate=s),employees:o.employees,categories:o.categories,onPush:o.push},null,8,["show","employees","categories","onPush"])]),_:1},8,["busy"])}const Ve=W(oe,[["render",ge],["__scopeId","data-v-de65423b"]]);export{Ve as default};
