import{d as M,s as G,v as J,x as K,y as Q,z as W,A as X,B as Y,C as Z,_ as B,f as p,c as U,b as t,w as s,u as x,e as a,p as P,q as j,i as n,D as L,G as V,h as C,H as T,j as b,t as w,I as ee,r as z,F as E,n as F,J as I,m as D,K as R,L as te,M as oe,N as se}from"./app-7142e1c3.js";const ne=M({components:{HomeFilled:G,Collection:J,Management:K,Files:Q,Connection:W,Avatar:X,Position:Y,User:Z},setup(){const e=x();return{go:i=>{e.push(i)}}}}),h=e=>(P("data-v-d644cbda"),e=e(),j(),e),ae={class:"asside-box"},le=h(()=>n("b",null,"Home",-1)),ie=h(()=>n("b",null,"Contacts",-1)),de=h(()=>n("b",null,"Employees",-1)),re=h(()=>n("b",null,"Employees",-1)),ue=h(()=>n("b",null,"Department",-1)),ce=h(()=>n("b",null,"Designation",-1)),_e=h(()=>n("b",null,"Clients",-1)),fe=h(()=>n("b",null,"Category",-1)),pe=h(()=>n("b",null,"Teams",-1)),me=h(()=>n("b",null,"Projects",-1)),ve=h(()=>n("b",null,"Assignments",-1)),he=h(()=>n("b",null,"jobs",-1)),ge=h(()=>n("b",null,"Tasks",-1)),be=h(()=>n("b",null,"Assignments",-1)),ye=h(()=>n("b",null,"jobs",-1)),$e=h(()=>n("b",null,"toDoList",-1));function Ce(e,o,i,d,y,$){const c=a("home-filled"),l=a("el-icon"),r=a("el-menu-item"),_=a("avatar"),f=a("connection"),g=a("position"),v=a("el-sub-menu"),m=a("user"),S=a("management"),k=a("files"),A=a("el-menu");return p(),U("div",ae,[t(A,{"default-active":"1"},{default:s(()=>[t(r,{index:"1",onClick:o[0]||(o[0]=u=>e.go({name:"home"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(c)]),_:1}),le]),_:1}),t(r,{index:"2",onClick:o[1]||(o[1]=u=>e.go({name:"contact"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(_)]),_:1}),ie]),_:1}),t(v,{index:"2"},{title:s(()=>[t(l,null,{default:s(()=>[t(_)]),_:1}),de]),default:s(()=>[t(r,{index:"2-1",onClick:o[2]||(o[2]=u=>e.go({name:"employee"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(_)]),_:1}),re]),_:1}),t(r,{index:"2-2",onClick:o[3]||(o[3]=u=>e.go({name:"department"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(f)]),_:1}),ue]),_:1}),t(r,{index:"2-3",onClick:o[4]||(o[4]=u=>e.go({name:"designation"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(g)]),_:1}),ce]),_:1})]),_:1}),t(r,{index:"3",onClick:o[5]||(o[5]=u=>e.go({name:"client"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(m)]),_:1}),_e]),_:1}),t(r,{index:"4",onClick:o[6]||(o[6]=u=>e.go({name:"category"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(f)]),_:1}),fe]),_:1}),t(r,{index:"7",onClick:o[7]||(o[7]=u=>e.go({name:"team"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(S)]),_:1}),pe]),_:1}),t(v,{index:"8"},{title:s(()=>[t(l,null,{default:s(()=>[t(k)]),_:1}),me]),default:s(()=>[t(r,{index:"8-1",onClick:o[8]||(o[8]=u=>e.go({name:"project"}))},{default:s(()=>[ve]),_:1}),t(r,{index:"8-2",onClick:o[9]||(o[9]=u=>e.go({name:"job.project"}))},{default:s(()=>[he]),_:1})]),_:1}),t(v,{index:"9"},{title:s(()=>[t(l,null,{default:s(()=>[t(k)]),_:1}),ge]),default:s(()=>[t(r,{index:"9-1",onClick:o[10]||(o[10]=u=>e.go({name:"task"}))},{default:s(()=>[be]),_:1}),t(r,{index:"9-2",onClick:o[11]||(o[11]=u=>e.go({name:"job.task"}))},{default:s(()=>[ye]),_:1})]),_:1}),t(r,{index:"10",onClick:o[12]||(o[12]=u=>e.go({name:"toDoList"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(c)]),_:1}),$e]),_:1})]),_:1})])}const ke=B(ne,[["render",Ce],["__scopeId","data-v-d644cbda"]]),H=L("notifications",{state(){return{count:0,notifications:[],showModal:!1}},actions:{toggleNodal(e){this.showModal=e},addNotify(e){this.notifications.unshift(e),this.count++},notificationsFetch(){axios.get(route("notification")).then(({data:e})=>{this.notifications=e,this.count=e.length})}},getters:{taskNotifications(){return this.notifications.filter(e=>["TaskAssigned","TaskStatusChanged"].includes(e.type))},employeeAssignedNotifications(){return this.notifications.filter(e=>e.type=="EmployeeAssigned")}}}),we={props:{dropdown:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},preset:{type:String,default:"secondary"},size:{type:String,default:"medium"},color:{type:String,default:"primary"},textColor:{type:String,default:""},borderColor:{type:String,default:""},status:{type:[Number,String],required:!0}},setup(e){let o=V(()=>ee[parseInt(e.status)]);return{props:e,status:o}}};function Se(e,o,i,d,y,$){const c=a("va-button-dropdown"),l=a("va-button");return i.dropdown?(p(),C(c,{key:0,label:d.status.title,preset:d.props.preset,loading:d.props.loading,plain:d.props.plain,size:d.props.size,color:d.status.color,"text-color":d.props.textColor,"border-color":d.props.borderColor},{default:s(()=>[T(e.$slots,"default")]),_:3},8,["label","preset","loading","plain","size","color","text-color","border-color"])):(p(),C(l,{key:1,preset:d.props.preset,loading:d.props.loading,plain:d.props.plain,size:d.props.size,color:d.status.color,"text-color":d.props.textColor,"border-color":d.props.borderColor},{default:s(()=>[b(w(d.status.title),1)]),_:1},8,["preset","loading","plain","size","color","text-color","border-color"]))}const Ue=B(we,[["render",Se]]);const ze=M({components:{statusBtnVue:Ue},model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:o}){const i=H(),d=x(),y=z(!1),$="Notifications",c=()=>{o("update:show",!1)};return{title:$,busy:y,props:e,close:c,go:(r,_)=>{axios.put(route("markAsReadNotify",{id:_}),{}),c(),d.push(r)},notifyStore:i}}}),Ne={class:"layout va-gutter-1"},Be={class:"row"},Ae={class:"flex xs12"},Me={class:"item mb-4"},Te={class:"form-title"},Ie={class:"text"},Ve={key:0,class:"flex xs12"},xe=["src"],Pe={key:1,class:"flex xs12"},je=["src"],Ee={class:"flex xs12"},Fe={class:"item actions-btns"};function Le(e,o,i,d,y,$){const c=a("va-icon"),l=a("va-list-label"),r=a("va-avatar"),_=a("va-list-item-section"),f=a("va-list-item-label"),g=a("status-btn-vue"),v=a("va-list-item"),m=a("va-list"),S=a("va-button"),k=a("va-inner-loading"),A=a("va-modal");return p(),C(A,{modelValue:e.show,"onUpdate:modelValue":o[0]||(o[0]=u=>e.show=u),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:s(()=>[t(k,{loading:e.busy},{default:s(()=>[n("div",Ne,[n("div",Be,[n("div",Ae,[n("div",Me,[n("div",Te,[t(c,{name:"notifications"}),n("span",Ie,w(e.title),1)])])]),e.notifyStore.taskNotifications.length?(p(),U("div",Ve,[t(m,null,{default:s(()=>[t(l,null,{default:s(()=>[b(" TaskNotifications ")]),_:1}),(p(!0),U(E,null,F(e.notifyStore.taskNotifications,(u,N)=>(p(),C(v,{class:"list__item",key:N,onClick:q=>e.go({name:"job.task.show",params:{id:u.data.task_id}},u.id)},{default:s(()=>[t(_,{avatar:""},{default:s(()=>[t(r,{size:40},{default:s(()=>[n("img",{src:u.fromUser.avatar.url},null,8,xe)]),_:2},1024)]),_:2},1024),t(_,null,{default:s(()=>[t(f,null,{default:s(()=>[b(w(u.fromUser.name),1)]),_:2},1024),u.type=="TaskStatusChanged"?(p(),C(f,{key:0,lines:N+1},{default:s(()=>[b(w(u.data.message)+" Changed Status From ",1),t(g,{status:u.data.beforeStatus,size:"small",plain:""},null,8,["status"]),b(" To "),t(g,{status:u.data.status,size:"small",plain:""},null,8,["status"])]),_:2},1032,["lines"])):(p(),C(f,{key:1,lines:N+1},{default:s(()=>[b(w(u.data.message),1)]),_:2},1032,["lines"]))]),_:2},1024),t(_,{icon:""},{default:s(()=>[t(c,{name:"remove_red_eye",color:"background-tertiary"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):I("",!0),e.notifyStore.employeeAssignedNotifications.length?(p(),U("div",Pe,[t(m,null,{default:s(()=>[t(l,null,{default:s(()=>[b(" Employee Assigned Notifications ")]),_:1}),(p(!0),U(E,null,F(e.notifyStore.employeeAssignedNotifications,(u,N)=>(p(),C(v,{class:"list__item",key:N,onClick:q=>e.go({name:"userProfile",params:{user:u.data.user_id}},u.id)},{default:s(()=>[t(_,{avatar:""},{default:s(()=>[t(r,{size:40},{default:s(()=>[n("img",{src:u.fromUser.avatar.url},null,8,je)]),_:2},1024)]),_:2},1024),t(_,null,{default:s(()=>[t(f,null,{default:s(()=>[b(w(u.fromUser.name),1)]),_:2},1024),t(f,{lines:N+1},{default:s(()=>[b(w(u.data.message),1)]),_:2},1032,["lines"])]),_:2},1024),t(_,{icon:""},{default:s(()=>[t(c,{name:"remove_red_eye",color:"background-tertiary"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):I("",!0),n("div",Ee,[n("div",Fe,[t(S,{color:"danger",size:"small",onClick:e.close},{default:s(()=>[t(c,{class:"material-icons"},{default:s(()=>[b("close")]),_:1}),b(" Close")]),_:1},8,["onClick"])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const De=B(ze,[["render",Le],["__scopeId","data-v-07bb3d9d"]]);const Re=M({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:o}){const i=D(),d=z(!1),y="Profile Thumbnil";let $=z(!1),c=z(""),l=z(null);return{title:y,attach:l,hasThumb:$,thumbnil:c,fileAded:g=>{let m=g.target.files;if(m.length){let S=m[0];l.value=S;let k=new FileReader;k.onload=()=>{let A=k.result;c.value=A,$.value=!0},k.readAsDataURL(S)}},update:async()=>{try{const g=route("avatar",{},!1),v=new FormData;l.value&&v.append("avatar",l.value);const{data:m}=await axios.post(g,v);i.updateAvatar(m),i.hideProfileModal()}catch(g){console.error(g)}},busy:d,props:e,close:()=>{o("update:show",!1)}}}}),He=e=>(P("data-v-8d7b5baf"),e=e(),j(),e),Oe={class:"layout va-gutter-1"},qe={class:"row"},Ge={class:"flex xs12"},Je={class:"item mb-4"},Ke={class:"form-title"},Qe={class:"text"},We={class:"flex xs12"},Xe={class:"row"},Ye={class:"flex xs12"},Ze={key:0,class:"img-box"},et=["src"],tt={class:"input-box"},ot={class:"va-file-upload va-file-upload--dropzone",style:{"background-color":"rgba(21, 79, 193, 0.08)"}},st=He(()=>n("div",{class:"va-file-upload__field"},[n("div",{class:"va-file-upload__field__text"}," Click Here And Upload File ")],-1)),nt={class:"flex xs12"},at={class:"item actions-btns"};function lt(e,o,i,d,y,$){const c=a("va-icon"),l=a("va-button"),r=a("va-inner-loading"),_=a("va-modal");return p(),C(_,{modelValue:e.show,"onUpdate:modelValue":o[1]||(o[1]=f=>e.show=f),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:s(()=>[t(r,{loading:e.busy},{default:s(()=>[n("div",Oe,[n("div",qe,[n("div",Ge,[n("div",Je,[n("div",Ke,[t(c,{name:"notifications"}),n("span",Qe,w(e.title),1)])])]),n("div",We,[n("div",Xe,[n("div",Ye,[n("div",{class:R(["tumb-card",{hasThumb:e.hasThumb}])},[e.hasThumb?(p(),U("div",Ze,[n("img",{src:e.thumbnil,alt:""},null,8,et)])):I("",!0),n("div",tt,[n("div",ot,[st,n("input",{type:"file",class:"va-file-upload__field__input",tabindex:"-1","aria-hidden":"true",onChange:o[0]||(o[0]=(...f)=>e.fileAded&&e.fileAded(...f))},null,32)])])],2)])])]),n("div",nt,[n("div",at,[t(l,{color:"info",onClick:e.update},{default:s(()=>[b(" Skip")]),_:1},8,["onClick"]),t(l,{color:"success",onClick:e.update},{default:s(()=>[b(" Next")]),_:1},8,["onClick"])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const it=B(Re,[["render",lt],["__scopeId","data-v-8d7b5baf"]]),dt=L("chat",{state(){return{users:[],totalUnreadCount:0}},actions:{async fetchChatUsers(e){try{const{data:o}=await axios.get(route("chatUsers"));this.users=o.map((i,d)=>(i.active=!d,i.messages=[],i)),e(this.users)}catch(o){console.error(o)}},increaseTotalUnread(e){this.totalUnreadCount=+e},increaseUnread(e,o){this.users=this.users.map(i=>(i.id==e&&(i.unReadCount=i.unReadCount+o),i)),this.totalUnreadCount=this.totalUnreadCount+o,te()},listen(e){Echo.join("chat").joining(o=>{axios.put(route("online",{user:o.id}))}).leaving(o=>{axios.put(route("offline",{user:o.id}),{})}).listen("UserOnline",o=>{const i=this.users.find(d=>d.id==o.id);i&&(i.isOnline=!0)}).listen("UserOffline",o=>{const i=this.users.find(d=>d.id==o.id);i&&(i.isOnline=!1)}).listen("ChatEvent",o=>{e(o)})}}}),rt=M({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:o}){return{props:e}}}),ut=n("div",null,"Chat modal",-1);function ct(e,o,i,d,y,$){const c=a("va-inner-loading"),l=a("va-modal");return p(),C(l,{modelValue:e.show,"onUpdate:modelValue":o[0]||(o[0]=r=>e.show=r),fullscreen:!0,"hide-default-actions":"","no-outside-dismiss":""},{default:s(()=>[t(c,{loading:e.busy},{default:s(()=>[ut]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const _t=B(rt,[["render",ct]]);const ft=M({components:{AsideBar:ke,NotificationModel:De,ProfileEditModal:it,ChatModal:_t},props:{title:{type:String,default:"title"},showInfoBar:{type:Boolean,default:!1},busy:{type:Boolean,default:!0}},setup(e){const o=D(),i=dt(),d=V(()=>i.totalUnreadCount);let y=o.token,$=o.user,c=o.avatar,l=V(()=>o.showProfileModal),r=z(!1);y&&(window.Echo.connector.options.auth.headers.Authorization=`Bearer ${y}`);const _=x(),f=H();f.notificationsFetch();const g=()=>{se(),_.push({name:"login"})},v=z(!1),m=()=>{i.users.length?_.push({name:"chat"}):(v.value=!0,i.fetchChatUsers(()=>{v.value=!1,_.push({name:"chat"})}))},S=()=>{_.push({name:"profile"})};return oe(()=>{axios.get(route("chatUnreadcount")).then(({data:k})=>{i.increaseTotalUnread(k)})}),{avatar:c,props:e,notifyStore:f,user:$,showProfileModal:l,showChatModal:r,chatUnreadcount:d,chatIconBusy:v,logout:g,goChat:m,goProfile:S}}}),O=e=>(P("data-v-d8372b02"),e=e(),j(),e),pt={class:"main-layout"},mt={class:"info-bar-body"},vt={class:"asside"},ht={class:"main-content"},gt={class:"inner"},bt={class:"top-nav"},yt=O(()=>n("div",{class:"page-title"},"Task Master",-1)),$t={class:"right-side"},Ct=O(()=>n("span",{class:"mx-2"},"Logout",-1)),kt={class:"page-content"};function wt(e,o,i,d,y,$){const c=a("AsideBar"),l=a("va-icon"),r=a("va-avatar"),_=a("va-badge"),f=a("va-inner-loading"),g=a("va-button"),v=a("NotificationModel");return p(),U("div",pt,[n("div",{class:R(["info-bar",{show:e.props.showInfoBar}])},[n("div",mt,[T(e.$slots,"info",{},void 0,!0)])],2),n("div",vt,[t(c)]),n("div",ht,[n("div",gt,[n("div",bt,[yt,n("div",$t,[T(e.$slots,"custom",{},void 0,!0),t(_,{class:"notification-icon",text:e.notifyStore.count,overlap:"",onClick:o[0]||(o[0]=m=>e.notifyStore.toggleNodal(!0))},{default:s(()=>[t(r,{size:"small"},{default:s(()=>[t(l,{size:"small",name:"notifications"})]),_:1})]),_:1},8,["text"]),t(_,{text:e.chatUnreadcount,overlap:""},{default:s(()=>[t(f,{loading:e.chatIconBusy},{default:s(()=>[t(r,{onClick:e.goChat,size:"small"},{default:s(()=>[t(l,{size:"small",name:"message"})]),_:1},8,["onClick"])]),_:1},8,["loading"])]),_:1},8,["text"]),e.user?(p(),U("span",{key:0,class:"profile-badge-box",onClick:o[1]||(o[1]=(...m)=>e.goProfile&&e.goProfile(...m))},[e.avatar?(p(),C(r,{key:0,size:"small",src:e.avatar.url,alt:e.avatar.path},null,8,["src","alt"])):(p(),C(r,{key:1,size:"small",icon:"person"})),n("span",null,w(e.user.name),1),n("span",null,[t(l,{size:"small",name:"expand_more"})])])):I("",!0),t(g,{class:"ml-4",size:"small",preset:"primary",round:"",onClick:e.logout},{default:s(()=>[t(l,{size:"small",name:"lock"}),Ct]),_:1},8,["onClick"])])]),n("div",kt,[t(f,{loading:e.props.busy,size:60},{default:s(()=>[T(e.$slots,"default",{},void 0,!0)]),_:3},8,["loading"])])])]),t(v,{show:e.notifyStore.showModal,"onUpdate:show":o[2]||(o[2]=m=>e.notifyStore.toggleNodal(m)),onClose:o[3]||(o[3]=m=>e.notifyStore.toggleNodal(!1))},null,8,["show"])])}const Ut=B(ft,[["render",wt],["__scopeId","data-v-d8372b02"]]);export{Ue as S,Ut as a,dt as c};
