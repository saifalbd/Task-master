import{F as w}from"./FormDialog-0d177dd5.js";import{r as E}from"./index-810449cf.js";import{h as U}from"./moment-fbc5633a.js";import{_ as T,r as l,f as C,h as k,w as _,b as a,i as n,j as D,t as H,e as d,O as F}from"./app-15300521.js";const q={components:{FormDialog:w},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0}},setup(h,{emit:o}){let b=l(!1);const e=l(!1),x=l(null);let y=l(""),s=l(null),i=l(null);const u=l(U().format(dateFormat)),c=l(null),p=l(""),v=l([]);return{props:h,form:x,emit:o,save:async()=>{var m;let t=route("task.store");if(!await x.value.validate())return null;e.value=!0;try{const r=new FormData;r.append("title",y.value),r.append("category",s.value),r.append("employee",(m=i.value)==null?void 0:m.id),r.append("start",u.value),r.append("end",c.value),r.append("description",p.value),v.value.forEach((g,B)=>{r.append(`attachments[${B}]`,g)});const{data:f}=await axios.post(t,r);o("push",addProtos(f,{action:!0,showEdit:!1}))}catch(r){console.error(r),validErorrs(r)}e.value=!1},rs:E,busy:b,formBusy:e,title:y,start:u,end:c,employee:i,category:s,description:p,attachments:v}}},P={class:"layout gutter--md"},S={class:"row align-content--center"},j={class:"flex xs12 in-box"},z={class:"flex xs12 in-box"},L={class:"flex xs12 in-box"},Q={class:"flex xs6 in-box"},N={class:"flex xs6 in-box"},O={class:"flex xs12 in-box"},G={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function I(h,o,b,e,x,y){const s=d("va-input"),i=d("va-select"),u=d("va-chip"),c=d("va-file-upload"),p=d("QuillEditor"),v=d("va-form"),V=d("form-dialog");return C(),k(V,{show:e.props.show,"onUpdate:show":o[7]||(o[7]=t=>e.emit("update:show",t)),busy:e.formBusy,title:"Create Task",onAdd:e.save,fullscreen:!0},{default:_(()=>[a(v,{ref:"form"},{default:_(()=>[n("div",P,[n("div",S,[n("div",j,[a(s,{modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=t=>e.title=t),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),n("div",z,[a(i,{modelValue:e.category,"onUpdate:modelValue":o[1]||(o[1]=t=>e.category=t),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),n("div",L,[a(i,{modelValue:e.employee,"onUpdate:modelValue":o[2]||(o[2]=t=>e.employee=t),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:_(({value:t})=>[a(u,{size:"small",class:"mr-1 my-1"},{default:_(()=>[D(H(t.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),n("div",Q,[a(s,{modelValue:e.start,"onUpdate:modelValue":o[3]||(o[3]=t=>e.start=t),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),n("div",N,[a(s,{modelValue:e.end,"onUpdate:modelValue":o[4]||(o[4]=t=>e.end=t),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),n("div",O,[a(c,{modelValue:e.attachments,"onUpdate:modelValue":o[5]||(o[5]=t=>e.attachments=t),dropzone:""},null,8,["modelValue"])]),n("div",G,[a(p,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":o[6]||(o[6]=t=>e.description=t),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const se=T(q,[["render",I]]),J={components:{FormDialog:w},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},item:{type:Object,required:!0}},setup(h,{emit:o}){let b=l(null),e=l(!1);const x=l(null);let y=l(""),s=l(null),i=l(null);const u=l(U().format(dateFormat)),c=l(null),p=l(""),v=l([]);return F(h.item,t=>{y.value=t.title,i.value=t.employee,s.value=t.category_id,u.value=t.start,c.value=t.end,p.value=t.description,b.value=t},{immediate:!0}),{props:h,form:x,emit:o,save:async()=>{var r;let t=route("task.update",{task:b.value.id});if(!await x.value.validate())return null;const m=new FormData;m.append("_method","PUT"),m.append("title",y.value),m.append("category",s.value),m.append("employee",(r=i.value)==null?void 0:r.id),m.append("start",u.value),m.append("end",c.value),m.append("description",p.value),v.value.forEach((f,g)=>{m.append(`attachments[${g}]`,f)});try{const{data:f}=await axios.post(t,m);o("replace",addProtos(f,{action:!0,showEdit:!1}))}catch(f){console.error(f),validErorrs(f)}},rs:E,busy:e,title:y,start:u,end:c,employee:i,category:s,description:p,attachments:v}}},K={class:"layout gutter--md"},M={class:"row align-content--center"},R={class:"flex xs12 in-box"},W={class:"flex xs12 in-box"},X={class:"flex xs12 in-box"},Y={class:"flex xs6 in-box"},Z={class:"flex xs6 in-box"},$={class:"flex xs12 in-box"},ee={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function te(h,o,b,e,x,y){const s=d("va-input"),i=d("va-select"),u=d("va-chip"),c=d("va-file-upload"),p=d("QuillEditor"),v=d("va-form"),V=d("form-dialog");return C(),k(V,{show:e.props.show,"onUpdate:show":o[7]||(o[7]=t=>e.emit("update:show",t)),busy:e.busy,title:"Edit Task",onAdd:e.save,fullscreen:!0},{default:_(()=>[a(v,{ref:"form"},{default:_(()=>[n("div",K,[n("div",M,[n("div",R,[a(s,{modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=t=>e.title=t),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),n("div",W,[a(i,{modelValue:e.category,"onUpdate:modelValue":o[1]||(o[1]=t=>e.category=t),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),n("div",X,[a(i,{modelValue:e.employee,"onUpdate:modelValue":o[2]||(o[2]=t=>e.employee=t),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:_(({value:t})=>[a(u,{size:"small",class:"mr-1 my-1"},{default:_(()=>[D(H(t.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),n("div",Y,[a(s,{modelValue:e.start,"onUpdate:modelValue":o[3]||(o[3]=t=>e.start=t),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),n("div",Z,[a(s,{modelValue:e.end,"onUpdate:modelValue":o[4]||(o[4]=t=>e.end=t),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),n("div",$,[a(c,{modelValue:e.attachments,"onUpdate:modelValue":o[5]||(o[5]=t=>e.attachments=t),dropzone:""},null,8,["modelValue"])]),n("div",ee,[a(p,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":o[6]||(o[6]=t=>e.description=t),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const re=T(J,[["render",te]]);export{se as C,re as E};
