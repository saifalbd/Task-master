import{a as M,S as R}from"./app-layout-57f87d2b.js";import{_ as U}from"./PageTitleBox-f4b3131b.js";import{_ as W,n as G,r as c,p as J,q as K,s as F,t as O,h as j,w as n,e as l,f as i,i as t,b as r,c as p,v as T,F as S,x as Q,u as X,y as v,j as I,z as Y,A as Z}from"./app-2f423ae0.js";import{r as y}from"./api-5314060c.js";import{h as $}from"./moment-fbc5633a.js";import{C as ee}from"./CreateButton-2041f9e6.js";import{C as te}from"./Create-2c2fa9f5.js";import"./FormDialog-b97a9f30.js";import"./index-74464ea0.js";const se={components:{CreateButton:ee,ArrowDown:G,AppLayout:M,PageTitleBox:U,statusBtnVue:R,AddTask:te},setup(){const h=c(!1),d=c(!1),B=c([]),s=c([]),E=X(),f=c([]),w=c([]),g=c([]),b=c([]),C=c([]),A=e=>$(e).fromNow(),N=e=>{E.push(e)};y(0,e=>{f.value=e}),y(1,e=>{w.value=e}),y(2,e=>{g.value=e}),y(3,e=>{b.value=e}),y(4,e=>{C.value=e});const z=J(()=>[{title:"Pending Tasks",items:f.value},{title:"Accepted Tasks",items:w.value},{title:"Working Tasks",items:g.value},{title:"Submited Tasks",isSubmit:!0,items:b.value},{title:"Completed Tasks",items:C.value}]),k=c([]);axios.get(route("employeeProposal")).then(({data:e})=>{k.value=e});const x=async(e,_)=>{try{await axios.get(route("acceptProposal",{employee:e})),k.value.splice(_,1)}catch(o){console.error(o)}},V=async(e,_)=>{try{await axios.get(route("denyProposal",{employee:e})),k.value.splice(_,1)}catch(o){console.error(o)}},D=async(e,_,o,u)=>{try{const a=route("task.changeStatus",{task:_}),{data:L}=await axios.post(a,{status:e,notify:0});o.splice(u,1)}catch(a){console.error(a)}},P=e=>{f.value.push(e),d.value=!1};return K(()=>{F("employees",e=>{B.value=e}),F("categories",e=>{s.value=e})}),{atNow:A,go:N,push:P,changeStatus:D,statusList:O,busy:h,employeeProposals:k,Accepted:x,Deny:V,showCreate:d,tasks:z,employees:B,categories:s}}},q=h=>(Y("data-v-14cd2b7a"),h=h(),Z(),h),oe={class:"task-box-list"},ae=["md"],ne={class:"card-header"},le={class:"recent-task-list"},re={class:"avatar-box"},ce=["src"],ie={class:"task-line"},de={class:"center"},_e={class:"el-dropdown-link"},ue=["onClick"],me={class:"right-side-bar"},pe=q(()=>t("div",{class:"card-header"},[t("span",null,"Employee Proposal")],-1)),ve={class:"employee-proposals"},he=["onClick"],ke={class:"line-one"},ye={style:{"text-align":"center"}},fe=q(()=>t("div",null,"Send you Employee Proposal as empoyeee",-1)),we={class:"line-two"};function ge(h,d,B,s,E,f){const w=l("create-button"),g=l("page-title-box"),b=l("el-avatar"),C=l("arrow-down"),A=l("el-icon"),N=l("el-dropdown-item"),z=l("el-dropdown-menu"),k=l("el-dropdown"),x=l("el-card"),V=l("va-avatar"),D=l("el-link"),P=l("el-button"),e=l("add-task"),_=l("app-layout");return i(),j(_,{busy:s.busy},{default:n(()=>[t("div",null,[r(g,{title:"Home Board"},{default:n(()=>[r(w,{title:"Add Task",onClick:d[0]||(d[0]=o=>s.showCreate=!0)})]),_:1})]),t("div",{class:Q(["home-page admin",{hasProposal:!!s.employeeProposals.length}])},[t("div",oe,[(i(!0),p(S,null,T(s.tasks,(o,u)=>(i(),p("div",{sm:24,md:4.8,key:u},[r(x,{class:"box-card mb-3"},{header:n(()=>[t("div",ne,[t("span",null,[t("b",null,v(o.title),1)])])]),default:n(()=>[t("ul",le,[(i(!0),p(S,null,T(o.items,(a,L)=>(i(),p("li",{key:L},[t("div",re,[r(b,{size:25},{default:n(()=>[t("img",{src:a.employee.model.avatar.url},null,8,ce)]),_:2},1024)]),t("div",ie,[t("b",null,v(a.employee.model.name),1),t("small",de,v(s.atNow(a.created_at)),1),r(k,null,{dropdown:n(()=>[r(z,null,{default:n(()=>[(i(!0),p(S,null,T(s.statusList.filter(m=>![0,1,2,3,6,7].includes(m.status)).filter(m=>m.status!=a.status),(m,H)=>(i(),j(N,{key:H,onClick:be=>s.changeStatus(m.status,a.id,o.items,L)},{default:n(()=>[I(v(m.title),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:n(()=>[t("span",_e,[r(A,{class:"el-icon--right"},{default:n(()=>[r(C)]),_:1})])]),_:2},1024)]),t("div",{class:"text-box",onClick:m=>s.go({name:"task.show",params:{id:a.id}})},v(a.title),9,ue)]))),128))])]),_:2},1024)],8,ae))),128))]),t("div",me,[r(x,{class:"box-card"},{header:n(()=>[pe]),default:n(()=>[t("ul",ve,[(i(!0),p(S,null,T(s.employeeProposals,(o,u)=>(i(),p("li",{key:u},[t("div",{class:"avatar-box",onClick:a=>s.go({name:"userProfile",params:{user:o.user.id}})},[r(V,{src:o.user.avatar.url,size:30},null,8,["src"])],8,he),t("div",ke,[t("div",null,[r(D,{underline:!1,onClick:a=>s.go({name:"userProfile",params:{user:o.user.id}})},{default:n(()=>[t("b",null,v(o.user.name),1)]),_:2},1032,["onClick"]),t("small",ye,v(s.atNow(o.created_at)),1)]),fe]),t("div",we,[r(P,{size:"small",type:"primary",onClick:a=>s.Accepted(o,u)},{default:n(()=>[I(" Accepted ")]),_:2},1032,["onClick"]),r(P,{size:"small",type:"danger",onClick:a=>s.Deny(o,u)},{default:n(()=>[I(" Deny ")]),_:2},1032,["onClick"])])]))),128))])]),_:1})])],2),r(e,{show:s.showCreate,"onUpdate:show":d[1]||(d[1]=o=>s.showCreate=o),employees:s.employees,categories:s.categories,onPush:s.push},null,8,["show","employees","categories","onPush"])]),_:1},8,["busy"])}const Ve=W(se,[["render",ge],["__scopeId","data-v-14cd2b7a"]]);export{Ve as default};
