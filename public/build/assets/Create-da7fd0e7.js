import{F as C}from"./FormDialog-79e4fca8.js";import{r as U}from"./index-6926ebaf.js";import{h as k}from"./moment-fbc5633a.js";import{_ as D,r as a,f as E,h as T,w as f,b as s,i as r,j as B,y as H,e as n}from"./app-c2489b58.js";const A={components:{FormDialog:C},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0}},setup(_,{emit:o}){let x=a(!1);const e=a(!1),v=a(null);let y=a(""),d=a(null),i=a(null);const m=a(k().format(dateFormat)),p=a(null),c=a(""),u=a([]);return{props:_,form:v,emit:o,save:async()=>{var b;let t=route("task.store");if(!await v.value.validate())return null;e.value=!0;try{const l=new FormData;l.append("title",y.value),l.append("category",d.value),l.append("employee",(b=i.value)==null?void 0:b.id),l.append("start",m.value),l.append("end",p.value),l.append("description",c.value),u.value.forEach((g,w)=>{l.append(`attachments[${w}]`,g)});const{data:V}=await axios.post(t,l);o("push",addProtos(V,{action:!0,showEdit:!1}))}catch(l){console.error(l),validErorrs(l)}e.value=!1},rs:U,busy:x,formBusy:e,title:y,start:m,end:p,employee:i,category:d,description:c,attachments:u}}},F={class:"layout gutter--md"},N={class:"row align-content--center"},S={class:"flex xs12 in-box"},j={class:"flex xs12 in-box"},q={class:"flex xs12 in-box"},z={class:"flex xs6 in-box"},L={class:"flex xs6 in-box"},P={class:"flex xs12 in-box"},Q={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function G(_,o,x,e,v,y){const d=n("va-input"),i=n("va-select"),m=n("va-chip"),p=n("va-file-upload"),c=n("QuillEditor"),u=n("va-form"),h=n("form-dialog");return E(),T(h,{show:e.props.show,"onUpdate:show":o[7]||(o[7]=t=>e.emit("update:show",t)),busy:e.formBusy,title:"Create Task",onAdd:e.save,fullscreen:!0},{default:f(()=>[s(u,{ref:"form"},{default:f(()=>[r("div",F,[r("div",N,[r("div",S,[s(d,{modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=t=>e.title=t),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),r("div",j,[s(i,{modelValue:e.category,"onUpdate:modelValue":o[1]||(o[1]=t=>e.category=t),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),r("div",q,[s(i,{modelValue:e.employee,"onUpdate:modelValue":o[2]||(o[2]=t=>e.employee=t),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:f(({value:t})=>[s(m,{size:"small",class:"mr-1 my-1"},{default:f(()=>[B(H(t.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),r("div",z,[s(d,{modelValue:e.start,"onUpdate:modelValue":o[3]||(o[3]=t=>e.start=t),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),r("div",L,[s(d,{modelValue:e.end,"onUpdate:modelValue":o[4]||(o[4]=t=>e.end=t),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),r("div",P,[s(p,{modelValue:e.attachments,"onUpdate:modelValue":o[5]||(o[5]=t=>e.attachments=t),dropzone:""},null,8,["modelValue"])]),r("div",Q,[s(c,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":o[6]||(o[6]=t=>e.description=t),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const R=D(A,[["render",G]]);export{R as C};
