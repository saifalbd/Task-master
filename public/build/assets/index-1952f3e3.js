import{a as de,S as ce}from"./app-layout-43b1bc1f.js";import{d as pe,$ as ue,a0 as _e,r as _,_ as ee,f as E,h as F,w as t,i as p,y as me,b as e,j as v,z as P,e as a,a7 as Z,a8 as G,aq as J,aj as fe,ak as ye,ah as he,al as ke,H as ve,aa as be,ar as we,as as Ce,Z as ge,t as K,u as Te,l as U,a2 as xe,a3 as Pe,c as W,x as Q,F as X}from"./app-3e66fce1.js";import{_ as Ve}from"./PageTitleBox-1650170e.js";import{P as Ee}from"./Pagination-8cb50be4.js";import{R as Ae}from"./RemoveEditButton-f20d49db.js";import{C as Se}from"./Create-587cf1d0.js";import{C as ze}from"./CreateButton-b07e114c.js";import{h as $}from"./moment-fbc5633a.js";import{u as De}from"./useToast-2086908d.js";import"./FormDialog-133ad460.js";import"./index-0f7b6e34.js";const Be=pe({components:{CircleCloseFilled:ue,Pointer:_e},model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0},taskTypes:{type:Array,required:!0}},setup(u,{emit:n}){const b=_(null),o=_(!1),y=_(null),h=d=>{y.value=d.id,b.value=d.value},g=async d=>{try{const m=route("taskType.destroy",{task_type:d});await axios.delete(m),n("removeType",d)}catch(m){console.error(m)}},w=async()=>{if(!b.value)return null;try{if(y.value){const d=route("taskType.update",{taskType:y.value}),{data:m}=await axios.put(d,{title:b.value});n("pushType",m),y.value=null}else{const d=route("taskType.store"),{data:m}=await axios.post(d,{title:b.value});n("pushType",m),y.value=null}b.value=""}catch(d){console.error(d)}},r=()=>{n("update:show",!1)};return{busy:o,props:u,type:b,updateId:y,setEdit:h,remove:g,submit:w,close:r,add:()=>{n("add",!0)},handleClose:d=>{d(),r()}}}}),Ne={class:"my-header",style:{display:"flex","justify-content":"space-between"}},Ie=["id"],Le={class:"card-header",style:{display:"flex","justify-content":"space-between"}};function Ue(u,n,b,o,y,h){const g=a("CircleCloseFilled"),w=a("el-icon"),r=a("el-button"),f=a("el-input"),A=a("el-card"),d=a("el-col"),m=a("el-table-column"),S=a("el-table"),D=a("el-row"),B=a("el-dialog");return E(),F(B,{modelValue:u.props.show,"onUpdate:modelValue":n[1]||(n[1]=k=>u.props.show=k),"before-close":u.handleClose,"show-close":!1},{header:t(({close:k,titleId:V,titleClass:N})=>[p("div",Ne,[p("h4",{id:V,class:me(N)},"Task Types",10,Ie),e(r,{type:"danger",size:"small",onClick:k},{default:t(()=>[e(w,{class:"el-icon--left"},{default:t(()=>[e(g)]),_:1}),v(" Close ")]),_:2},1032,["onClick"])])]),footer:t(()=>[]),default:t(()=>[e(D,null,{default:t(()=>[e(d,{span:24},{default:t(()=>[e(A,{class:"box-card"},{header:t(()=>[p("div",Le,[p("span",null,P(u.updateId?"Edit":"Add")+" Type",1),e(r,{type:"primary",onClick:u.submit},{default:t(()=>[v(P(u.updateId?"Update":"Add"),1)]),_:1},8,["onClick"])])]),default:t(()=>[e(f,{modelValue:u.type,"onUpdate:modelValue":n[0]||(n[0]=k=>u.type=k),placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:24,style:{"margin-top":"20px"}},{default:t(()=>[e(S,{data:u.props.taskTypes,style:{width:"100%"}},{default:t(()=>[e(m,{prop:"title",label:"Title"}),e(m,{fixed:"right",label:"Operations",width:"120"},{default:t(({row:k})=>[e(r,{link:"",type:"primary",size:"small",onClick:V=>u.remove(k.id)},{default:t(()=>[v("Delete")]),_:2},1032,["onClick"]),e(r,{link:"",type:"primary",size:"small",onClick:V=>u.setEdit(k)},{default:t(()=>[v("Edit")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["modelValue","before-close"])}const Fe=ee(Be,[["render",Ue],["__scopeId","data-v-89668bbf"]]);const Me={components:{TaskTypesVue:Fe,Delete:Z,Edit:G,Download:J,AppLayout:de,PageTitleBox:Ve,Pagination:Ee,Create:Se,List:fe,Box:ye,CreateButton:ze,RemoveEditButton:Ae,StatusBtn:ce,More:he,Search:ke,Collection:ve,Expand:be,Star:we,StarFilled:Ce},setup(){const u=_(!1),n=_(!0),b=De(),o=Te(),y=_(),h=_([]),g=_([]),w=_([]),r=_([]),f=_(!1),A=_(!1),d=_([]),m=_("");ge(m,s=>{s?h.value=y.value.filter(i=>U.lowerCase(i.title).search(U.lowerCase(s))>-1):h.value=y.value});const S=_(50),D=[{key:"user_star",label:"Star",sortable:!0},{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"title",sortable:!0},{key:"category.title",label:"Category",sortable:!0},{key:"typeName",label:"Type",sortable:!0},{key:"employeeName",label:"Employee",sortable:!0},{key:"start",label:"Start",sortable:!0},{key:"end",label:"Dead Line",sortable:!0},{key:"created_at",label:"AtNow",sortable:!0},{key:"status",sortable:!0},{key:"action",thAlign:"right",tdAlign:"right"}],B=_("asc"),k=s=>{o.push(s)};axios.get(route("taskType.index")).then(({data:s})=>{r.value=s});const V=s=>{let i=r.value.find(c=>c.title==s.title);i?i.title=s.title:r.value.push(s)},N=s=>{const i=r.value.findIndex(c=>c.id==s);i&&r.value.splice(i,1)};K("employees",s=>{g.value=s}),K("categories",s=>{w.value=s});const L=async s=>{try{const i=route("task.index",{perPage:S.value,page:s}),{data:c}=await axios.get(i);d.value=c.links;const C=U.sortBy(addProtos(c.data,{action:!0,showEdit:!1}),"id").reverse().map(T=>(T.employeeName=T.employee.model.name,T.typeName=T.type?T.type.title:"",T));h.value=U.sortBy(C,"user_star"),y.value=C}catch(i){console.error(i)}n.value=!1};return L(1),{Delete:Z,Edit:G,Download:J,busy:n,search:m,showTaskType:A,showCreate:f,perPage:S,sortingOrder:B,items:h,columns:D,endDate:s=>{if(s.end_time){let i=`${s.end} ${s.end_time}`;return console.log(i),$(i).format("MMM Do YY h:mm a")}else return s.end},removeType:N,pushType:V,push:s=>{f.value=!1,h.value.push(s)},replace:(s,i)=>{s.showEdit=!1,h.value.splice(i,1,s)},fetchItems:L,employees:g,categories:w,taskTypes:r,remove:async(s,i)=>{if(!await xe(s,"Task","title"))return null;try{const C=route("task.destroy",{task:s.id});await axios.delete(C),h.value.splice(i,1),Pe(b)}catch(C){console.log(C)}},addStar:s=>{s.user_star=!s.user_star,axios.post(route("task.changeStar",{task:s.id}),{prop:"user_star",star:s.user_star?1:0})},doArchive:(s,i)=>{h.value.splice(i,1),axios.post(route("task.doArchive",{task:s.id}),{prop:"user_archive",do:s.user_archive?0:1})},atNow:s=>$(s).fromNow(),links:d,router:o,go:k,isCardWise:u}}},Re={class:"filter-row mt-2"},We={class:"left-side"},Oe={class:"item"},je={class:"right-side"},He={class:"item right mr-3"},qe={class:"item right"},Ye=["innerHTML"],Ze={key:1,class:"table-box"},Ge={class:"ml-1"},Je={style:{"min-width":"100px"}};function Ke(u,n,b,o,y,h){const g=a("create-button"),w=a("list"),r=a("el-icon"),f=a("el-button"),A=a("download"),d=a("page-title-box"),m=a("el-option"),S=a("collection"),D=a("el-select"),B=a("box"),k=a("el-button-group"),V=a("search"),N=a("el-input"),L=a("el-divider"),z=a("el-descriptions-item"),M=a("status-btn"),O=a("delete"),j=a("more"),H=a("el-descriptions"),q=a("el-card"),Y=a("el-col"),s=a("el-row"),i=a("star-filled"),c=a("el-table-column"),C=a("el-link"),T=a("el-avatar"),te=a("expand"),R=a("el-dropdown-item"),oe=a("el-dropdown-menu"),le=a("el-dropdown"),ae=a("el-table"),se=a("pagination"),ne=a("create"),re=a("task-types-vue"),ie=a("app-layout");return E(),F(ie,{busy:o.busy},{default:t(()=>[p("div",null,[e(d,{title:"Task"},{default:t(()=>[e(g,{title:"Add Task",onClick:n[0]||(n[0]=l=>o.showCreate=!0)}),e(f,{type:"primary",onClick:n[1]||(n[1]=l=>o.showTaskType=!o.showTaskType)},{default:t(()=>[e(r,null,{default:t(()=>[e(w)]),_:1}),v(" Task Types ")]),_:1}),e(f,{type:"primary",onClick:n[2]||(n[2]=l=>o.router.push({name:"task.archive"}))},{default:t(()=>[e(r,null,{default:t(()=>[e(A)]),_:1}),v(" Archives ")]),_:1})]),_:1})]),p("div",Re,[p("div",We,[p("div",Oe,[e(D,{modelValue:o.perPage,"onUpdate:modelValue":n[3]||(n[3]=l=>o.perPage=l),placeholder:"Per Page"},{prefix:t(()=>[e(r,{class:"el-input__icon"},{default:t(()=>[e(S)]),_:1})]),default:t(()=>[(E(),W(X,null,Q([10,20,30,40,50,70,100],l=>e(m,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),p("div",je,[p("div",He,[e(k,null,{default:t(()=>[e(f,{type:o.isCardWise?"info":"primary",onClick:n[4]||(n[4]=l=>o.isCardWise=!1)},{default:t(()=>[e(r,null,{default:t(()=>[e(w)]),_:1})]),_:1},8,["type"]),e(f,{type:o.isCardWise?"primary":"info",onClick:n[5]||(n[5]=l=>o.isCardWise=!0)},{default:t(()=>[e(r,null,{default:t(()=>[e(B)]),_:1})]),_:1},8,["type"])]),_:1})]),p("div",qe,[e(N,{placeholder:"Type something",modelValue:o.search,"onUpdate:modelValue":n[6]||(n[6]=l=>o.search=l)},{prefix:t(()=>[e(r,{class:"el-input__icon"},{default:t(()=>[e(V)]),_:1})]),_:1},8,["modelValue"])])])]),e(L),o.isCardWise?(E(),F(s,{key:0,class:"card-list",gutter:24},{default:t(()=>[(E(!0),W(X,null,Q(o.items,(l,x)=>(E(),F(Y,{sm:24,md:12,key:x},{default:t(()=>[e(q,null,{default:t(()=>[e(H,{title:l.title,direction:"horizontal",column:1,size:"small",border:""},{default:t(()=>[e(z,{label:"Assgned To:"},{default:t(()=>[v(P(l.employee.model.name),1)]),_:2},1024),e(z,{label:"Dead Line:"},{default:t(()=>[v(P(l.end),1)]),_:2},1024),e(z,{label:"Status:"},{default:t(()=>[e(M,{status:l.status,size:"small"},null,8,["status"])]),_:2},1024),e(z,{label:"Delete:"},{default:t(()=>[e(f,{size:"small",type:"danger",plain:"",onClick:I=>o.remove(l,x)},{default:t(()=>[e(r,null,{default:t(()=>[e(O)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(z,{label:"View:"},{default:t(()=>[e(f,{size:"small",type:"info",plain:"",onClick:I=>o.router.push({name:"task.show",params:{id:l.id}})},{default:t(()=>[e(r,null,{default:t(()=>[e(j)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"]),p("div",{class:"description",innerHTML:l.description},null,8,Ye)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(E(),W("div",Ze,[e(ae,{data:o.items,"default-sort":{prop:"title",order:"descending"}},{default:t(()=>[e(c,{prop:"user_star",label:"Star",width:"50"},{default:t(({row:l})=>[e(f,{onClick:x=>o.addStar(l),size:"small",type:l.user_star?"warning":"",plain:"",round:""},{default:t(()=>[e(r,null,{default:t(()=>[e(i)]),_:1})]),_:2},1032,["onClick","type"])]),_:1}),e(c,{prop:"title",label:"Title",sortable:""},{default:t(({row:l})=>[e(C,{onClick:x=>o.go({name:"task.show",params:{id:l.id}})},{default:t(()=>[p("b",null,P(l.title),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{prop:"category.title",label:"Category",sortable:""}),e(c,{prop:"type.title",label:"Type",sortable:"",width:"80"}),e(c,{prop:"employee.model.name",label:"Employee",sortable:""},{default:t(({row:l})=>[e(C,{underline:!1,onClick:x=>o.router.push({name:"userProfile",params:{user:l.employee.model.id}})},{default:t(()=>[e(T,{size:25,src:l.employee.model.avatar.url},null,8,["src"]),p("b",Ge,P(l.employee.model.name),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{prop:"start",label:"Start",sortable:"",width:"100"}),e(c,{prop:"end",label:"End",sortable:"",width:"140"},{default:t(({row:l})=>[p("span",null,P(o.endDate(l)),1)]),_:1}),e(c,{prop:"created_at",label:"AtNow",sortable:"",width:"100"},{default:t(({row:l})=>[p("span",null,P(o.atNow(l.created_at)),1)]),_:1}),e(c,{fixed:"right",prop:"status",label:"status",sortable:"",width:"100"},{default:t(({row:l})=>[e(M,{status:l.status,size:"small"},null,8,["status"])]),_:1}),e(c,{fixed:"right",label:"Operations",width:"110"},{default:t(({row:l,$index:x})=>[p("div",Je,[e(le,{"split-button":"",type:"primary",size:"small"},{dropdown:t(()=>[e(oe,null,{default:t(()=>[e(R,{icon:o.Edit,onClick:I=>o.go({name:"task.edit",params:{id:l.id}})},{default:t(()=>[v("Edit")]),_:2},1032,["icon","onClick"]),e(R,{icon:o.Delete,onClick:I=>o.remove(l,x)},{default:t(()=>[v("Remove")]),_:2},1032,["icon","onClick"]),e(R,{icon:o.Download,onClick:I=>o.doArchive(l,x)},{default:t(()=>[v("Archive")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:t(()=>[e(r,{size:20,onClick:I=>o.go({name:"task.show",params:{id:l.id}})},{default:t(()=>[e(te)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:1})]),_:1},8,["data"])])),e(se,{links:o.links,onPage:o.fetchItems},null,8,["links","onPage"]),e(ne,{show:o.showCreate,"onUpdate:show":n[7]||(n[7]=l=>o.showCreate=l),employees:o.employees,categories:o.categories,taskTypes:o.taskTypes,onPush:o.push},null,8,["show","employees","categories","taskTypes","onPush"]),e(re,{show:o.showTaskType,"onUpdate:show":n[8]||(n[8]=l=>o.showTaskType=l),taskTypes:o.taskTypes,onPushType:o.pushType,onRemoveType:o.removeType},null,8,["show","taskTypes","onPushType","onRemoveType"])]),_:1},8,["busy"])}const it=ee(Me,[["render",Ke],["__scopeId","data-v-00e9bba2"]]);export{it as default};
