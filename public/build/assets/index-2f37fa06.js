import{a as K}from"./app-layout-07ff5ad6.js";import{_ as X}from"./PageTitleBox-c4608ada.js";import{P as Y}from"./Pagination-8ac6ea5b.js";import{F as $}from"./FormDialog-bc8e4f1c.js";import{r as ee}from"./index-6bd5dc00.js";import{_ as O,r,f as _,h as w,w as t,b as o,i as u,c as C,J as x,P as oe,l as le,e as a,W as te,a7 as ae,a8 as ne,a9 as se,aa as re,ab as ie,x as de,ac as ce,Q as ue,R as me,p as D,F as H,t as A,j as W,u as _e}from"./app-65c4e35f.js";import{C as pe}from"./CreateButton-487176b0.js";import{R as fe}from"./RemoveEditButton-e735f819.js";import{u as ve}from"./useToast-5adcc40c.js";const ye={components:{FormDialog:$},props:{designations:{type:Array,required:!0},show:{type:Boolean,default:!1}},setup(E,{emit:l}){let U=r(!1);const e=r(!1),g=r(!1),h=r(null);let c=r(""),f=r(""),v=r(""),b=r(""),s=r(""),P=r(null),V={title:[p=>!!p||"title are requies"]};const y=async()=>{let p=route("employee.store");if(!await h.value.validate())return null;try{const{data:m}=await axios.post(p,{name:c.value,email:f.value,phone:v.value,designation:P.value,password:b.value,confirm_password:s.value});l("push",addProtos(m,{action:!0,showEdit:!1}))}catch(m){console.error(m),oe(m)}};return{props:E,form:h,emit:l,checkEmail:g,next:async()=>{try{if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(f.value))return null;const m=route("user.showByEmail",{email:f.value}),{data:k}=await axios.get(m),i=le.values(k).length?k:null;i?(c.value=i.name,v.value=i.phone,e.value=!0):e.value=!1,g.value=!0}catch(p){console.error(p)}},rs:ee,save:y,busy:U,rules:V,save:y,name:c,phone:v,email:f,password:b,confirm_password:s,designation:P,showUpdate:p=>{p||(g.value=!1,e.value=!1,c.value="",v.value=""),l("update:show",p)},canUser:e}}},ge={class:"layout gutter--md"},he={class:"row align-content--center"},be={key:0,class:"flex xs12"},ke={class:"flex xs12 mt-2"},xe={class:"flex xs12 mt-2"},we={key:1,class:"flex xs6 mt-2"},Ce={key:2,class:"flex xs6 mt-2"},Pe={class:"flex xs12 mt-2"};function Ve(E,l,U,e,g,h){const c=a("va-input"),f=a("va-select"),v=a("va-form"),b=a("form-dialog");return _(),w(b,{show:e.props.show,"onUpdate:show":e.showUpdate,busy:e.busy,isNext:!e.checkEmail,title:"Create User",onAdd:e.save,onNext:e.next,fullscreen:""},{default:t(()=>[o(v,{ref:"form"},{default:t(()=>[u("div",ge,[u("div",he,[e.checkEmail?(_(),C("div",be,[o(c,{readonly:e.canUser,modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=s=>e.name=s),label:"Name *",placeholder:"Name Here",rules:e.rs("Name",!0)},null,8,["readonly","modelValue","rules"])])):x("",!0),u("div",ke,[o(c,{readonly:e.canUser,modelValue:e.email,"onUpdate:modelValue":l[1]||(l[1]=s=>e.email=s),label:"Email *",placeholder:"Email Here",rules:e.rs("Email",{required:!0,email:!0})},null,8,["readonly","modelValue","rules"])]),u("div",xe,[e.checkEmail?(_(),w(c,{key:0,readonly:e.canUser,modelValue:e.phone,"onUpdate:modelValue":l[2]||(l[2]=s=>e.phone=s),label:"Phone",placeholder:"Phone Here",rules:e.rs("Phone",!0)},null,8,["readonly","modelValue","rules"])):x("",!0)]),e.checkEmail?(_(),C("div",we,[e.canUser?x("",!0):(_(),w(c,{key:0,modelValue:e.password,"onUpdate:modelValue":l[3]||(l[3]=s=>e.password=s),label:"Password",placeholder:"Password Here",rules:e.rs("password",!0)},null,8,["modelValue","rules"]))])):x("",!0),e.checkEmail?(_(),C("div",Ce,[e.canUser?x("",!0):(_(),w(c,{key:0,modelValue:e.confirm_password,"onUpdate:modelValue":l[4]||(l[4]=s=>e.confirm_password=s),label:"Retype Password",placeholder:"Retype Password Here",rules:e.rs("password",!0)},null,8,["modelValue","rules"]))])):x("",!0),u("div",Pe,[e.checkEmail?(_(),w(f,{key:0,modelValue:e.designation,"onUpdate:modelValue":l[5]||(l[5]=s=>e.designation=s),label:"Designation *",rules:e.rs("designation",!0),"text-by":"title","value-by":"id",options:e.props.designations},null,8,["modelValue","rules","options"])):x("",!0)])])])]),_:1},512)]),_:1},8,["show","onUpdate:show","busy","isNext","onAdd","onNext"])}const Ee=O(ye,[["render",Ve]]);const Ue={components:{AppLayout:K,PageTitleBox:X,Pagination:Y,Create:Ee,CreateButton:pe,RemoveEditButton:fe,Delete:te,More:ae,Message:ne,List:se,Box:re,Search:ie,Collection:de},setup(){const E=_e(),l=r(!0),U=ve(),e=r([]),g=r([]),h=r(!1),c=r([]),f=r(10),v=r("name"),b=r(!0),s=[{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"name",label:"Name",sortable:!0},{key:"model.email",label:"Email",sortable:!0},{key:"model.phone",label:"Phone",sortable:!0},{key:"designation.title",label:"Designation",sortable:!0},{key:"accepted",label:"Request",sortable:!0},{key:"action",thAlign:"right"}],P=r("asc"),V=async d=>{const m=route("employee.index",{perPage:f.value,page:d}),{data:k}=await axios.get(m);c.value=k.links,e.value=addProtos(k.data,{action:!0,showEdit:!1}).map(i=>(i.name=i.model.name,i)),l.value=!1};V(1);const y=(d,m)=>{h.value=!1,e.value.splice(m,1,d)},N=d=>{h.value=!1,e.value.push(d)};return ce("designations",d=>{g.value=d}),{busy:l,showCreate:h,perPage:f,sortingOrder:P,items:e,designations:g,columns:s,sortBy:v,remove:async(d,m)=>{if(!await ue(d,"Employee","email"))return null;try{const i=route("employee.destroy",{employee:d.id});await axios.delete(i),e.value.splice(m,1),me(U)}catch(i){console.log(i)}},push:N,replace:y,fetchItems:V,goProfile:d=>{E.push({name:"userProfile",params:{user:d}})},links:c,isCardWise:b}}},Be={class:"filter-row"},Ne={class:"left-side"},ze={class:"item"},Ae={class:"right-side"},Re={class:"item right mr-3"},We={class:"item right"},De={key:0,class:"card-list"},He={class:"block"},Oe={style:{padding:"14px"}};function qe(E,l,U,e,g,h){const c=a("create-button"),f=a("page-title-box"),v=a("el-option"),b=a("collection"),s=a("el-icon"),P=a("el-select"),V=a("list"),y=a("el-button"),N=a("box"),R=a("el-button-group"),p=a("search"),d=a("el-input"),m=a("el-divider"),k=a("el-avatar"),i=a("el-descriptions-item"),q=a("message"),F=a("delete"),L=a("more"),I=a("el-descriptions"),M=a("el-card"),S=a("el-link"),T=a("va-button"),Z=a("remove-edit-button"),j=a("va-data-table"),J=a("pagination"),Q=a("create"),G=a("app-layout");return _(),w(G,{busy:e.busy},{default:t(()=>[u("div",null,[o(f,{title:"Employees"},{default:t(()=>[o(c,{title:"Add Employee",onClick:l[0]||(l[0]=n=>e.showCreate=!0)})]),_:1})]),u("div",Be,[u("div",Ne,[u("div",ze,[o(P,{modelValue:e.perPage,"onUpdate:modelValue":l[1]||(l[1]=n=>e.perPage=n),placeholder:"Per Page"},{prefix:t(()=>[o(s,{class:"el-input__icon"},{default:t(()=>[o(b)]),_:1})]),default:t(()=>[(_(),C(H,null,D([10,20,30,40,50],n=>o(v,{key:n,label:n,value:n},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),u("div",Ae,[u("div",Re,[o(R,null,{default:t(()=>[o(y,{type:e.isCardWise?"info":"primary",onClick:l[2]||(l[2]=n=>e.isCardWise=!1)},{default:t(()=>[o(s,null,{default:t(()=>[o(V)]),_:1})]),_:1},8,["type"]),o(y,{type:e.isCardWise?"primary":"info",onClick:l[3]||(l[3]=n=>e.isCardWise=!0)},{default:t(()=>[o(s,null,{default:t(()=>[o(N)]),_:1})]),_:1},8,["type"])]),_:1})]),u("div",We,[o(d,null,{prefix:t(()=>[o(s,{class:"el-input__icon"},{default:t(()=>[o(p)]),_:1})]),_:1})])])]),o(m),e.isCardWise?(_(),C("div",De,[(_(!0),C(H,null,D(e.items,(n,B)=>(_(),C("div",{class:"item",key:B},[o(M,{class:"card-box"},{default:t(()=>[u("div",He,[o(k,{size:200,src:n.model.avatar.url},null,8,["src"])]),u("div",Oe,[o(I,{title:n.model.name,direction:"horizontal",column:1,size:"small",border:""},{default:t(()=>[o(i,{label:"Designation:"},{default:t(()=>[W(A(n.designation.title),1)]),_:2},1024),o(i,{label:"Phone:"},{default:t(()=>[W(A(n.model.phone),1)]),_:2},1024),o(i,{label:"Message:"},{default:t(()=>[o(y,{size:"small",type:"info",plain:"",onClick:z=>e.goProfile(n.model.id)},{default:t(()=>[o(s,null,{default:t(()=>[o(q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),o(i,{label:"Delete:"},{default:t(()=>[o(y,{size:"small",type:"danger",plain:"",onClick:z=>e.remove(n,B)},{default:t(()=>[o(s,null,{default:t(()=>[o(F)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),o(i,{label:"View:"},{default:t(()=>[o(y,{size:"small",type:"info",plain:"",onClick:z=>e.goProfile(n.model.id)},{default:t(()=>[o(s,null,{default:t(()=>[o(L)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])])]),_:2},1024)]))),128))])):(_(),w(j,{key:1,items:e.items,columns:e.columns,hoverable:!0,"sort-by":e.sortBy,"onUpdate:sortBy":l[4]||(l[4]=n=>e.sortBy=n),"sorting-order":e.sortingOrder,"onUpdate:sortingOrder":l[5]||(l[5]=n=>e.sortingOrder=n)},{"cell(name)":t(({rowData:n})=>[o(S,{type:"primary",onClick:B=>e.goProfile(n.model.id)},{default:t(()=>[u("b",null,A(n.name),1)]),_:2},1032,["onClick"])]),"cell(accepted)":t(({value:n})=>[o(T,{preset:"plain",class:"mr-6 mb-2"},{default:t(()=>[W(A(n?"accepted":"pending"),1)]),_:2},1024)]),"cell(action)":t(({rowData:n,rowIndex:B})=>[o(Z,{isEdit:!1,onEditClick:z=>n.showEdit=!0,onRemoveClick:z=>e.remove(n,B)},null,8,["onEditClick","onRemoveClick"])]),_:1},8,["items","columns","sort-by","sorting-order"])),o(J,{links:e.links,onPage:e.fetchItems},null,8,["links","onPage"]),o(Q,{show:e.showCreate,"onUpdate:show":l[6]||(l[6]=n=>e.showCreate=n),designations:e.designations,onPush:e.push},null,8,["show","designations","onPush"])]),_:1},8,["busy"])}const Qe=O(Ue,[["render",qe],["__scopeId","data-v-8e26e3da"]]);export{Qe as default};
