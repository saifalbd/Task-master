import{F as w}from"./FormDialog-74f276fc.js";import{r as E}from"./index-b1f930e8.js";import{h as U}from"./moment-fbc5633a.js";import{_ as k,r as l,$ as T,f as D,h as C,w as f,b as r,i as n,j as H,z as A,e as d}from"./app-1f23f49e.js";const B={components:{FormDialog:w},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},item:{type:Object,required:!0}},setup(_,{emit:o}){let x=l(null),e=l(!1);const h=l(null);let v=l(""),s=l(null),i=l(null);const u=l(U().format(dateFormat)),p=l(null),c=l(""),y=l([]);return T(_.item,t=>{v.value=t.title,i.value=t.employee,s.value=t.category_id,u.value=t.start,p.value=t.end,c.value=t.description,x.value=t},{immediate:!0}),{props:_,form:h,emit:o,save:async()=>{var V;let t=route("task.update",{task:x.value.id});if(!await h.value.validate())return null;const a=new FormData;a.append("_method","PUT"),a.append("title",v.value),a.append("category",s.value),a.append("employee",(V=i.value)==null?void 0:V.id),a.append("start",u.value),a.append("end",p.value),a.append("description",c.value),y.value.forEach((m,g)=>{a.append(`attachments[${g}]`,m)});try{const{data:m}=await axios.post(t,a);o("replace",addProtos(m,{action:!0,showEdit:!1}))}catch(m){console.error(m),validErorrs(m)}},rs:E,busy:e,title:v,start:u,end:p,employee:i,category:s,description:c,attachments:y}}},F={class:"layout gutter--md"},j={class:"row align-content--center"},q={class:"flex xs12 in-box"},z={class:"flex xs12 in-box"},N={class:"flex xs12 in-box"},P={class:"flex xs6 in-box"},S={class:"flex xs6 in-box"},L={class:"flex xs12 in-box"},Q={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function O(_,o,x,e,h,v){const s=d("va-input"),i=d("va-select"),u=d("va-chip"),p=d("va-file-upload"),c=d("QuillEditor"),y=d("va-form"),b=d("form-dialog");return D(),C(b,{show:e.props.show,"onUpdate:show":o[7]||(o[7]=t=>e.emit("update:show",t)),busy:e.busy,title:"Edit Task",onAdd:e.save,fullscreen:!0},{default:f(()=>[r(y,{ref:"form"},{default:f(()=>[n("div",F,[n("div",j,[n("div",q,[r(s,{modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=t=>e.title=t),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),n("div",z,[r(i,{modelValue:e.category,"onUpdate:modelValue":o[1]||(o[1]=t=>e.category=t),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),n("div",N,[r(i,{modelValue:e.employee,"onUpdate:modelValue":o[2]||(o[2]=t=>e.employee=t),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:f(({value:t})=>[r(u,{size:"small",class:"mr-1 my-1"},{default:f(()=>[H(A(t.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),n("div",P,[r(s,{modelValue:e.start,"onUpdate:modelValue":o[3]||(o[3]=t=>e.start=t),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),n("div",S,[r(s,{modelValue:e.end,"onUpdate:modelValue":o[4]||(o[4]=t=>e.end=t),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),n("div",L,[r(p,{modelValue:e.attachments,"onUpdate:modelValue":o[5]||(o[5]=t=>e.attachments=t),dropzone:""},null,8,["modelValue"])]),n("div",Q,[r(c,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":o[6]||(o[6]=t=>e.description=t),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const R=k(B,[["render",O]]);export{R as E};
