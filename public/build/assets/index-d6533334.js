import{_ as z,r as v,a as P,f as b,h as q,w as o,i as g,b as e,j as u,e as a,W as D,a7 as T,c as k,p as A,F as N,J as E,a3 as L,aq as j,K as G,X as J,a6 as O,m as W,t as C,q as H,s as K}from"./app-15300521.js";import{a as X}from"./app-layout-ddd4ecde.js";import{h as Q}from"./moment-fbc5633a.js";const Y={props:{show:{type:Boolean,default:!1},item:{type:Object,required:!0}},setup(i,{emit:t}){const V=v(),l=v(!1),w=r=>{r(),t("update:show",!1)},m=P({birth_date:i.item.birth_date,address:i.item.address,gender:i.item.gender}),y=P({birth_date:[{required:!0,message:"Birth Date Required",trigger:"change"}],address:[{required:!0,message:"Address Required",trigger:"change"}],gender:[{required:!0,message:"Gender Required",trigger:"change"}]});return{props:i,dialogVisible:l,formFields:m,rules:y,ruleFormRef:V,handleClose:w,submit:async r=>{try{if(!r)return;await r.validate(async(s,c)=>{s&&(await axios.put(route("updateProfile"),m),t("update:show",!1))})}catch(s){console.error(s)}}}}},Z={class:"dialog-footer"};function $(i,t,V,l,w,m){const y=a("el-date-picker"),d=a("el-form-item"),r=a("el-option"),s=a("el-select"),c=a("el-input"),p=a("el-form"),_=a("el-button"),n=a("el-dialog");return b(),q(n,{"model-value":l.props.show,title:"Profile Information","before-close":l.handleClose,style:{"max-width":"470px"}},{footer:o(()=>[g("span",Z,[e(_,{onClick:t[3]||(t[3]=f=>l.handleClose(()=>{}))},{default:o(()=>[u("Cancel")]),_:1}),e(_,{type:"primary",onClick:t[4]||(t[4]=f=>l.submit(l.ruleFormRef))},{default:o(()=>[u(" Confirm ")]),_:1})])]),default:o(()=>[e(p,{"label-position":"right","label-width":"100px",model:l.formFields,rules:l.rules,ref:"ruleFormRef",style:{"max-width":"460px"}},{default:o(()=>[e(d,{label:"Birth Date",prop:"birth_date"},{default:o(()=>[e(y,{modelValue:l.formFields.birth_date,"onUpdate:modelValue":t[0]||(t[0]=f=>l.formFields.birth_date=f),type:"date",placeholder:"Pick a day"},null,8,["modelValue"])]),_:1}),e(d,{label:"Gender",prop:"gender"},{default:o(()=>[e(s,{modelValue:l.formFields.gender,"onUpdate:modelValue":t[1]||(t[1]=f=>l.formFields.gender=f),placeholder:"Select"},{default:o(()=>[e(r,{label:"Male",value:"male"}),e(r,{label:"Female",value:"female"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"Address",prop:"address"},{default:o(()=>[e(c,{autosize:"",type:"textarea",modelValue:l.formFields.address,"onUpdate:modelValue":t[2]||(t[2]=f=>l.formFields.address=f)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","before-close"])}const ee=z(Y,[["render",$]]),le={props:{show:{type:Boolean,default:!1},item:{type:Object,required:!0}},setup(i,{emit:t}){const V=v(),l=v(!1),w=r=>{r(),t("update:show",!1)},m=P({nationality:i.item.nationality,religion:i.item.religion,marital_status:i.item.marital_status}),y=P({nationality:[{required:!0,message:"nationality Required",trigger:"change"}],religion:[{required:!0,message:"religion Required",trigger:"change"}],marital_status:[{required:!0,message:"marital status Required",trigger:"change"}]});return{props:i,dialogVisible:l,formFields:m,rules:y,ruleFormRef:V,handleClose:w,submit:async r=>{try{if(!r)return;await r.validate(async(s,c)=>{s&&(await axios.put(route("updatePersonalInformation"),m),t("update:show",!1))})}catch(s){console.error(s)}}}}},oe={class:"dialog-footer"};function te(i,t,V,l,w,m){const y=a("el-input"),d=a("el-form-item"),r=a("el-option"),s=a("el-select"),c=a("el-form"),p=a("el-button"),_=a("el-dialog");return b(),q(_,{"model-value":l.props.show,title:"Personal Information","before-close":l.handleClose,style:{"max-width":"470px"}},{footer:o(()=>[g("span",oe,[e(p,{onClick:t[3]||(t[3]=n=>l.handleClose(()=>{}))},{default:o(()=>[u("Cancel")]),_:1}),e(p,{type:"primary",onClick:t[4]||(t[4]=n=>l.submit(l.ruleFormRef))},{default:o(()=>[u(" Confirm ")]),_:1})])]),default:o(()=>[e(c,{"label-position":"right","label-width":"150px",model:l.formFields,rules:l.rules,ref:"ruleFormRef",style:{"max-width":"460px"}},{default:o(()=>[e(d,{label:"Nationality",prop:"nationality"},{default:o(()=>[e(y,{modelValue:l.formFields.nationality,"onUpdate:modelValue":t[0]||(t[0]=n=>l.formFields.nationality=n)},null,8,["modelValue"])]),_:1}),e(d,{label:"Religion",prop:"religion"},{default:o(()=>[e(s,{modelValue:l.formFields.religion,"onUpdate:modelValue":t[1]||(t[1]=n=>l.formFields.religion=n),placeholder:"Select"},{default:o(()=>[e(r,{label:"Islam",value:"islam"}),e(r,{label:"Christianity",value:"christianity"}),e(r,{label:"Hinduism",value:"hinduism"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"Marital Status",prop:"marital_status"},{default:o(()=>[e(s,{modelValue:l.formFields.marital_status,"onUpdate:modelValue":t[2]||(t[2]=n=>l.formFields.marital_status=n),placeholder:"Select"},{default:o(()=>[e(r,{label:"married",value:"married"}),e(r,{label:"un married",value:"un married"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","before-close"])}const ae=z(le,[["render",te]]),ne={components:{Delete:D,More:T},props:{show:{type:Boolean,default:!1},items:{type:Array,required:!0}},setup(i,{emit:t}){const V=v(),l=v(!1),w=n=>{n(),t("update:show",!1)},m=P({items:[]});return i.items.forEach(n=>{m.items.push({type:n.type,relationship:n.relationship,phone:n.phone,name:n.name})}),{props:i,dialogVisible:l,formFields:m,nameRules:{required:!0,message:"Type Required",trigger:"blur"},typeRules:{required:!0,message:"Type Required",trigger:"blur"},relationshipRules:{required:!0,message:"Relationship Required",trigger:"blur"},phoneRules:{required:!0,message:"Phone Required",trigger:"blur"},ruleFormRef:V,handleClose:w,submit:async n=>{try{if(!n)return;await n.validate(async(f,U)=>{f&&(await axios.put(route("emergencyContactUpdate"),m),t("update:show",!1))})}catch(f){console.error(f)}},more:n=>{m.items.push({type:"secondary",relationship:"",phone:"",name:""})},remove:n=>{m.items.splice(n,1)}}}},re={key:0,class:"edit-circle"},se={key:0,class:"mt-2",style:{width:"100%","text-align":"center"}},ie={class:"dialog-footer"};function de(i,t,V,l,w,m){const y=a("delete"),d=a("el-icon"),r=a("el-button"),s=a("el-option"),c=a("el-select"),p=a("el-form-item"),_=a("el-input"),n=a("el-card"),f=a("more"),U=a("el-form"),I=a("el-dialog");return b(),q(I,{"model-value":l.props.show,title:"Emergency Contacts","before-close":l.handleClose,style:{"max-width":"470px"}},{footer:o(()=>[g("span",ie,[e(r,{onClick:t[1]||(t[1]=x=>l.handleClose(()=>{}))},{default:o(()=>[u("Cancel")]),_:1}),e(r,{type:"primary",onClick:t[2]||(t[2]=x=>l.submit(l.ruleFormRef))},{default:o(()=>[u(" Confirm ")]),_:1})])]),default:o(()=>[e(U,{"label-position":"right","label-width":"100px",model:l.formFields,ref:"ruleFormRef",style:{"max-width":"460px"}},{default:o(()=>[(b(!0),k(N,null,A(l.formFields.items,(x,R)=>(b(),q(n,{key:R,class:"box-card mb-2"},{default:o(()=>[R>0?(b(),k("div",re,[e(r,{type:"danger",size:"small",circle:"",onClick:F=>l.remove(R)},{default:o(()=>[e(d,null,{default:o(()=>[e(y)]),_:1})]),_:2},1032,["onClick"])])):E("",!0),e(p,{label:"Type",prop:`items.${R}.type`,rules:l.typeRules},{default:o(()=>[e(c,{modelValue:x.type,"onUpdate:modelValue":F=>x.type=F,disabled:!0},{default:o(()=>[e(s,{label:"Primary",value:"primary"}),e(s,{label:"Secondary",value:"secondary"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"]),e(p,{label:"Name",prop:`items.${R}.name`,rules:l.nameRules},{default:o(()=>[e(_,{modelValue:x.name,"onUpdate:modelValue":F=>x.name=F},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"]),e(p,{label:"Relationship",prop:`items.${R}.relationship`,rules:l.relationshipRules},{default:o(()=>[e(c,{modelValue:x.relationship,"onUpdate:modelValue":F=>x.relationship=F},{default:o(()=>[e(s,{label:"Father",value:"father"}),e(s,{label:"Mother",value:"mother"}),e(s,{label:"Wife",value:"wife"}),e(s,{label:"Brother",value:"brother"}),e(s,{label:"Cousin",value:"cousin"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"]),e(p,{label:"Phone",prop:`items.${R}.phone`,rules:l.phoneRules},{default:o(()=>[e(_,{modelValue:x.phone,"onUpdate:modelValue":F=>x.phone=F},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024))),128)),l.formFields.items.length<2?(b(),k("div",se,[e(r,{onClick:t[0]||(t[0]=x=>l.more(i.i))},{default:o(()=>[e(d,null,{default:o(()=>[e(f)]),_:1}),u(" More ")]),_:1})])):E("",!0)]),_:1},8,["model"])]),_:1},8,["model-value","before-close"])}const ce=z(ne,[["render",de]]);const ue={components:{CircleCloseFilled:L,UploadFilled:j},props:{show:{type:Boolean,default:!1},src:{type:String,required:!0}},setup(i,{emit:t}){const V=v(!1),l=v(!0),w=v(i.src),m=v(null),y=c=>{let p=c.target.files;if(p.length){let _=p[0];m.value=_;let n=new FileReader;n.onload=()=>{let f=n.result;w.value=f},n.readAsDataURL(_)}},d=()=>{t("update:show",!1)};return{props:i,visible:l,busy:V,src:w,fileChange:y,upload:async()=>{if(m.value)try{const c=new FormData;c.append("avatar",m.value);const{data:p}=await axios.post(route("avatar"),c);d(),t("update:src",p.url)}catch(c){console.error(c)}else d()},handleClose:c=>{c(),d()}}}},me={class:"my-header"},_e=["id"],fe={class:"center"},pe={class:"center"},he={class:"input-box"},ye={class:"dialog-footer"};function ge(i,t,V,l,w,m){const y=a("CircleCloseFilled"),d=a("el-icon"),r=a("el-button"),s=a("el-avatar"),c=a("UploadFilled"),p=a("el-dialog");return b(),q(p,{"model-value":l.props.show,"before-close":l.handleClose,"show-close":!1,style:{"min-width":"350px"}},{header:o(({close:_,titleId:n,titleClass:f})=>[g("div",me,[g("h4",{id:n,class:G(f)},"Change Avatar!",10,_e),e(r,{type:"danger",onClick:_},{default:o(()=>[e(d,{class:"el-icon--left"},{default:o(()=>[e(y)]),_:1}),u(" Close ")]),_:2},1032,["onClick"])])]),footer:o(()=>[g("span",ye,[e(r,{type:"primary",onClick:l.upload},{default:o(()=>[e(d,null,{default:o(()=>[e(c)]),_:1}),u(" Upload ")]),_:1},8,["onClick"])])]),default:o(()=>[g("div",fe,[e(s,{size:200,src:l.src},null,8,["src"])]),g("div",pe,[g("div",he,[g("input",{type:"file",onChange:t[0]||(t[0]=(..._)=>l.fileChange&&l.fileChange(..._))},null,32),e(r,{type:"primary"},{default:o(()=>[e(d,null,{default:o(()=>[e(c)]),_:1}),u(" Add Image")]),_:1})])])]),_:1},8,["model-value","before-close"])}const be=z(ue,[["render",ge],["__scopeId","data-v-7c98ee1a"]]);const ve={props:{user_id:{type:[Number,String]}},components:{AppLayout:X,Edit:J,Camera:O,EditProfileVue:ee,PersonalInformationEditVue:ae,EmergencyContactEditVue:ce,ChangeAvatar:be},setup(i){const t=i.user_id,V=W();let l=v(!1),w=v(!1),m=v(!1),y=v(!1);const d=v(!0),r=v(null);return axios.get(route("profile",{user:i.user_id?i.user_id:V.auth_id})).then(({data:c})=>{r.value=c,d.value=!1}),{atNow:c=>Q(c).fromNow(),d:r,busy:d,showProfileEdit:l,showPersonalInfoEdit:w,showEmergencyConEdit:m,showAvatarModel:y,user_id:t}}},we=i=>(H("data-v-4c0d07f3"),i=i(),K(),i),Ce={key:1,class:"profile"},Ve={class:"top-section"},xe={key:0,class:"edit-circle"},Fe={class:"avatar-box"},Re={class:"inner"},ke={style:{"text-align":"center"},class:"mt-3"},qe={class:"mt-3"},Ue={key:0,class:"edit-circle"},Ee={key:0,class:"edit-circle"},Pe=we(()=>g("h3",{class:"mb-2"},"Emergency Contacts",-1));function ze(i,t,V,l,w,m){const y=a("el-progress"),d=a("edit"),r=a("el-icon"),s=a("el-button"),c=a("el-avatar"),p=a("camera"),_=a("el-col"),n=a("el-descriptions-item"),f=a("el-descriptions"),U=a("el-row"),I=a("el-card"),x=a("edit-profile-vue"),R=a("personal-information-edit-vue"),F=a("emergency-contact-edit-vue"),B=a("change-avatar"),S=a("app-layout");return b(),q(S,{busy:!1},{default:o(()=>[l.busy?(b(),q(y,{key:0,percentage:100,status:"success",indeterminate:!0,duration:5})):(b(),k("div",Ce,[g("section",Ve,[l.user_id?E("",!0):(b(),k("div",xe,[e(s,{type:"primary",size:"small",circle:"",onClick:t[0]||(t[0]=h=>l.showProfileEdit=!0)},{default:o(()=>[e(r,null,{default:o(()=>[e(d)]),_:1})]),_:1})])),e(U,{class:"s-body",gutter:24},{default:o(()=>[e(_,{class:"left-side",sm:24,md:12},{default:o(()=>[e(U,{gutter:24},{default:o(()=>[e(_,{sm:24,md:6},{default:o(()=>[g("div",Fe,[g("div",Re,[e(c,{size:120,src:l.d.avatar.url},null,8,["src"]),l.user_id?E("",!0):(b(),k("div",{key:0,class:"camera-icon",onClick:t[1]||(t[1]=h=>l.showAvatarModel=!0)},[e(s,{type:"info",circle:""},{default:o(()=>[e(r,null,{default:o(()=>[e(p)]),_:1})]),_:1})]))])])]),_:1}),e(_,{sm:24,md:18},{default:o(()=>[e(f,{direction:"horizontal",column:1,size:"large",border:""},{default:o(()=>[e(n,{label:"Name:"},{default:o(()=>[u(C(l.d.name),1)]),_:1}),e(n,{label:"Designation:"},{default:o(()=>[u("Designation")]),_:1}),e(n,{label:"Joining:"},{default:o(()=>[u(C(l.atNow(l.d.created_at)),1)]),_:1})]),_:1}),g("div",ke,[e(s,{type:"primary"},{default:o(()=>[e(r,null,{default:o(()=>[e(d)]),_:1}),u(" Message ")]),_:1})])]),_:1})]),_:1})]),_:1}),e(_,{class:"right-side",sm:24,md:12},{default:o(()=>[e(f,{direction:"horizontal",column:1,size:"large",border:""},{default:o(()=>[e(n,{label:"Phone:"},{default:o(()=>[u(C(l.d.phone),1)]),_:1}),e(n,{label:"Email:"},{default:o(()=>[u(C(l.d.email),1)]),_:1}),e(n,{label:"Birthday:"},{default:o(()=>[u(C(l.d.profile.birth_date),1)]),_:1}),e(n,{label:"Address:"},{default:o(()=>[u(C(l.d.profile.address),1)]),_:1}),e(n,{label:"Gender:"},{default:o(()=>[u(C(l.d.profile.gender),1)]),_:1})]),_:1})]),_:1})]),_:1})]),g("section",qe,[e(U,{gutter:24},{default:o(()=>[e(_,{sm:24,md:12},{default:o(()=>[g("div",null,[e(I,{class:"box-card"},{default:o(()=>[l.user_id?E("",!0):(b(),k("div",Ue,[e(s,{type:"primary",size:"small",circle:"",onClick:t[2]||(t[2]=h=>l.showPersonalInfoEdit=!0)},{default:o(()=>[e(r,null,{default:o(()=>[e(d)]),_:1})]),_:1})])),e(f,{title:"Personal Informations",direction:"horizontal",column:1,size:"large",border:""},{default:o(()=>[e(n,{label:"Nationality:"},{default:o(()=>[u(C(l.d.personal_information.nationality),1)]),_:1}),e(n,{label:"Religion:"},{default:o(()=>[u(C(l.d.personal_information.religion),1)]),_:1}),e(n,{label:"Birthday:"},{default:o(()=>[u(C(l.d.profile.birth_day),1)]),_:1}),e(n,{label:"Marital status:"},{default:o(()=>[u(C(l.d.personal_information.marital_status),1)]),_:1})]),_:1})]),_:1})])]),_:1}),e(_,{sm:24,md:12},{default:o(()=>[g("div",null,[e(I,{class:"box-card"},{default:o(()=>[l.user_id?E("",!0):(b(),k("div",Ee,[e(s,{type:"primary",size:"small",circle:"",onClick:t[3]||(t[3]=h=>l.showEmergencyConEdit=!0)},{default:o(()=>[e(r,null,{default:o(()=>[e(d)]),_:1})]),_:1})])),Pe,(b(!0),k(N,null,A(l.d.emergency_contacts,(h,M)=>(b(),q(f,{key:M,title:h.type,direction:"horizontal",column:1,size:"large",border:""},{default:o(()=>[e(n,{label:"Type:"},{default:o(()=>[u(C(h.type),1)]),_:2},1024),e(n,{label:"Name:"},{default:o(()=>[u(C(h.name),1)]),_:2},1024),e(n,{label:"Relationship:"},{default:o(()=>[u(C(h.relationship),1)]),_:2},1024),e(n,{label:"Phone:"},{default:o(()=>[u(C(h.phone),1)]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:1})])]),_:1})]),_:1})]),e(x,{show:l.showProfileEdit,"onUpdate:show":t[4]||(t[4]=h=>l.showProfileEdit=h),item:l.d.profile},null,8,["show","item"]),e(R,{show:l.showPersonalInfoEdit,"onUpdate:show":t[5]||(t[5]=h=>l.showPersonalInfoEdit=h),item:l.d.personal_information},null,8,["show","item"]),e(F,{show:l.showEmergencyConEdit,"onUpdate:show":t[6]||(t[6]=h=>l.showEmergencyConEdit=h),items:l.d.emergency_contacts},null,8,["show","items"]),e(B,{show:l.showAvatarModel,"onUpdate:show":t[7]||(t[7]=h=>l.showAvatarModel=h),src:l.d.avatar.url,"onUpdate:src":t[8]||(t[8]=h=>l.d.avatar.url=h)},null,8,["show","src"])]))]),_:1})}const Be=z(ve,[["render",ze],["__scopeId","data-v-4c0d07f3"]]);export{Be as default};
