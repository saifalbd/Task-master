import{A as C,_ as V}from"./PageTitleBox-04038783.js";import{d as L,_ as y,i as l,o as d,g as j,h as u,a as t,j as r,b as p,p as $,l as B,c as v,F as g,k as x,t as c,m as A,r as w,M,q as N}from"./app-e8ae732e.js";import{S as q}from"./index-fd8569ce.js";import{S}from"./statusBtn-765905d4.js";import{R as D}from"./RemoveEditButton-5f8dfccb.js";import"./index-d08628c3.js";import"./moment-fbc5633a.js";import"./icon-c404ea0d.js";import"./index-d156ff58.js";const E=L({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0},task:{type:Object,required:!0}},setup(o,{emit:i}){return{props:o,close:()=>{i("update:show",!1)}}}}),I=o=>($("data-v-b7f3b00a"),o=o(),B(),o),P={class:"layout va-gutter-1"},U={class:"row"},F=I(()=>t("div",{class:"flex xs12"},[t("div",{class:"item mb-4"},[t("div",{class:"form-title"},[t("span",{class:"text"},"Show Task")])])],-1)),z={class:"flex xs12"},H=["innerHTML"],R={class:"flex xs12"},O={class:"item actions-btns"};function G(o,i,b,e,m,k){const h=l("va-icon"),f=l("va-button"),_=l("va-modal");return d(),j(_,{modelValue:o.props.show,"onUpdate:modelValue":i[0]||(i[0]=s=>o.props.show=s),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:u(()=>[t("div",P,[t("div",U,[F,t("div",z,[t("div",{class:"item",innerHTML:o.task.description},null,8,H)]),t("div",R,[t("div",O,[r(f,{color:"danger",size:"small",onClick:o.close},{default:u(()=>[r(h,{class:"material-icons"},{default:u(()=>[p("close")]),_:1}),p(" Close")]),_:1},8,["onClick"])])])])])]),_:1},8,["modelValue"])}const J=y(E,[["render",G],["__scopeId","data-v-b7f3b00a"]]),K={components:{StatusBtn:S,RemoveEditButton:D,Taskmodel:J},props:{project_id:{type:Number,required:!0},tasks:{type:Array,required:!0}},setup(o){return{props:o}}},Q={class:"va-table-responsive"},W={class:"va-table"},X=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Employees"),t("th",null,"AssignAt"),t("th",null,"DeadLine"),t("th",null,"Status"),t("th",null,"action")])],-1);function Y(o,i,b,e,m,k){const h=l("status-btn"),f=l("taskmodel"),_=l("remove-edit-button");return d(),v("div",Q,[t("table",W,[X,t("tbody",null,[(d(!0),v(g,null,x(e.props.tasks,(s,n)=>(d(),v("tr",{key:n},[t("td",null,c(s.title),1),t("td",null,c(s.employees.map(a=>a.name).join(",")),1),t("td",null,c(s.start),1),t("td",null,c(s.end),1),t("td",null,[r(h,{status:s.status,size:"small"},null,8,["status"])]),t("td",null,[r(_,{isView:!0,isEdit:!1,isDelete:!1,onViewClick:a=>s.showModel=!0},{default:u(()=>[r(f,{show:s.showModel,"onUpdate:show":a=>s.showModel=a,task:s},null,8,["show","onUpdate:show","task"])]),_:2},1032,["onViewClick"])])]))),128))])])])}const Z=y(K,[["render",Y]]),tt={props:{id:{type:[String,Number],required:!0}},components:{AppLayout:C,PageTitleBox:V,ShowProject:q,StatusBtn:S,TaskList:Z},setup(o){const i=A(),b=w(i.auth_id),e=w(null),m=w(!0);w(!1);const k=w([]);(async()=>{m.value=!0;try{const s=route("project.show",{project:o.id}),{data:n}=await axios.get(s);e.value=n}catch(s){console.error(s)}m.value=!1})(),(async()=>{try{const s=route("project.task.index",{project:o.id}),{data:n}=await axios.get(s);k.value=n.map(a=>(a.showModel=!1,a))}catch(s){console.error(s)}})();const _=async s=>{try{const n=route("project.changeStatus",{project:o.id}),{data:a}=await axios.post(n,{status:s});e.value.status=s,init({message:"Succsess Fully Update Status",color:"#432c50",closeable:!0,duration:4e3})}catch(n){console.error(n)}};return{busy:m,id:o.id,project:e,auth_id:b,tasks:k,statusList:M,changeStatus:_}}},st={key:0},et={class:"status-dropdown"},ot=["onClick"];function at(o,i,b,e,m,k){const h=l("page-title-box"),f=l("task-list"),_=l("status-btn"),s=l("show-project"),n=l("app-layout");return d(),j(n,{busy:e.busy},{default:u(()=>[t("div",null,[r(h,{title:"Project"})]),e.project?(d(),v("div",st,[r(s,{auth_id:e.auth_id,id:e.id,project:e.project},{tasks:u(()=>[r(f,{tasks:e.tasks,project_id:e.project.id},null,8,["tasks","project_id"])]),default:u(()=>[t("div",null,[t("h1",null,[p(" Assigner: "),t("b",null,c(e.project.assigner.name),1)]),t("h1",null,[p(" Team: "),t("b",null,c(e.project.team.title),1)]),t("div",null,[p("Status: "),r(_,{dropdown:!0,status:e.project.status},{default:u(()=>[t("ul",et,[(d(!0),v(g,null,x(e.statusList.filter(a=>a.status!=e.project.status),(a,T)=>(d(),v("li",{key:T,onClick:nt=>e.changeStatus(a.status)},c(a.title),9,ot))),128))])]),_:1},8,["status"])]),t("div",null,[p(" Project Assin: "),t("b",null,c(e.project.start),1)]),t("div",null,[p(" DeadLine: "),t("b",null,c(e.project.end),1)])])]),_:1},8,["auth_id","id","project"])])):N("",!0)]),_:1},8,["busy"])}const ht=y(tt,[["render",at]]);export{ht as default};
