import{a as x,S as v}from"./app-layout-2f5ccb75.js";import{_ as B}from"./PageTitleBox-3fa34230.js";import{S as F}from"./index-5ecec8e6.js";import{_ as L,r as y,m as M,I as C,ak as z,h as N,w as e,e as n,f as u,i as r,b as s,c as p,t as _,F as T,n as V,J as Y}from"./app-8ae3c754.js";import{u as A}from"./useToast-deb3a94b.js";import"./FormDialog-a20cd67a.js";import"./index-cc1c919a.js";import"./moment-fbc5633a.js";import"./icon-7c2f508c.js";import"./index-7c6a9529.js";const q={props:{id:{type:[String,Number],required:!0}},components:{AppLayout:x,PageTitleBox:B,ShowTask:F,StatusBtn:v},setup(i){const l=y(null),d=y(!0),k=M().auth_id,{init:f}=A();(async()=>{try{const o=route("my.task.show",{task:i.id}),{data:a}=await axios.get(o);l.value=a}catch(o){console.error(o)}d.value=!1})();const m=async o=>{try{const a=route("task.changeStatus",{task:i.id}),{data:b}=await axios.post(a,{status:o});l.value.status=o,f({message:"Succsess Fully Update Status",color:"#432c50",closeable:!0,duration:4e3})}catch(a){console.error(a)}};return{busy:d,auth_id:k,id:i.id,task:l,changeStatus:m,statusList:C,useDateFormat:z}}},E={key:0},I={style:{"font-size":"15px","margin-left":"5px"}},J={class:"status-dropdown"},P=["onClick"];function U(i,l,d,t,k,f){const h=n("page-title-box"),m=n("el-avatar"),o=n("el-link"),a=n("el-descriptions-item"),b=n("status-btn"),g=n("el-descriptions"),w=n("show-task"),S=n("app-layout");return u(),N(S,{busy:t.busy},{default:e(()=>[r("div",null,[s(h,{title:"Show Task"})]),t.task?(u(),p("div",E,[s(w,{auth_id:t.auth_id,id:t.id,task:t.task},{default:e(()=>[s(g,{direction:"horizontal",column:1,size:"large",border:""},{default:e(()=>[s(a,{label:"Assigner:"},{default:e(()=>[s(o,null,{default:e(()=>[s(m,{size:25,src:t.task.assigner.avatar.url},null,8,["src"]),r("b",I,_(t.task.assigner.name),1)]),_:1})]),_:1}),s(a,{label:"Status:"},{default:e(()=>[s(b,{dropdown:!0,status:t.task.status},{default:e(()=>[r("ul",J,[(u(!0),p(T,null,V(t.statusList.filter(c=>c.status!=t.task.status),(c,D)=>(u(),p("li",{key:D,onClick:j=>t.changeStatus(c.status)},_(c.title),9,P))),128))])]),_:1},8,["status"])]),_:1}),s(a,{label:"Asigned Date:"},{default:e(()=>[r("b",null,_(t.useDateFormat(new Date(t.task.start),"DD MMM YY")),1)]),_:1}),s(a,{label:"DeadLine Date:"},{default:e(()=>[r("b",null,_(t.useDateFormat(new Date(t.task.end),"DD MMM YY")),1)]),_:1})]),_:1})]),_:1},8,["auth_id","id","task"])])):Y("",!0)]),_:1},8,["busy"])}const tt=L(q,[["render",U]]);export{tt as default};
