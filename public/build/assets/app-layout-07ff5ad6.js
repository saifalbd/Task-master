import{d as T,v as G,x as K,y as Q,z as W,A as X,B as Y,C as Z,D as ee,_ as A,f,c as z,b as t,w as s,u as x,e as a,q as E,s as F,i as n,G as R,n as j,h as y,H as V,j as C,t as U,I as te,r as B,F as L,p as D,J as P,m as H,K as O,L as oe,M as se,N as ne}from"./app-65c4e35f.js";const ae=T({components:{HomeFilled:G,Collection:K,Management:Q,Files:W,Connection:X,Avatar:Y,Position:Z,User:ee},setup(){const e=x();return{go:i=>{e.push(i)}}}}),m=e=>(E("data-v-2599242c"),e=e(),F(),e),le={class:"asside-box"},ie=m(()=>n("b",null,"Home",-1)),de=m(()=>n("b",null,"Admin Board",-1)),re=m(()=>n("b",null,"Job Board",-1)),ue=m(()=>n("b",null,"Contacts",-1)),ce=m(()=>n("b",null,"Employees",-1)),_e=m(()=>n("b",null,"Employees",-1)),fe=m(()=>n("b",null,"Department",-1)),pe=m(()=>n("b",null,"Designation",-1)),me=m(()=>n("b",null,"Clients",-1)),ve=m(()=>n("b",null,"Category",-1)),he=m(()=>n("b",null,"Teams",-1)),ge=m(()=>n("b",null,"Projects",-1)),be=m(()=>n("b",null,"Assignments",-1)),$e=m(()=>n("b",null,"jobs",-1)),ke=m(()=>n("b",null,"Tasks",-1)),Ce=m(()=>n("b",null,"Assignments",-1)),ye=m(()=>n("b",null,"jobs",-1)),we=m(()=>n("b",null,"toDoList",-1));function Se(e,o,i,d,$,k){const u=a("home-filled"),l=a("el-icon"),r=a("el-menu-item"),c=a("el-sub-menu"),h=a("avatar"),p=a("connection"),b=a("position"),v=a("user"),S=a("management"),w=a("files"),M=a("el-menu");return f(),z("div",le,[t(M,{"default-active":"1"},{default:s(()=>[t(c,{index:"1"},{title:s(()=>[t(l,null,{default:s(()=>[t(u)]),_:1}),ie]),default:s(()=>[t(r,{index:"1-1",onClick:o[0]||(o[0]=g=>e.go({name:"home"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(u)]),_:1}),de]),_:1}),t(r,{index:"1-2",onClick:o[1]||(o[1]=g=>e.go({name:"job.home"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(u)]),_:1}),re]),_:1})]),_:1}),t(r,{index:"2",onClick:o[2]||(o[2]=g=>e.go({name:"contact"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(h)]),_:1}),ue]),_:1}),t(c,{index:"2"},{title:s(()=>[t(l,null,{default:s(()=>[t(h)]),_:1}),ce]),default:s(()=>[t(r,{index:"2-1",onClick:o[3]||(o[3]=g=>e.go({name:"employee"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(h)]),_:1}),_e]),_:1}),t(r,{index:"2-2",onClick:o[4]||(o[4]=g=>e.go({name:"department"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(p)]),_:1}),fe]),_:1}),t(r,{index:"2-3",onClick:o[5]||(o[5]=g=>e.go({name:"designation"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(b)]),_:1}),pe]),_:1})]),_:1}),t(r,{index:"3",onClick:o[6]||(o[6]=g=>e.go({name:"client"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(v)]),_:1}),me]),_:1}),t(r,{index:"4",onClick:o[7]||(o[7]=g=>e.go({name:"category"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(p)]),_:1}),ve]),_:1}),t(r,{index:"7",onClick:o[8]||(o[8]=g=>e.go({name:"team"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(S)]),_:1}),he]),_:1}),t(c,{index:"8"},{title:s(()=>[t(l,null,{default:s(()=>[t(w)]),_:1}),ge]),default:s(()=>[t(r,{index:"8-1",onClick:o[9]||(o[9]=g=>e.go({name:"project"}))},{default:s(()=>[be]),_:1}),t(r,{index:"8-2",onClick:o[10]||(o[10]=g=>e.go({name:"job.project"}))},{default:s(()=>[$e]),_:1})]),_:1}),t(c,{index:"9"},{title:s(()=>[t(l,null,{default:s(()=>[t(w)]),_:1}),ke]),default:s(()=>[t(r,{index:"9-1",onClick:o[11]||(o[11]=g=>e.go({name:"task"}))},{default:s(()=>[Ce]),_:1}),t(r,{index:"9-2",onClick:o[12]||(o[12]=g=>e.go({name:"job.task"}))},{default:s(()=>[ye]),_:1})]),_:1}),t(r,{index:"10",onClick:o[13]||(o[13]=g=>e.go({name:"toDoList"}))},{default:s(()=>[t(l,null,{default:s(()=>[t(u)]),_:1}),we]),_:1})]),_:1})])}const Ue=A(ae,[["render",Se],["__scopeId","data-v-2599242c"]]),q=R("notifications",{state(){return{count:0,notifications:[],showModal:!1}},actions:{toggleNodal(e){this.showModal=e},addNotify(e){this.notifications.unshift(e),this.count++},notificationsFetch(){axios.get(route("notification")).then(({data:e})=>{this.notifications=e,this.count=e.length})}},getters:{taskNotifications(){return this.notifications.filter(e=>["TaskAssigned","TaskStatusChanged"].includes(e.type))},employeeAssignedNotifications(){return this.notifications.filter(e=>e.type=="EmployeeAssigned")}}}),ze={props:{dropdown:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},preset:{type:String,default:"secondary"},size:{type:String,default:"medium"},color:{type:String,default:"primary"},textColor:{type:String,default:""},borderColor:{type:String,default:""},status:{type:[Number,String],required:!0}},setup(e){let o=j(()=>te[parseInt(e.status)]);return{props:e,status:o}}};function Be(e,o,i,d,$,k){const u=a("va-button-dropdown"),l=a("va-button");return i.dropdown?(f(),y(u,{key:0,label:d.status.title,preset:d.props.preset,loading:d.props.loading,plain:d.props.plain,size:d.props.size,color:d.status.color,"text-color":d.props.textColor,"border-color":d.props.borderColor},{default:s(()=>[V(e.$slots,"default")]),_:3},8,["label","preset","loading","plain","size","color","text-color","border-color"])):(f(),y(l,{key:1,preset:d.props.preset,loading:d.props.loading,plain:d.props.plain,size:d.props.size,color:d.status.color,"text-color":d.props.textColor,"border-color":d.props.borderColor},{default:s(()=>[C(U(d.status.title),1)]),_:1},8,["preset","loading","plain","size","color","text-color","border-color"]))}const Ne=A(ze,[["render",Be]]);const Ae=T({components:{statusBtnVue:Ne},model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:o}){const i=q(),d=x(),$=B(!1),k="Notifications",u=()=>{o("update:show",!1)};return{title:k,busy:$,props:e,close:u,go:(r,c)=>{axios.put(route("markAsReadNotify",{id:c}),{}),u(),d.push(r)},notifyStore:i}}}),Me={class:"layout va-gutter-1"},Te={class:"row"},Ie={class:"flex xs12"},Ve={class:"item mb-4"},Pe={class:"form-title"},je={class:"text"},xe={key:0,class:"flex xs12"},Ee=["src"],Fe={key:1,class:"flex xs12"},Le=["src"],De={class:"flex xs12"},Re={class:"item actions-btns"};function He(e,o,i,d,$,k){const u=a("va-icon"),l=a("va-list-label"),r=a("va-avatar"),c=a("va-list-item-section"),h=a("el-link"),p=a("va-list-item-label"),b=a("status-btn-vue"),v=a("va-list-item"),S=a("va-list"),w=a("va-button"),M=a("va-inner-loading"),g=a("va-modal");return f(),y(g,{modelValue:e.show,"onUpdate:modelValue":o[0]||(o[0]=_=>e.show=_),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:s(()=>[t(M,{loading:e.busy},{default:s(()=>[n("div",Me,[n("div",Te,[n("div",Ie,[n("div",Ve,[n("div",Pe,[t(u,{name:"notifications"}),n("span",je,U(e.title),1)])])]),e.notifyStore.taskNotifications.length?(f(),z("div",xe,[t(S,null,{default:s(()=>[t(l,null,{default:s(()=>[C(" TaskNotifications ")]),_:1}),(f(!0),z(L,null,D(e.notifyStore.taskNotifications,(_,N)=>(f(),y(v,{class:"list__item",key:N},{default:s(()=>[t(c,{avatar:"",onClick:I=>e.go({name:"userProfile",params:{user:_.data.user_id}},_.id)},{default:s(()=>[t(r,{size:40},{default:s(()=>[n("img",{src:_.fromUser.avatar.url},null,8,Ee)]),_:2},1024)]),_:2},1032,["onClick"]),t(c,null,{default:s(()=>[t(p,{onClick:I=>e.go({name:"userProfile",params:{user:_.data.user_id}},_.id)},{default:s(()=>[t(h,{underline:!1},{default:s(()=>[n("b",null,U(_.fromUser.name),1)]),_:2},1024)]),_:2},1032,["onClick"]),_.type=="TaskStatusChanged"?(f(),y(p,{key:0,onClick:I=>e.go({name:"job.task.show",params:{id:_.data.task_id}},_.id),lines:N+1},{default:s(()=>[C(U(_.data.message)+" Changed Status From ",1),t(b,{status:_.data.beforeStatus,size:"small"},null,8,["status"]),C(" To "),t(b,{status:_.data.status,size:"small"},null,8,["status"])]),_:2},1032,["onClick","lines"])):(f(),y(p,{key:1,onClick:I=>e.go({name:"job.task.show",params:{id:_.data.task_id}},_.id),lines:N+1},{default:s(()=>[C(U(_.data.message),1)]),_:2},1032,["onClick","lines"]))]),_:2},1024),t(c,{icon:""},{default:s(()=>[t(u,{name:"remove_red_eye",color:"background-tertiary"})]),_:1})]),_:2},1024))),128))]),_:1})])):P("",!0),e.notifyStore.employeeAssignedNotifications.length?(f(),z("div",Fe,[t(S,null,{default:s(()=>[t(l,null,{default:s(()=>[C(" Employee Assigned Notifications ")]),_:1}),(f(!0),z(L,null,D(e.notifyStore.employeeAssignedNotifications,(_,N)=>(f(),y(v,{class:"list__item",key:N,onClick:I=>e.go({name:"userProfile",params:{user:_.data.user_id}},_.id)},{default:s(()=>[t(c,{avatar:""},{default:s(()=>[t(r,{size:40},{default:s(()=>[n("img",{src:_.fromUser.avatar.url},null,8,Le)]),_:2},1024)]),_:2},1024),t(c,null,{default:s(()=>[t(p,null,{default:s(()=>[n("b",null,U(_.fromUser.name),1)]),_:2},1024),t(p,{lines:N+1},{default:s(()=>[C(U(_.data.message),1)]),_:2},1032,["lines"])]),_:2},1024),t(c,{icon:""},{default:s(()=>[t(u,{name:"remove_red_eye",color:"background-tertiary"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):P("",!0),n("div",De,[n("div",Re,[t(w,{color:"danger",size:"small",onClick:e.close},{default:s(()=>[t(u,{class:"material-icons"},{default:s(()=>[C("close")]),_:1}),C(" Close")]),_:1},8,["onClick"])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const Oe=A(Ae,[["render",He],["__scopeId","data-v-37171278"]]);const qe=T({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:o}){const i=H(),d=B(!1),$="Profile Thumbnil";let k=B(!1),u=B(""),l=B(null);return{title:$,attach:l,hasThumb:k,thumbnil:u,fileAded:p=>{let v=p.target.files;if(v.length){let S=v[0];l.value=S;let w=new FileReader;w.onload=()=>{let M=w.result;u.value=M,k.value=!0},w.readAsDataURL(S)}},update:async()=>{try{const p=route("avatar",{},!1),b=new FormData;l.value&&b.append("avatar",l.value);const{data:v}=await axios.post(p,b);i.updateAvatar(v),i.hideProfileModal()}catch(p){console.error(p)}},busy:d,props:e,close:()=>{o("update:show",!1)}}}}),Je=e=>(E("data-v-8d7b5baf"),e=e(),F(),e),Ge={class:"layout va-gutter-1"},Ke={class:"row"},Qe={class:"flex xs12"},We={class:"item mb-4"},Xe={class:"form-title"},Ye={class:"text"},Ze={class:"flex xs12"},et={class:"row"},tt={class:"flex xs12"},ot={key:0,class:"img-box"},st=["src"],nt={class:"input-box"},at={class:"va-file-upload va-file-upload--dropzone",style:{"background-color":"rgba(21, 79, 193, 0.08)"}},lt=Je(()=>n("div",{class:"va-file-upload__field"},[n("div",{class:"va-file-upload__field__text"}," Click Here And Upload File ")],-1)),it={class:"flex xs12"},dt={class:"item actions-btns"};function rt(e,o,i,d,$,k){const u=a("va-icon"),l=a("va-button"),r=a("va-inner-loading"),c=a("va-modal");return f(),y(c,{modelValue:e.show,"onUpdate:modelValue":o[1]||(o[1]=h=>e.show=h),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:s(()=>[t(r,{loading:e.busy},{default:s(()=>[n("div",Ge,[n("div",Ke,[n("div",Qe,[n("div",We,[n("div",Xe,[t(u,{name:"notifications"}),n("span",Ye,U(e.title),1)])])]),n("div",Ze,[n("div",et,[n("div",tt,[n("div",{class:O(["tumb-card",{hasThumb:e.hasThumb}])},[e.hasThumb?(f(),z("div",ot,[n("img",{src:e.thumbnil,alt:""},null,8,st)])):P("",!0),n("div",nt,[n("div",at,[lt,n("input",{type:"file",class:"va-file-upload__field__input",tabindex:"-1","aria-hidden":"true",onChange:o[0]||(o[0]=(...h)=>e.fileAded&&e.fileAded(...h))},null,32)])])],2)])])]),n("div",it,[n("div",dt,[t(l,{color:"info",onClick:e.update},{default:s(()=>[C(" Skip")]),_:1},8,["onClick"]),t(l,{color:"success",onClick:e.update},{default:s(()=>[C(" Next")]),_:1},8,["onClick"])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const ut=A(qe,[["render",rt],["__scopeId","data-v-8d7b5baf"]]),ct=R("chat",{state(){return{users:[],totalUnreadCount:0}},actions:{async fetchChatUsers(e){try{const{data:o}=await axios.get(route("chatUsers"));this.users=o.map((i,d)=>(i.active=!d,i.messages=[],i)),e(this.users)}catch(o){console.error(o)}},increaseTotalUnread(e){this.totalUnreadCount=+e},increaseUnread(e,o){this.users=this.users.map(i=>(i.id==e&&(i.unReadCount=i.unReadCount+o),i)),this.totalUnreadCount=this.totalUnreadCount+o,oe()},listen(e){Echo.join("chat").joining(o=>{axios.put(route("online",{user:o.id}))}).leaving(o=>{axios.put(route("offline",{user:o.id}),{})}).listen("UserOnline",o=>{const i=this.users.find(d=>d.id==o.id);i&&(i.isOnline=!0)}).listen("UserOffline",o=>{const i=this.users.find(d=>d.id==o.id);i&&(i.isOnline=!1)}).listen("ChatEvent",o=>{e(o)})}}}),_t=T({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:o}){return{props:e}}}),ft=n("div",null,"Chat modal",-1);function pt(e,o,i,d,$,k){const u=a("va-inner-loading"),l=a("va-modal");return f(),y(l,{modelValue:e.show,"onUpdate:modelValue":o[0]||(o[0]=r=>e.show=r),fullscreen:!0,"hide-default-actions":"","no-outside-dismiss":""},{default:s(()=>[t(u,{loading:e.busy},{default:s(()=>[ft]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const mt=A(_t,[["render",pt]]);const vt=T({components:{AsideBar:Ue,NotificationModel:Oe,ProfileEditModal:ut,ChatModal:mt},props:{title:{type:String,default:"title"},showInfoBar:{type:Boolean,default:!1},busy:{type:Boolean,default:!0}},setup(e){const o=H(),i=ct(),d=j(()=>i.totalUnreadCount);let $=o.token,k=o.user,u=o.avatar,l=j(()=>o.showProfileModal),r=B(!1);$&&(window.Echo.connector.options.auth.headers.Authorization=`Bearer ${$}`);const c=x(),h=q();h.notificationsFetch();const p=()=>{ne(),c.push({name:"login"})},b=B(!1),v=()=>{i.users.length?c.push({name:"chat"}):(b.value=!0,i.fetchChatUsers(()=>{b.value=!1,c.push({name:"chat"})}))},S=()=>{c.push({name:"profile"})};return se(()=>{axios.get(route("chatUnreadcount")).then(({data:w})=>{i.increaseTotalUnread(w)})}),{avatar:u,props:e,notifyStore:h,user:k,showProfileModal:l,showChatModal:r,chatUnreadcount:d,chatIconBusy:b,logout:p,goChat:v,goProfile:S}}}),J=e=>(E("data-v-d8372b02"),e=e(),F(),e),ht={class:"main-layout"},gt={class:"info-bar-body"},bt={class:"asside"},$t={class:"main-content"},kt={class:"inner"},Ct={class:"top-nav"},yt=J(()=>n("div",{class:"page-title"},"Task Master",-1)),wt={class:"right-side"},St=J(()=>n("span",{class:"mx-2"},"Logout",-1)),Ut={class:"page-content"};function zt(e,o,i,d,$,k){const u=a("AsideBar"),l=a("va-icon"),r=a("va-avatar"),c=a("va-badge"),h=a("va-inner-loading"),p=a("va-button"),b=a("NotificationModel");return f(),z("div",ht,[n("div",{class:O(["info-bar",{show:e.props.showInfoBar}])},[n("div",gt,[V(e.$slots,"info",{},void 0,!0)])],2),n("div",bt,[t(u)]),n("div",$t,[n("div",kt,[n("div",Ct,[yt,n("div",wt,[V(e.$slots,"custom",{},void 0,!0),t(c,{class:"notification-icon",text:e.notifyStore.count,overlap:"",onClick:o[0]||(o[0]=v=>e.notifyStore.toggleNodal(!0))},{default:s(()=>[t(r,{size:"small"},{default:s(()=>[t(l,{size:"small",name:"notifications"})]),_:1})]),_:1},8,["text"]),t(c,{text:e.chatUnreadcount,overlap:""},{default:s(()=>[t(h,{loading:e.chatIconBusy},{default:s(()=>[t(r,{onClick:e.goChat,size:"small"},{default:s(()=>[t(l,{size:"small",name:"message"})]),_:1},8,["onClick"])]),_:1},8,["loading"])]),_:1},8,["text"]),e.user?(f(),z("span",{key:0,class:"profile-badge-box",onClick:o[1]||(o[1]=(...v)=>e.goProfile&&e.goProfile(...v))},[e.avatar?(f(),y(r,{key:0,size:"small",src:e.avatar.url,alt:e.avatar.path},null,8,["src","alt"])):(f(),y(r,{key:1,size:"small",icon:"person"})),n("span",null,U(e.user.name),1),n("span",null,[t(l,{size:"small",name:"expand_more"})])])):P("",!0),t(p,{class:"ml-4",size:"small",preset:"primary",round:"",onClick:e.logout},{default:s(()=>[t(l,{size:"small",name:"lock"}),St]),_:1},8,["onClick"])])]),n("div",Ut,[t(h,{loading:e.props.busy,size:60},{default:s(()=>[V(e.$slots,"default",{},void 0,!0)]),_:3},8,["loading"])])])]),t(b,{show:e.notifyStore.showModal,"onUpdate:show":o[2]||(o[2]=v=>e.notifyStore.toggleNodal(v)),onClose:o[3]||(o[3]=v=>e.notifyStore.toggleNodal(!1))},null,8,["show"])])}const Nt=A(vt,[["render",zt],["__scopeId","data-v-d8372b02"]]);export{Ne as S,Nt as a,ct as c};
