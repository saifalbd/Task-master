import{F as E}from"./FormDialog-5c633337.js";import{r as H}from"./index-4e0ae16a.js";import{h as V}from"./moment-fbc5633a.js";import{_ as B,r as a,f as A,h as F,w as v,b as n,i as s,j as S,z as q,e as i}from"./app-090196be.js";const z={components:{FormDialog:E},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},taskTypes:{type:Array,required:!0}},setup(T,{emit:t}){let g=a(!1);const e=a(!1),_=a(null);let x=a(""),d=a(null),m=a(null);const p=a(V().format(dateFormat)),u=a(null),c=a(null),y=a(new Date),b=r=>{var h;return(h=r==null?void 0:r.toLocaleTimeString)==null?void 0:h.call(r)},f=a(""),o=a([]),k=()=>{let r=V(y.value);return V().hour()!=r.hour()?r.format("h:mm"):""};return{props:T,form:_,emit:t,save:async()=>{var w;let r=route("task.store");if(!await _.value.validate())return null;e.value=!0;try{const l=new FormData;l.append("title",x.value),l.append("category",d.value),l.append("employee",(w=m.value)==null?void 0:w.id),l.append("start",p.value),l.append("end",u.value),l.append("endTime",k()),l.append("taskType",c.value),l.append("description",f.value),o.value.forEach((C,D)=>{l.append(`attachments[${D}]`,C)});const{data:U}=await axios.post(r,l);t("push",addProtos(U,{action:!0,showEdit:!1}))}catch(l){console.error(l),validErorrs(l)}e.value=!1},rs:H,busy:g,formBusy:e,taskType:c,timeFormat:b,title:x,start:p,end:u,endTime:y,employee:m,category:d,description:f,attachments:o}}},L={class:"layout gutter--md"},N={class:"row align-content--center"},j={class:"flex xs12 in-box"},P={class:"flex xs12 in-box"},Q={class:"flex xs12 in-box"},G={class:"flex xs12 in-box"},I={class:"flex xs4 in-box"},J={class:"flex xs4 in-box"},K={class:"flex xs4 in-box"},M={class:"flex xs12 in-box"},O={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function R(T,t,g,e,_,x){const d=i("va-input"),m=i("va-select"),p=i("va-chip"),u=i("va-time-input"),c=i("va-file-upload"),y=i("QuillEditor"),b=i("va-form"),f=i("form-dialog");return A(),F(f,{show:e.props.show,"onUpdate:show":t[9]||(t[9]=o=>e.emit("update:show",o)),busy:e.formBusy,title:"Create Task",onAdd:e.save,fullscreen:!0},{default:v(()=>[n(b,{ref:"form"},{default:v(()=>[s("div",L,[s("div",N,[s("div",j,[n(d,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.title=o),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),s("div",P,[n(m,{modelValue:e.taskType,"onUpdate:modelValue":t[1]||(t[1]=o=>e.taskType=o),label:"Task Type",placeholder:"Type Here","text-by":"title","value-by":"id",options:e.props.taskTypes},null,8,["modelValue","options"])]),s("div",Q,[n(m,{modelValue:e.category,"onUpdate:modelValue":t[2]||(t[2]=o=>e.category=o),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),s("div",G,[n(m,{modelValue:e.employee,"onUpdate:modelValue":t[3]||(t[3]=o=>e.employee=o),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:v(({value:o})=>[n(p,{size:"small",class:"mr-1 my-1"},{default:v(()=>[S(q(o.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),s("div",I,[n(d,{modelValue:e.start,"onUpdate:modelValue":t[4]||(t[4]=o=>e.start=o),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),s("div",J,[n(d,{modelValue:e.end,"onUpdate:modelValue":t[5]||(t[5]=o=>e.end=o),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),s("div",K,[n(u,{label:"End Time",modelValue:e.endTime,"onUpdate:modelValue":t[6]||(t[6]=o=>e.endTime=o)},null,8,["modelValue"])]),s("div",M,[n(c,{modelValue:e.attachments,"onUpdate:modelValue":t[7]||(t[7]=o=>e.attachments=o),dropzone:""},null,8,["modelValue"])]),s("div",O,[n(y,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[8]||(t[8]=o=>e.description=o),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const ee=B(z,[["render",R]]);export{ee as C};
