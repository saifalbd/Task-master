import{C as W}from"./CreateButton-08f0b54b.js";import{a as X}from"./app-layout-da8aae87.js";import{_ as Z}from"./PageTitleBox-a5bef8f7.js";import{_ as R,r as g,a as y,f as w,h as D,w as n,b as t,e as l,ak as $,a6 as ee,ag as te,ai as oe,aj as le,H as ne,ay as ae,l as C,i as h,c as q,x as U,F as P,j as V,z as k}from"./app-3dad6f25.js";import{F as B}from"./FormDialog-a8a7637b.js";import{h as M}from"./moment-fbc5633a.js";const re={components:{FormDialog:B},props:{show:{type:Boolean,default:!1}},setup(i,{emit:o}){let b=g(!1);const e=g(),u=y({subject:"",date:"",time:"",description:""}),v=y({subject:[{required:!0,message:"Subject Are Required",trigger:"change"}],date:[{required:!0,message:"Reminder Are Required",trigger:"change"}],description:[{required:!0,message:"Description Are Required",trigger:"change"}]}),m=y([{text:"Today",value:new Date},{text:"Tomorrow",value:()=>new Date}]);let c=route("todo.store");return{props:i,formEl:e,emit:o,save:async s=>{await s.validate(async r=>{if(!r)return null;try{const{data:a}=await axios.post(c,{...u,date:M(u.date).format("YYYY-MM-DD")});o("push",addProtos(a,{action:!0,showEdit:!1}))}catch(a){console.error(a),validErorrs(a)}})},form:u,rules:v,busy:b,form:u,shortcuts:m}}};function se(i,o,b,e,u,v){const m=l("el-input"),c=l("el-form-item"),d=l("el-date-picker"),s=l("el-time-select"),r=l("el-form"),a=l("form-dialog");return w(),D(a,{show:e.props.show,"onUpdate:show":o[4]||(o[4]=_=>e.emit("update:show",_)),busy:e.busy,title:"Create ToDo",onAdd:o[5]||(o[5]=_=>e.save(e.formEl))},{default:n(()=>[t(r,{"label-position":"top",ref:"formEl",model:e.form,rules:e.rules},{default:n(()=>[t(c,{label:"Subject"},{default:n(()=>[t(m,{modelValue:e.form.subject,"onUpdate:modelValue":o[0]||(o[0]=_=>e.form.subject=_)},null,8,["modelValue"])]),_:1}),t(c,{label:"Reminder",class:"w-100"},{default:n(()=>[t(d,{modelValue:e.form.date,"onUpdate:modelValue":o[1]||(o[1]=_=>e.form.date=_),type:"date",placeholder:"Select date",shortcuts:e.shortcuts,format:"YYYY-MM-DD"},null,8,["modelValue","shortcuts"])]),_:1}),t(c,{label:"Reminder",class:"w-100"},{default:n(()=>[t(s,{modelValue:e.form.time,"onUpdate:modelValue":o[2]||(o[2]=_=>e.form.time=_),start:"08:30",step:"00:15",end:"18:30",placeholder:"Select time"},null,8,["modelValue"])]),_:1}),t(c,{label:"Description"},{default:n(()=>[t(m,{modelValue:e.form.description,"onUpdate:modelValue":o[3]||(o[3]=_=>e.form.description=_),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","busy"])}const de=R(re,[["render",se]]),ie={components:{FormDialog:B},props:{show:{type:Boolean,default:!1},item:{type:Object,required:!0}},setup(i,{emit:o}){let b=g(!1);const e=g();console.log(i.item);const u=y({description:i.item.description,reminder:i.item.reminder,subject:i.item.subject}),v=y({subject:[{required:!0,message:"Subject Are Required",trigger:"change"}],reminder:[{required:!0,message:"Reminder Are Required",trigger:"change"}],description:[{required:!0,message:"Description Are Required",trigger:"change"}]}),m=y([{text:"Today",value:new Date},{text:"Tomorrow",value:()=>{const s=new Date;return s.setTime(s.getTime()+3600*1e3*24),s}}]);let c=route("todo.update",{todo:i.item.id});return{props:i,formEl:e,emit:o,save:async s=>{await s.validate(async r=>{if(!r)return null;try{const{data:a}=await axios.put(c,u);o("replace",addProtos(a,{action:!0,showEdit:!1}))}catch(a){console.error(a),validErorrs(a)}})},form:u,rules:v,busy:b,form:u,shortcuts:m}}};function ce(i,o,b,e,u,v){const m=l("el-input"),c=l("el-form-item"),d=l("el-date-picker"),s=l("el-form"),r=l("form-dialog");return w(),D(r,{show:e.props.show,"onUpdate:show":o[3]||(o[3]=a=>e.emit("update:show",a)),busy:e.busy,title:"Edit ToDo",onAdd:o[4]||(o[4]=a=>e.save(e.formEl))},{default:n(()=>[t(s,{"label-position":"top",ref:"formEl",model:e.form,rules:e.rules},{default:n(()=>[t(c,{label:"Subject"},{default:n(()=>[t(m,{modelValue:e.form.subject,"onUpdate:modelValue":o[0]||(o[0]=a=>e.form.subject=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"Reminder",class:"w-100"},{default:n(()=>[t(d,{modelValue:e.form.reminder,"onUpdate:modelValue":o[1]||(o[1]=a=>e.form.reminder=a),type:"datetime",placeholder:"Select date and time",shortcuts:e.shortcuts,format:"YYYY-MM-DD HH:mm:ss","input-style":{width:"100%"}},null,8,["modelValue","shortcuts"])]),_:1}),t(c,{label:"Description"},{default:n(()=>[t(m,{modelValue:e.form.description,"onUpdate:modelValue":o[2]||(o[2]=a=>e.form.description=a),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","busy"])}const ue=R(ie,[["render",ce]]),me={components:{appLayoutVue:X,CreateButtonVue:W,PageTitleBox:Z,CreateVue:de,EditVue:ue,Search:$,Delete:ee,More:te,List:oe,Box:le,Collection:ne,EditPen:ae},setup(){const i=g(!1),o=g(!1),b=g(15),e=g([]);return(async()=>{try{const{data:d}=await axios.get(route("todo.index")),s=C.values(C.groupBy(d.data.map(r=>(r.date=M(r.date).format("dddd MMM Do YY"),addProtos(r,{action:!0,showEdit:!1}))),"date")).map(r=>({date:C.head(r).date,count:r.length,items:r}));e.value=s}catch(d){console.error(d)}})(),{showCreate:i,busy:o,perPage:b,push:d=>{const s=d.date,r=e.value.find(a=>a.date==s);r?r.push(d):e.value.push({date:s,coun:1,items:[d]}),e.value.push(d),i.value=!1},replace:(d,s)=>{const r=d.subject,a=d.description;s.subject=r,s.description=a,i.value=!1},remove:async(d,s,r)=>{try{await axios.delete(route("todo.destroy",{todo:r.id})),d.splice(s,1)}catch(a){console.error(a)}},items:e}}},_e={class:"filter-row mt-2"},pe={class:"left-side"},fe={class:"item"},be={class:"right-side"},he={class:"item right"},ge={style:{padding:"15px"}},ve={class:"pr-1"};function we(i,o,b,e,u,v){const m=l("create-button-vue"),c=l("page-title-box"),d=l("el-option"),s=l("collection"),r=l("el-icon"),a=l("el-select"),_=l("search"),S=l("el-input"),A=l("el-divider"),z=l("edit-pen"),T=l("el-button"),F=l("delete"),L=l("edit-vue"),H=l("el-button-group"),j=l("el-descriptions-item"),N=l("el-descriptions"),O=l("el-card"),G=l("el-col"),I=l("el-row"),E=l("el-table-column"),J=l("el-table"),K=l("create-vue"),Q=l("app-layout-vue");return w(),D(Q,{busy:e.busy},{default:n(()=>[h("div",null,[t(c,{title:"To Do List"},{default:n(()=>[t(m,{title:"Add ToDo",onClick:o[0]||(o[0]=p=>e.showCreate=!0)})]),_:1})]),h("div",_e,[h("div",pe,[h("div",fe,[t(a,{modelValue:e.perPage,"onUpdate:modelValue":o[1]||(o[1]=p=>e.perPage=p),placeholder:"Per Page"},{prefix:n(()=>[t(r,{class:"el-input__icon"},{default:n(()=>[t(s)]),_:1})]),default:n(()=>[(w(),q(P,null,U([10,20,30,40,50],p=>t(d,{key:p,label:p,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),h("div",be,[h("div",he,[t(S,{placeholder:"Type something"},{prefix:n(()=>[t(r,{class:"el-input__icon"},{default:n(()=>[t(_)]),_:1})]),_:1})])])]),t(A),t(J,{"default-expand-all":"",data:e.items,style:{width:"100%"}},{default:n(()=>[t(E,{type:"expand"},{default:n(({row:p})=>[h("div",ge,[t(I,{gutter:24},{default:n(()=>[(w(!0),q(P,null,U(p.items,(f,Y)=>(w(),D(G,{sm:24,md:12,key:Y,class:"mb-4"},{default:n(()=>[t(O,null,{default:n(()=>[t(N,{size:"large",direction:"horizontal",column:1,border:""},{extra:n(()=>[h("div",ve,[t(H,null,{default:n(()=>[t(T,{size:"small",type:"info",plain:"",onClick:x=>f.showEdit=!0},{default:n(()=>[t(r,null,{default:n(()=>[t(z)]),_:1}),V(" Edit ")]),_:2},1032,["onClick"]),t(T,{size:"small",type:"danger",plain:"",onClick:x=>e.remove(p.items,Y,f)},{default:n(()=>[t(r,null,{default:n(()=>[t(F)]),_:1}),V(" Delete")]),_:2},1032,["onClick"]),t(L,{show:f.showEdit,"onUpdate:show":x=>f.showEdit=x,item:f,onReplace:x=>e.replace(x,f)},null,8,["show","onUpdate:show","item","onReplace"])]),_:2},1024)])]),default:n(()=>[t(j,{label:"Subject:"},{default:n(()=>[V(k(f.subject),1)]),_:2},1024),t(j,{label:"Riminder Time:"},{default:n(()=>[V(k(f.time),1)]),_:2},1024),t(j,{label:"Description:"},{default:n(()=>[V(k(f.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:1}),t(E,{label:"Date",prop:"date"}),t(E,{label:"Count",prop:"count"})]),_:1},8,["data"]),t(K,{show:e.showCreate,"onUpdate:show":o[2]||(o[2]=p=>e.showCreate=p),onPush:e.push},null,8,["show","onPush"])]),_:1},8,["busy"])}const Ce=R(me,[["render",we]]);export{Ce as default};
