import{C as K}from"./CreateButton-11683f18.js";import{a as Q}from"./app-layout-a73fbad9.js";import{_ as X}from"./PageTitleBox-a22413aa.js";import{_ as Y,r as g,a as y,f as w,h as D,w as n,b as t,e as l,$,V as ee,W as te,Y as oe,Z as le,v as ne,af as re,l as C,i as h,c as q,n as U,F as P,j as x,t as k}from"./app-0d2f6224.js";import{F as B}from"./FormDialog-34c324be.js";import{h as M}from"./moment-fbc5633a.js";const ae={components:{FormDialog:B},props:{show:{type:Boolean,default:!1}},setup(i,{emit:o}){let b=g(!1);const e=g(),u=y({subject:"",date:"",time:"",description:""}),v=y({subject:[{required:!0,message:"Subject Are Required",trigger:"change"}],date:[{required:!0,message:"Reminder Are Required",trigger:"change"}],description:[{required:!0,message:"Description Are Required",trigger:"change"}]}),m=y([{text:"Today",value:new Date},{text:"Tomorrow",value:()=>new Date}]);let c=route("todo.store");return{props:i,formEl:e,emit:o,save:async s=>{await s.validate(async a=>{if(!a)return null;try{const{data:r}=await axios.post(c,{...u,date:M(u.date).format("YYYY-MM-DD")});o("push",addProtos(r,{action:!0,showEdit:!1}))}catch(r){console.error(r),validErorrs(r)}})},form:u,rules:v,busy:b,form:u,shortcuts:m}}};function se(i,o,b,e,u,v){const m=l("el-input"),c=l("el-form-item"),d=l("el-date-picker"),s=l("el-time-select"),a=l("el-form"),r=l("form-dialog");return w(),D(r,{show:e.props.show,"onUpdate:show":o[4]||(o[4]=_=>e.emit("update:show",_)),busy:e.busy,title:"Create ToDo",onAdd:o[5]||(o[5]=_=>e.save(e.formEl))},{default:n(()=>[t(a,{"label-position":"top",ref:"formEl",model:e.form,rules:e.rules},{default:n(()=>[t(c,{label:"Subject"},{default:n(()=>[t(m,{modelValue:e.form.subject,"onUpdate:modelValue":o[0]||(o[0]=_=>e.form.subject=_)},null,8,["modelValue"])]),_:1}),t(c,{label:"Reminder",class:"w-100"},{default:n(()=>[t(d,{modelValue:e.form.date,"onUpdate:modelValue":o[1]||(o[1]=_=>e.form.date=_),type:"date",placeholder:"Select date",shortcuts:e.shortcuts,format:"YYYY-MM-DD"},null,8,["modelValue","shortcuts"])]),_:1}),t(c,{label:"Reminder",class:"w-100"},{default:n(()=>[t(s,{modelValue:e.form.time,"onUpdate:modelValue":o[2]||(o[2]=_=>e.form.time=_),start:"08:30",step:"00:15",end:"18:30",placeholder:"Select time"},null,8,["modelValue"])]),_:1}),t(c,{label:"Description"},{default:n(()=>[t(m,{modelValue:e.form.description,"onUpdate:modelValue":o[3]||(o[3]=_=>e.form.description=_),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","busy"])}const de=Y(ae,[["render",se]]),ie={components:{FormDialog:B},props:{show:{type:Boolean,default:!1},item:{type:Object,required:!0}},setup(i,{emit:o}){let b=g(!1);const e=g();console.log(i.item);const u=y({description:i.item.description,reminder:i.item.reminder,subject:i.item.subject}),v=y({subject:[{required:!0,message:"Subject Are Required",trigger:"change"}],reminder:[{required:!0,message:"Reminder Are Required",trigger:"change"}],description:[{required:!0,message:"Description Are Required",trigger:"change"}]}),m=y([{text:"Today",value:new Date},{text:"Tomorrow",value:()=>{const s=new Date;return s.setTime(s.getTime()+3600*1e3*24),s}}]);let c=route("todo.update",{todo:i.item.id});return{props:i,formEl:e,emit:o,save:async s=>{await s.validate(async a=>{if(!a)return null;try{const{data:r}=await axios.put(c,u);o("replace",addProtos(r,{action:!0,showEdit:!1}))}catch(r){console.error(r),validErorrs(r)}})},form:u,rules:v,busy:b,form:u,shortcuts:m}}};function ce(i,o,b,e,u,v){const m=l("el-input"),c=l("el-form-item"),d=l("el-date-picker"),s=l("el-form"),a=l("form-dialog");return w(),D(a,{show:e.props.show,"onUpdate:show":o[3]||(o[3]=r=>e.emit("update:show",r)),busy:e.busy,title:"Edit ToDo",onAdd:o[4]||(o[4]=r=>e.save(e.formEl))},{default:n(()=>[t(s,{"label-position":"top",ref:"formEl",model:e.form,rules:e.rules},{default:n(()=>[t(c,{label:"Subject"},{default:n(()=>[t(m,{modelValue:e.form.subject,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.subject=r)},null,8,["modelValue"])]),_:1}),t(c,{label:"Reminder",class:"w-100"},{default:n(()=>[t(d,{modelValue:e.form.reminder,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.reminder=r),type:"datetime",placeholder:"Select date and time",shortcuts:e.shortcuts,format:"YYYY-MM-DD HH:mm:ss","input-style":{width:"100%"}},null,8,["modelValue","shortcuts"])]),_:1}),t(c,{label:"Description"},{default:n(()=>[t(m,{modelValue:e.form.description,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.description=r),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","busy"])}const ue=Y(ie,[["render",ce]]),me={components:{appLayoutVue:Q,CreateButtonVue:K,PageTitleBox:X,CreateVue:de,EditVue:ue,Search:$,Delete:ee,More:te,List:oe,Box:le,Collection:ne,EditPen:re},setup(){const i=g(!1),o=g(!1),b=g(15),e=g([]);return(async()=>{try{const{data:d}=await axios.get(route("todo.index")),s=C.values(C.groupBy(d.data.map(a=>(a.date=M(a.date).format("dddd MMM Do YY"),addProtos(a,{action:!0,showEdit:!1}))),"date")).map(a=>({date:C.head(a).date,count:a.length,items:a}));e.value=s}catch(d){console.error(d)}})(),{showCreate:i,busy:o,perPage:b,push:d=>{const s=d.date,a=e.value.find(r=>r.date==s);a?a.push(d):e.value.push({date:s,coun:1,items:[d]}),e.value.push(d),i.value=!1},replace:(d,s)=>{const a=d.subject,r=d.description;s.subject=a,s.description=r,i.value=!1},remove:async(d,s,a)=>{try{await axios.delete(route("todo.destroy",{todo:a.id})),d.splice(s,1)}catch(r){console.error(r)}},items:e}}},_e={class:"filter-row mt-2"},pe={class:"left-side"},fe={class:"item"},be={class:"right-side"},he={class:"item right"},ge={style:{padding:"15px"}},ve={class:"pr-1"};function we(i,o,b,e,u,v){const m=l("create-button-vue"),c=l("page-title-box"),d=l("el-option"),s=l("collection"),a=l("el-icon"),r=l("el-select"),_=l("search"),S=l("el-input"),A=l("el-divider"),z=l("edit-pen"),R=l("el-button"),F=l("delete"),L=l("edit-vue"),N=l("el-button-group"),j=l("el-descriptions-item"),H=l("el-descriptions"),O=l("el-card"),W=l("el-col"),Z=l("el-row"),E=l("el-table-column"),G=l("el-table"),I=l("create-vue"),J=l("app-layout-vue");return w(),D(J,{busy:e.busy},{default:n(()=>[h("div",null,[t(c,{title:"To Do List"},{default:n(()=>[t(m,{title:"Add ToDo",onClick:o[0]||(o[0]=p=>e.showCreate=!0)})]),_:1})]),h("div",_e,[h("div",pe,[h("div",fe,[t(r,{modelValue:e.perPage,"onUpdate:modelValue":o[1]||(o[1]=p=>e.perPage=p),placeholder:"Per Page"},{prefix:n(()=>[t(a,{class:"el-input__icon"},{default:n(()=>[t(s)]),_:1})]),default:n(()=>[(w(),q(P,null,U([10,20,30,40,50],p=>t(d,{key:p,label:p,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),h("div",be,[h("div",he,[t(S,{placeholder:"Type something"},{prefix:n(()=>[t(a,{class:"el-input__icon"},{default:n(()=>[t(_)]),_:1})]),_:1})])])]),t(A),t(G,{"default-expand-all":"",data:e.items,style:{width:"100%"}},{default:n(()=>[t(E,{type:"expand"},{default:n(({row:p})=>[h("div",ge,[t(Z,{gutter:24},{default:n(()=>[(w(!0),q(P,null,U(p.items,(f,T)=>(w(),D(W,{sm:24,md:12,key:T,class:"mb-4"},{default:n(()=>[t(O,null,{default:n(()=>[t(H,{size:"large",direction:"horizontal",column:1,border:""},{extra:n(()=>[h("div",ve,[t(N,null,{default:n(()=>[t(R,{size:"small",type:"info",plain:"",onClick:V=>f.showEdit=!0},{default:n(()=>[t(a,null,{default:n(()=>[t(z)]),_:1}),x(" Edit ")]),_:2},1032,["onClick"]),t(R,{size:"small",type:"danger",plain:"",onClick:V=>e.remove(p.items,T,f)},{default:n(()=>[t(a,null,{default:n(()=>[t(F)]),_:1}),x(" Delete")]),_:2},1032,["onClick"]),t(L,{show:f.showEdit,"onUpdate:show":V=>f.showEdit=V,item:f,onReplace:V=>e.replace(V,f)},null,8,["show","onUpdate:show","item","onReplace"])]),_:2},1024)])]),default:n(()=>[t(j,{label:"Subject:"},{default:n(()=>[x(k(f.subject),1)]),_:2},1024),t(j,{label:"Riminder Time:"},{default:n(()=>[x(k(f.time),1)]),_:2},1024),t(j,{label:"Description:"},{default:n(()=>[x(k(f.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)])]),_:1}),t(E,{label:"Date",prop:"date"}),t(E,{label:"Count",prop:"count"})]),_:1},8,["data"]),t(I,{show:e.showCreate,"onUpdate:show":o[2]||(o[2]=p=>e.showCreate=p),onPush:e.push},null,8,["show","onPush"])]),_:1},8,["busy"])}const Ce=Y(me,[["render",we]]);export{Ce as default};
