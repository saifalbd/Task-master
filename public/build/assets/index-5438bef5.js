import{a as P,S as j}from"./app-layout-2f5ccb75.js";import{_ as z}from"./PageTitleBox-3fa34230.js";import{_ as D,aj as L,Z as T,ah as F,r as m,h as N,w as l,e as s,f as v,i as t,b as e,j as g,c as x,n as E,F as q,u as M,t as i,p as R,q as U}from"./app-8ae3c754.js";const Z={components:{AppLayout:P,PageTitleBox:z,StatusBtn:j,StarFilled:L,Expand:T,Download:F},setup(){const r=M(),c=m(!0),p=m([]),n=m([]),f=m(10),y=o=>{r.push(o)};return(async()=>{try{const o=route("my.task.index"),{data:d}=await axios.get(o);p.value=d.data,n.value=d.links}catch(o){console.error(o)}c.value=!1})(),{items:p,links:n,perPage:f,busy:c,go:y,doArchive:(o,d)=>{p.value.splice(d,1),axios.post(route("task.doArchive",{task:o.id}),{prop:"employee_archive",do:o.employee_archive?0:1})},addStar:o=>{const{employee_star:d}=o;o.employee_star=!d,axios.post(route("task.changeStar",{task:o.id}),{prop:"employee_star",star:d?0:1})}}}},$=r=>(R("data-v-b9d609a3"),r=r(),U(),r),G={class:"row mt-4"},H={class:"flex md6"},J={class:"item"},K={class:"flex lg6"},O={class:"item right"},Q={class:"va-table-responsive"},W={class:"va-table"},X=$(()=>t("thead",null,[t("tr",null,[t("th",null,"Star"),t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Category"),t("th",null,"Assigner"),t("th",null,"Start"),t("th",null,"DeadLine"),t("th",null,"Status"),t("th",null,"Show")])],-1));function Y(r,c,p,n,f,y){const h=s("download"),_=s("el-icon"),u=s("el-button"),o=s("page-title-box"),d=s("va-select"),k=s("va-icon"),S=s("va-input"),w=s("star-filled"),C=s("status-btn"),A=s("expand"),I=s("el-button-group"),V=s("app-layout");return v(),N(V,{busy:n.busy},{default:l(()=>[t("div",null,[e(o,{title:"My Task (jobs)"},{default:l(()=>[e(u,{type:"primary",onClick:c[0]||(c[0]=a=>n.go({name:"job.task.archive"}))},{default:l(()=>[e(_,null,{default:l(()=>[e(h)]),_:1}),g(" Archives ")]),_:1})]),_:1})]),t("div",G,[t("div",H,[t("div",J,[e(d,{class:"flex mb-2 md6",label:"Per Page",modelValue:n.perPage,"onUpdate:modelValue":c[1]||(c[1]=a=>n.perPage=a),options:[10,20,30,40,50]},null,8,["modelValue"])])]),t("div",K,[t("div",O,[e(S,{class:"flex mb-2 md6",label:"Search"},{prepend:l(()=>[e(k,{class:"material-icons"},{default:l(()=>[g("search")]),_:1})]),_:1})])])]),t("div",Q,[t("table",W,[X,t("tbody",null,[(v(!0),x(q,null,E(n.items,(a,B)=>(v(),x("tr",{key:a.id},[t("td",null,[e(u,{onClick:b=>n.addStar(a),size:"small",type:a.employee_star?"warning":"",plain:"",round:""},{default:l(()=>[e(_,null,{default:l(()=>[e(w)]),_:1})]),_:2},1032,["onClick","type"])]),t("td",null,i(a.id),1),t("td",null,i(a.title),1),t("td",null,i(a.category.title),1),t("td",null,i(a.assigner.name),1),t("td",null,i(a.start),1),t("td",null,i(a.end),1),t("td",null,[e(C,{status:a.status,size:"small"},null,8,["status"])]),t("td",null,[e(I,null,{default:l(()=>[e(u,{type:"primary",size:"small",title:"Archive",onClick:b=>n.doArchive(a,B)},{default:l(()=>[e(_,null,{default:l(()=>[e(h)]),_:1})]),_:2},1032,["onClick"]),e(u,{type:"primary",size:"small",onClick:b=>n.go({name:"job.task.show",params:{id:a.id}}),title:"Show"},{default:l(()=>[e(_,null,{default:l(()=>[e(A)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])])])]),_:1},8,["busy"])}const ot=D(Z,[["render",Y],["__scopeId","data-v-b9d609a3"]]);export{ot as default};
