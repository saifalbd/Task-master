import{F as D}from"./FormDialog-3370bb78.js";import{r as H}from"./index-dc654618.js";import{h}from"./moment-fbc5633a.js";import{_ as F,r as s,Z as A,f as w,h as N,w as b,b as n,i as r,j as S,z as q,c as z,B as L,e as d}from"./app-fc468544.js";const Q={components:{FormDialog:D},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},taskTypes:{type:Array,required:!0}},setup(V,{emit:t}){let k=s(!1);const e=s(!1),T=s(null);let y=s(""),i=s(null),m=s(null);const f=s(h().format(dateFormat)),v=s(h().add(1,"day").format(dateFormat)),u=s(null),_=s(new Date),g=a=>{var p;return(p=a==null?void 0:a.toLocaleTimeString)==null?void 0:p.call(a)},c=s(""),o=s([]);A(()=>V.taskTypes,a=>{let p=a.find(x=>x.is_default);p&&(u.value=p.id)},{deep:!0});const C=()=>{let a=h(_.value);return h().hour()!=a.hour()?a.format("h:mm"):""};return{props:V,form:T,emit:t,save:async()=>{var x;let a=route("task.store");if(!await T.value.validate())return null;e.value=!0;try{const l=new FormData;l.append("title",y.value),l.append("category",i.value),l.append("employee",(x=m.value)==null?void 0:x.id),l.append("start",f.value),l.append("end",v.value),l.append("endTime",C()),l.append("taskType",u.value),l.append("description",c.value),o.value.forEach((E,B)=>{l.append(`attachments[${B}]`,E)});const{data:U}=await axios.post(a,l);y.value="",c.value="",t("push",addProtos(U,{action:!0,showEdit:!1}))}catch(l){console.error(l),validErorrs(l)}e.value=!1},rs:H,busy:k,formBusy:e,taskType:u,timeFormat:g,title:y,start:f,end:v,endTime:_,employee:m,category:i,description:c,attachments:o}}},j={class:"layout gutter--md"},P={class:"row align-content--center"},Z={class:"flex xs12 in-box"},G={class:"flex xs12 in-box"},I={class:"flex xs12 in-box"},J={class:"flex xs12 in-box"},K={class:"flex xs4 in-box"},M={class:"flex xs4 in-box"},O={class:"flex xs4 in-box"},R={class:"flex xs12 in-box"},W={key:0,class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function X(V,t,k,e,T,y){const i=d("va-input"),m=d("va-select"),f=d("va-chip"),v=d("va-time-input"),u=d("va-file-upload"),_=d("QuillEditor"),g=d("va-form"),c=d("form-dialog");return w(),N(c,{show:e.props.show,"onUpdate:show":t[9]||(t[9]=o=>e.emit("update:show",o)),busy:e.formBusy,title:"Create Task",onAdd:e.save,fullscreen:!0},{default:b(()=>[n(g,{ref:"form"},{default:b(()=>[r("div",j,[r("div",P,[r("div",Z,[n(i,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.title=o),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),r("div",G,[n(m,{modelValue:e.taskType,"onUpdate:modelValue":t[1]||(t[1]=o=>e.taskType=o),label:"Task Type",placeholder:"Type Here","text-by":"title","value-by":"id",searchable:"",options:e.props.taskTypes},null,8,["modelValue","options"])]),r("div",I,[n(m,{modelValue:e.category,"onUpdate:modelValue":t[2]||(t[2]=o=>e.category=o),label:"Task Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",searchable:"",options:e.props.categories},null,8,["modelValue","rules","options"])]),r("div",J,[n(m,{modelValue:e.employee,"onUpdate:modelValue":t[3]||(t[3]=o=>e.employee=o),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:b(({value:o})=>[n(f,{size:"small",class:"mr-1 my-1"},{default:b(()=>[S(q(o.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),r("div",K,[n(i,{modelValue:e.start,"onUpdate:modelValue":t[4]||(t[4]=o=>e.start=o),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),r("div",M,[n(i,{modelValue:e.end,"onUpdate:modelValue":t[5]||(t[5]=o=>e.end=o),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),r("div",O,[n(v,{label:"End Time",modelValue:e.endTime,"onUpdate:modelValue":t[6]||(t[6]=o=>e.endTime=o)},null,8,["modelValue"])]),r("div",R,[n(u,{modelValue:e.attachments,"onUpdate:modelValue":t[7]||(t[7]=o=>e.attachments=o),dropzone:""},null,8,["modelValue"])]),e.props.show?(w(),z("div",W,[n(_,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[8]||(t[8]=o=>e.description=o),placeholder:"Description Html Contant"},null,8,["content"])])):L("",!0)])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const le=F(Q,[["render",X]]);export{le as C};
