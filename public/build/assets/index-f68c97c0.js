import{A as F,_ as L}from"./PageTitleBox-04038783.js";import{P as R}from"./Pagination-58a54463.js";import{R as z}from"./RemoveEditButton-5f8dfccb.js";import{F as H,r as S,u as O}from"./index-d08628c3.js";import{h as D}from"./moment-fbc5633a.js";import{_ as B,r as a,o as U,g as P,h as p,j as l,a as r,b as T,t as A,i as s,C as q,u as j,E as Q,G as N,c as I,k as G,F as J}from"./app-e8ae732e.js";import{C as K}from"./CreateButton-6a890189.js";import{S as M}from"./statusBtn-765905d4.js";const W={components:{FormDialog:H},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0}},setup(x,{emit:t}){let V=a(!1);const e=a(null);let b=a(""),f=a(null),d=a(null);const u=a(D().format(dateFormat)),_=a(null),v=a(""),y=a([]);return{props:x,form:e,emit:t,save:async()=>{var k;let g=route("task.store");if(!await e.value.validate())return null;try{const n=new FormData;n.append("title",b.value),n.append("category",f.value),n.append("employee",(k=d.value)==null?void 0:k.id),n.append("start",u.value),n.append("end",_.value),n.append("description",v.value),y.value.forEach((m,w)=>{n.append(`attachments[${w}]`,m)});const{data:c}=await axios.post(g,n);t("push",addProtos(c,{action:!0,showEdit:!1}))}catch(n){console.error(n),validErorrs(n)}},rs:S,busy:V,title:b,start:u,end:_,employee:d,category:f,description:v,attachments:y}}},X={class:"layout gutter--md"},Y={class:"row align-content--center"},Z={class:"flex xs12 in-box"},$={class:"flex xs12 in-box"},ee={class:"flex xs12 in-box"},te={class:"flex xs6 in-box"},oe={class:"flex xs6 in-box"},le={class:"flex xs12 in-box"},ae={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function se(x,t,V,e,b,f){const d=s("va-input"),u=s("va-select"),_=s("va-chip"),v=s("va-file-upload"),y=s("QuillEditor"),h=s("va-form"),g=s("form-dialog");return U(),P(g,{show:e.props.show,"onUpdate:show":t[7]||(t[7]=o=>e.emit("update:show",o)),busy:e.busy,title:"Create Task",onAdd:e.save,fullscreen:!0},{default:p(()=>[l(h,{ref:"form"},{default:p(()=>[r("div",X,[r("div",Y,[r("div",Z,[l(d,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.title=o),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),r("div",$,[l(u,{modelValue:e.category,"onUpdate:modelValue":t[1]||(t[1]=o=>e.category=o),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),r("div",ee,[l(u,{modelValue:e.employee,"onUpdate:modelValue":t[2]||(t[2]=o=>e.employee=o),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:p(({value:o})=>[l(_,{size:"small",class:"mr-1 my-1"},{default:p(()=>[T(A(o.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),r("div",te,[l(d,{modelValue:e.start,"onUpdate:modelValue":t[3]||(t[3]=o=>e.start=o),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),r("div",oe,[l(d,{modelValue:e.end,"onUpdate:modelValue":t[4]||(t[4]=o=>e.end=o),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),r("div",le,[l(v,{modelValue:e.attachments,"onUpdate:modelValue":t[5]||(t[5]=o=>e.attachments=o),dropzone:""},null,8,["modelValue"])]),r("div",ae,[l(y,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[6]||(t[6]=o=>e.description=o),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const ne=B(W,[["render",se]]),re={components:{FormDialog:H},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},item:{type:Object,required:!0}},setup(x,{emit:t}){let V=a(null),e=a(!1);const b=a(null);let f=a(""),d=a(null),u=a(null);const _=a(D().format(dateFormat)),v=a(null),y=a(""),h=a([]);return q(x.item,o=>{f.value=o.title,u.value=o.employee,d.value=o.category_id,_.value=o.start,v.value=o.end,y.value=o.description,V.value=o},{immediate:!0}),{props:x,form:b,emit:t,save:async()=>{var c;let o=route("task.update",{task:V.value.id});if(!await b.value.validate())return null;const n=new FormData;n.append("_method","PUT"),n.append("title",f.value),n.append("category",d.value),n.append("employee",(c=u.value)==null?void 0:c.id),n.append("start",_.value),n.append("end",v.value),n.append("description",y.value),h.value.forEach((m,w)=>{n.append(`attachments[${w}]`,m)});try{const{data:m}=await axios.post(o,n);t("replace",addProtos(m,{action:!0,showEdit:!1}))}catch(m){console.error(m),validErorrs(m)}},rs:S,busy:e,title:f,start:_,end:v,employee:u,category:d,description:y,attachments:h}}},ie={class:"layout gutter--md"},de={class:"row align-content--center"},ce={class:"flex xs12 in-box"},me={class:"flex xs12 in-box"},ue={class:"flex xs12 in-box"},pe={class:"flex xs6 in-box"},_e={class:"flex xs6 in-box"},ve={class:"flex xs12 in-box"},ye={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function fe(x,t,V,e,b,f){const d=s("va-input"),u=s("va-select"),_=s("va-chip"),v=s("va-file-upload"),y=s("QuillEditor"),h=s("va-form"),g=s("form-dialog");return U(),P(g,{show:e.props.show,"onUpdate:show":t[7]||(t[7]=o=>e.emit("update:show",o)),busy:e.busy,title:"Edit Task",onAdd:e.save,fullscreen:!0},{default:p(()=>[l(h,{ref:"form"},{default:p(()=>[r("div",ie,[r("div",de,[r("div",ce,[l(d,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.title=o),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),r("div",me,[l(u,{modelValue:e.category,"onUpdate:modelValue":t[1]||(t[1]=o=>e.category=o),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),r("div",ue,[l(u,{modelValue:e.employee,"onUpdate:modelValue":t[2]||(t[2]=o=>e.employee=o),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:p(({value:o})=>[l(_,{size:"small",class:"mr-1 my-1"},{default:p(()=>[T(A(o.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),r("div",pe,[l(d,{modelValue:e.start,"onUpdate:modelValue":t[3]||(t[3]=o=>e.start=o),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),r("div",_e,[l(d,{modelValue:e.end,"onUpdate:modelValue":t[4]||(t[4]=o=>e.end=o),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),r("div",ve,[l(v,{modelValue:e.attachments,"onUpdate:modelValue":t[5]||(t[5]=o=>e.attachments=o),dropzone:""},null,8,["modelValue"])]),r("div",ye,[l(y,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[6]||(t[6]=o=>e.description=o),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const be=B(re,[["render",fe]]);const he={components:{AppLayout:F,PageTitleBox:L,Pagination:R,Create:ne,Edit:be,CreateButton:K,RemoveEditButton:z,StatusBtn:M},setup(){const x=a(!0),t=O(),V=j(),e=a([]),b=a([]),f=a([]),d=a(!1),u=a([]),_=a(10),v=a("title"),y=[{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"title",sortable:!0},{key:"category.title",label:"Category",sortable:!0},{key:"employee.name",label:"Employee",sortable:!0},{key:"start",label:"Start",sortable:!0},{key:"end",label:"Dead Line",sortable:!0},{key:"status",sortable:!0},{key:"action",thAlign:"right",tdAlign:"right"}],h=a("asc");axios.get(route("employee.index",{all:!0})).then(({data:c})=>b.value=c),axios.get(route("category.index",{all:!0})).then(({data:c})=>f.value=c);const g=async c=>{try{const m=route("task.index",{perPage:_.value,page:c}),{data:w}=await axios.get(m);u.value=w.links,e.value=addProtos(w.data,{action:!0,showEdit:!1})}catch(m){console.error(m)}x.value=!1};return g(1),{busy:x,showCreate:d,perPage:_,sortingOrder:h,items:e,columns:y,sortBy:v,push:c=>{d.value=!1,e.value.push(c)},replace:(c,m)=>{d.value=!1,e.value.splice(m,1,c)},fetchItems:g,employees:b,categories:f,remove:async(c,m)=>{if(!await Q(c,"Task","title"))return null;try{const i=route("task.destroy",{task:c.id});await axios.delete(i),e.value.splice(m,1),N(t)}catch(i){console.log(i)}},links:u,router:V}}},ge={class:"row mt-4"},xe={class:"flex md6"},Ve={class:"item"},we={class:"flex lg6"},ke={class:"item right"};function Ce(x,t,V,e,b,f){const d=s("create-button"),u=s("page-title-box"),_=s("va-select"),v=s("va-icon"),y=s("va-input"),h=s("va-chip"),g=s("status-btn"),o=s("edit"),k=s("remove-edit-button"),n=s("va-data-table"),c=s("pagination"),m=s("create"),w=s("app-layout");return U(),P(w,{busy:e.busy},{default:p(()=>[r("div",null,[l(u,{title:"Task"},{default:p(()=>[l(d,{title:"Add Task",onClick:t[0]||(t[0]=i=>e.showCreate=!0)})]),_:1})]),r("div",ge,[r("div",xe,[r("div",Ve,[l(_,{class:"flex mb-2 md6",label:"Per Page",modelValue:e.perPage,"onUpdate:modelValue":t[1]||(t[1]=i=>e.perPage=i),options:[10,20,30,40,50]},null,8,["modelValue"])])]),r("div",we,[r("div",ke,[l(y,{class:"flex mb-2 md6",label:"Search"},{prepend:p(()=>[l(v,{class:"material-icons"},{default:p(()=>[T("search")]),_:1})]),_:1})])])]),l(n,{items:e.items,columns:e.columns,hoverable:!0,"sort-by":e.sortBy,"onUpdate:sortBy":t[2]||(t[2]=i=>e.sortBy=i),"sorting-order":e.sortingOrder,"onUpdate:sortingOrder":t[3]||(t[3]=i=>e.sortingOrder=i)},{"cell(members)":p(({rowData:i})=>[(U(!0),I(J,null,G(i.members,E=>(U(),P(h,{size:"small",key:E.id},{default:p(()=>[T(A(E.name),1)]),_:2},1024))),128))]),"cell(status)":p(({value:i})=>[l(g,{status:i,size:"small"},null,8,["status"])]),"cell(action)":p(({rowData:i,rowIndex:E})=>[l(k,{isView:!0,onViewClick:C=>e.router.push({name:"task.show",params:{id:i.id}}),onEditClick:C=>i.showEdit=!0,onRemoveClick:C=>e.remove(i,E)},{default:p(()=>[l(o,{show:i.showEdit,"onUpdate:show":C=>i.showEdit=C,item:i,employees:e.employees,categories:e.categories,onReplace:C=>e.replace(C,E)},null,8,["show","onUpdate:show","item","employees","categories","onReplace"])]),_:2},1032,["onViewClick","onEditClick","onRemoveClick"])]),_:1},8,["items","columns","sort-by","sorting-order"]),l(c,{links:e.links,onPage:e.fetchItems},null,8,["links","onPage"]),l(m,{show:e.showCreate,"onUpdate:show":t[4]||(t[4]=i=>e.showCreate=i),employees:e.employees,categories:e.categories,onPush:e.push},null,8,["show","employees","categories","onPush"])]),_:1},8,["busy"])}const De=B(he,[["render",Ce],["__scopeId","data-v-85f8b26d"]]);export{De as default};
