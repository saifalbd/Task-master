import{a as N}from"./app-layout-62a20c1a.js";import{_ as P}from"./PageTitleBox-34f8655b.js";import{B as z}from"./BackButton-896ced05.js";import{_ as j,r as a,t as D,h as F,w as m,e as i,f as Q,i as r,b as n,j as H,z as q,u as A}from"./app-fc468544.js";import{r as R}from"./index-dc654618.js";import{h as E}from"./moment-fbc5633a.js";const G={components:{AppLayout:N,PageTitleBox:P,BackButton:z},props:{id:{type:[String,Number],required:!0}},setup(g,{emit:o}){const U=A(),e=a([]),k=a([]),w=a([]);let b=a("Edit"),h=a(!0);const c=a(null);let d=a("");const u=a(null);let p=a(null),_=a(null);const v=a(E().format(dateFormat)),y=a(null),V=a(new Date),x=a(""),T=a([]);axios.get(route("taskType.index")).then(({data:s})=>{w.value=s}),D("employees",s=>{e.value=s}),D("categories",s=>{k.value=s}),(async()=>{try{const s=route("task.show",{task:g.id}),{data:B}=await axios.get(s);let t=B;b.value=`Edit Taks (${t.title})`,d.value=t.title,_.value={id:t.employee.id,name:t.employee.model.name},p.value=t.category_id,v.value=t.start,y.value=t.end,x.value=t.description,u.value=t.type_id,h.value=!1}catch(s){console.error(s)}})();const S=()=>{let s=E(V.value);return E().hour()!=s.hour()?s.format("h:mm"):""};return{form:c,editTitle:b,emit:o,save:async()=>{var C;let s=route("task.update",{task:g.id});if(!await c.value.validate())return null;const t=new FormData;t.append("_method","PUT"),t.append("title",d.value),t.append("category",p.value),t.append("employee",(C=_.value)==null?void 0:C.id),t.append("start",v.value),t.append("end",y.value),t.append("endTime",S()),t.append("taskType",u.value),t.append("description",x.value),T.value.forEach((f,L)=>{t.append(`attachments[${L}]`,f)});try{const{data:f}=await axios.post(s,t);U.push({name:"task"})}catch(f){console.error(f),validErorrs(f)}},rs:R,busy:h,taskTypes:w,categories:k,employees:e,taskType:u,title:d,start:v,end:y,endTime:V,employee:_,category:p,description:x,attachments:T}}},I={class:"layout gutter--md"},J={class:"row align-content--center"},K={class:"flex xs12 in-box"},M={class:"flex xs12 in-box"},O={class:"flex xs12 in-box"},W={class:"flex xs12 in-box"},X={class:"flex xs4 in-box"},Y={class:"flex xs4 in-box"},Z={class:"flex xs4 in-box"},$={class:"flex xs12 in-box"},ee={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}},te={class:"flex xs12 in-box",style:{"text-align":"right"}};function oe(g,o,U,e,k,w){const b=i("back-button"),h=i("page-title-box"),c=i("va-input"),d=i("va-select"),u=i("va-chip"),p=i("va-time-input"),_=i("va-file-upload"),v=i("QuillEditor"),y=i("va-button"),V=i("va-form"),x=i("el-card"),T=i("app-layout");return Q(),F(T,{busy:e.busy},{default:m(()=>[r("div",null,[n(h,{title:e.editTitle},{default:m(()=>[n(b)]),_:1},8,["title"])]),n(x,{class:"box-card"},{default:m(()=>[n(V,{ref:"form"},{default:m(()=>[r("div",I,[r("div",J,[r("div",K,[n(c,{modelValue:e.title,"onUpdate:modelValue":o[0]||(o[0]=l=>e.title=l),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),r("div",M,[n(d,{modelValue:e.taskType,"onUpdate:modelValue":o[1]||(o[1]=l=>e.taskType=l),label:"Task Type",placeholder:"Type Here","text-by":"title","value-by":"id",searchable:"",options:e.taskTypes},null,8,["modelValue","options"])]),r("div",O,[n(d,{modelValue:e.category,"onUpdate:modelValue":o[2]||(o[2]=l=>e.category=l),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",searchable:"",options:e.categories},null,8,["modelValue","rules","options"])]),r("div",W,[n(d,{modelValue:e.employee,"onUpdate:modelValue":o[3]||(o[3]=l=>e.employee=l),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.employees},{content:m(({value:l})=>[n(u,{size:"small",class:"mr-1 my-1"},{default:m(()=>[H(q(l.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),r("div",X,[n(c,{modelValue:e.start,"onUpdate:modelValue":o[4]||(o[4]=l=>e.start=l),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),r("div",Y,[n(c,{modelValue:e.end,"onUpdate:modelValue":o[5]||(o[5]=l=>e.end=l),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),r("div",Z,[n(p,{label:"End Time",modelValue:e.endTime,"onUpdate:modelValue":o[6]||(o[6]=l=>e.endTime=l)},null,8,["modelValue"])]),r("div",$,[n(_,{modelValue:e.attachments,"onUpdate:modelValue":o[7]||(o[7]=l=>e.attachments=l),dropzone:""},null,8,["modelValue"])]),r("div",ee,[n(v,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":o[8]||(o[8]=l=>e.description=l),placeholder:"Description Html Contant"},null,8,["content"])]),r("div",te,[n(y,{onClick:e.save},{default:m(()=>[H(" Save ")]),_:1},8,["onClick"])])])])]),_:1},512)]),_:1})]),_:1},8,["busy"])}const me=j(G,[["render",oe]]);export{me as default};
