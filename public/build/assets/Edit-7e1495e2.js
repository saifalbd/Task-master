import{F as k}from"./FormDialog-7d1a2045.js";import{r as E}from"./index-a5a6905c.js";import{h as U}from"./moment-fbc5633a.js";import{_ as D,r as o,Y as H,f as C,h as A,w as b,b as n,i as s,j as q,z as B,e as d}from"./app-69e9ea5d.js";const F={components:{FormDialog:k},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},taskTypes:{type:Array,required:!0},item:{type:Object,required:!0}},setup(V,{emit:t}){let h=o(null),e=o(!1);const T=o(null);let _=o("");const m=o(null);let i=o(null),u=o(null);const c=o(U().format(dateFormat)),v=o(null),f=o(new Date),y=o(""),x=o([]);return H(V.item,r=>{_.value=r.title,u.value=r.employee,i.value=r.category_id,c.value=r.start,v.value=r.end,y.value=r.description,h.value=r},{immediate:!0}),{props:V,form:T,emit:t,save:async()=>{var g;let r=route("task.update",{task:h.value.id});if(!await T.value.validate())return null;const a=new FormData;a.append("_method","PUT"),a.append("title",_.value),a.append("category",i.value),a.append("employee",(g=u.value)==null?void 0:g.id),a.append("start",c.value),a.append("end",v.value),a.append("endTime",f.value),a.append("taskType",m.value),a.append("description",y.value),x.value.forEach((p,w)=>{a.append(`attachments[${w}]`,p)});try{const{data:p}=await axios.post(r,a);t("replace",addProtos(p,{action:!0,showEdit:!1}))}catch(p){console.error(p),validErorrs(p)}},rs:E,busy:e,taskType:m,title:_,start:c,end:v,endTime:f,employee:u,category:i,description:y,attachments:x}}},j={class:"layout gutter--md"},z={class:"row align-content--center"},N={class:"flex xs12 in-box"},P={class:"flex xs12 in-box"},S={class:"flex xs12 in-box"},L={class:"flex xs12 in-box"},Q={class:"flex xs4 in-box"},O={class:"flex xs4 in-box"},Y={class:"flex xs4 in-box"},G={class:"flex xs12 in-box"},I={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function J(V,t,h,e,T,_){const m=d("va-input"),i=d("va-select"),u=d("va-chip"),c=d("va-time-input"),v=d("va-file-upload"),f=d("QuillEditor"),y=d("va-form"),x=d("form-dialog");return C(),A(x,{show:e.props.show,"onUpdate:show":t[9]||(t[9]=l=>e.emit("update:show",l)),busy:e.busy,title:"Edit Task",onAdd:e.save,fullscreen:!0},{default:b(()=>[n(y,{ref:"form"},{default:b(()=>[s("div",j,[s("div",z,[s("div",N,[n(m,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.title=l),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),s("div",P,[n(i,{modelValue:e.taskType,"onUpdate:modelValue":t[1]||(t[1]=l=>e.taskType=l),label:"Task Type",placeholder:"Type Here","text-by":"title","value-by":"id",searchable:"",options:e.props.taskTypes},null,8,["modelValue","options"])]),s("div",S,[n(i,{modelValue:e.category,"onUpdate:modelValue":t[2]||(t[2]=l=>e.category=l),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",searchable:"",options:e.props.categories},null,8,["modelValue","rules","options"])]),s("div",L,[n(i,{modelValue:e.employee,"onUpdate:modelValue":t[3]||(t[3]=l=>e.employee=l),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:b(({value:l})=>[n(u,{size:"small",class:"mr-1 my-1"},{default:b(()=>[q(B(l.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),s("div",Q,[n(m,{modelValue:e.start,"onUpdate:modelValue":t[4]||(t[4]=l=>e.start=l),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),s("div",O,[n(m,{modelValue:e.end,"onUpdate:modelValue":t[5]||(t[5]=l=>e.end=l),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),s("div",Y,[n(c,{label:"End Time",modelValue:e.endTime,"onUpdate:modelValue":t[6]||(t[6]=l=>e.endTime=l)},null,8,["modelValue"])]),s("div",G,[n(v,{modelValue:e.attachments,"onUpdate:modelValue":t[7]||(t[7]=l=>e.attachments=l),dropzone:""},null,8,["modelValue"])]),s("div",I,[n(f,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[8]||(t[8]=l=>e.description=l),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const Z=D(F,[["render",J]]);export{Z as E};
