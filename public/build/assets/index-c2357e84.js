import{a as B,S as j}from"./app-layout-b069f2a8.js";import{_ as D}from"./PageTitleBox-31010f1c.js";import{_ as L,ar as T,a9 as F,ap as E,r as h,h as M,w as l,e as s,f as v,i as e,b as t,j as x,c as w,x as R,F as U,u as q,z as d,C as G,D as H}from"./app-1f23f49e.js";import{h as J}from"./moment-fbc5633a.js";const K={components:{AppLayout:B,PageTitleBox:D,StatusBtn:j,StarFilled:T,Expand:F,Download:E},setup(){const i=q(),r=h(!0),p=h([]),n=h([]),y=h(10),b=o=>{i.push(o)},m=o=>J(o).fromNow();return(async()=>{try{const o=route("my.task.index"),{data:c}=await axios.get(o);p.value=c.data,n.value=c.links}catch(o){console.error(o)}r.value=!1})(),{items:p,links:n,perPage:y,busy:r,atNow:m,go:b,doArchive:(o,c)=>{p.value.splice(c,1),axios.post(route("task.doArchive",{task:o.id}),{prop:"employee_archive",do:o.employee_archive?0:1})},addStar:o=>{const{employee_star:c}=o;o.employee_star=!c,axios.post(route("task.changeStar",{task:o.id}),{prop:"employee_star",star:c?0:1})}}}},O=i=>(G("data-v-2be43af9"),i=i(),H(),i),Q={class:"row mt-4"},W={class:"flex md6"},X={class:"item"},Y={class:"flex lg6"},Z={class:"item right"},$={class:"va-table-responsive"},ee={class:"va-table"},te=O(()=>e("thead",null,[e("tr",null,[e("th",null,"Star"),e("th",null,"ID"),e("th",null,"Title"),e("th",null,"Category"),e("th",null,"Assigner"),e("th",null,"Start"),e("th",null,"DeadLine"),e("th",null,"AtNow"),e("th",null,"Status"),e("th",null,"Show")])],-1)),ae={class:"ml-1"};function oe(i,r,p,n,y,b){const m=s("download"),_=s("el-icon"),u=s("el-button"),k=s("page-title-box"),o=s("va-select"),c=s("va-icon"),S=s("va-input"),C=s("star-filled"),g=s("el-link"),A=s("el-avatar"),I=s("status-btn"),N=s("expand"),P=s("el-button-group"),V=s("app-layout");return v(),M(V,{busy:n.busy},{default:l(()=>[e("div",null,[t(k,{title:"My Task (jobs)"},{default:l(()=>[t(u,{type:"primary",onClick:r[0]||(r[0]=a=>n.go({name:"job.task.archive"}))},{default:l(()=>[t(_,null,{default:l(()=>[t(m)]),_:1}),x(" Archives ")]),_:1})]),_:1})]),e("div",Q,[e("div",W,[e("div",X,[t(o,{class:"flex mb-2 md6",label:"Per Page",modelValue:n.perPage,"onUpdate:modelValue":r[1]||(r[1]=a=>n.perPage=a),options:[10,20,30,40,50]},null,8,["modelValue"])])]),e("div",Y,[e("div",Z,[t(S,{class:"flex mb-2 md6",label:"Search"},{prepend:l(()=>[t(c,{class:"material-icons"},{default:l(()=>[x("search")]),_:1})]),_:1})])])]),e("div",$,[e("table",ee,[te,e("tbody",null,[(v(!0),w(U,null,R(n.items,(a,z)=>(v(),w("tr",{key:a.id},[e("td",null,[t(u,{onClick:f=>n.addStar(a),size:"small",type:a.employee_star?"warning":"",plain:"",round:""},{default:l(()=>[t(_,null,{default:l(()=>[t(C)]),_:1})]),_:2},1032,["onClick","type"])]),e("td",null,d(a.id),1),e("td",null,[t(g,{onClick:f=>n.go({name:"job.task.show",params:{id:a.id}})},{default:l(()=>[e("b",null,d(a.title),1)]),_:2},1032,["onClick"])]),e("td",null,d(a.category.title),1),e("td",null,[t(g,{underline:!1,onClick:f=>n.go({name:"userProfile",params:{user:a.assigner.id}})},{default:l(()=>[t(A,{size:25,src:a.assigner.avatar.url},null,8,["src"]),e("b",ae,d(a.assigner.name),1)]),_:2},1032,["onClick"])]),e("td",null,d(a.start),1),e("td",null,d(a.end),1),e("td",null,d(n.atNow(a.created_at)),1),e("td",null,[t(I,{status:a.status,size:"small"},null,8,["status"])]),e("td",null,[t(P,null,{default:l(()=>[t(u,{type:"primary",size:"small",title:"Archive",onClick:f=>n.doArchive(a,z)},{default:l(()=>[t(_,null,{default:l(()=>[t(m)]),_:1})]),_:2},1032,["onClick"]),t(u,{type:"primary",size:"small",onClick:f=>n.go({name:"job.task.show",params:{id:a.id}}),title:"Show"},{default:l(()=>[t(_,null,{default:l(()=>[t(N)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])])])]),_:1},8,["busy"])}const re=L(K,[["render",oe],["__scopeId","data-v-2be43af9"]]);export{re as default};
