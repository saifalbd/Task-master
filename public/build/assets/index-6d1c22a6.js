import{a as te}from"./app-layout-5d9798fd.js";import{_ as oe}from"./PageTitleBox-f6019cab.js";import{P as le}from"./Pagination-6c309bc9.js";import{R as ae}from"./RemoveEditButton-c44bf43c.js";import{F as R}from"./FormDialog-a9fe4070.js";import{r as O}from"./index-1c21caeb.js";import{h as W}from"./moment-fbc5633a.js";import{_ as L,r,f as E,h as P,w as n,b as o,i,j as A,t as B,e as a,N as ne,a8 as se,a9 as re,V as ie,a6 as de,aa as ce,v as ue,ab as S,u as me,P as pe,Q as _e,c as z,n as D,F}from"./app-3e67fe59.js";import{C as fe}from"./CreateButton-f03f66ea.js";import{S as ye}from"./statusBtn-f8051637.js";import{u as ve}from"./useToast-a0cdd154.js";const be={components:{FormDialog:R},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0}},setup(k,{emit:t}){let V=r(!1);const e=r(!1),v=r(null);let g=r(""),c=r(null),m=r(null);const _=r(W().format(dateFormat)),f=r(null),u=r(""),b=r([]);return{props:k,form:v,emit:t,save:async()=>{var y;let l=route("task.store");if(!await v.value.validate())return null;e.value=!0;try{const p=new FormData;p.append("title",g.value),p.append("category",c.value),p.append("employee",(y=m.value)==null?void 0:y.id),p.append("start",_.value),p.append("end",f.value),p.append("description",u.value),b.value.forEach((h,x)=>{p.append(`attachments[${x}]`,h)});const{data:d}=await axios.post(l,p);t("push",addProtos(d,{action:!0,showEdit:!1}))}catch(p){console.error(p),validErorrs(p)}e.value=!1},rs:O,busy:V,formBusy:e,title:g,start:_,end:f,employee:m,category:c,description:u,attachments:b}}},he={class:"layout gutter--md"},ge={class:"row align-content--center"},xe={class:"flex xs12 in-box"},ke={class:"flex xs12 in-box"},Ve={class:"flex xs12 in-box"},we={class:"flex xs6 in-box"},Ce={class:"flex xs6 in-box"},Ee={class:"flex xs12 in-box"},Te={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function Ue(k,t,V,e,v,g){const c=a("va-input"),m=a("va-select"),_=a("va-chip"),f=a("va-file-upload"),u=a("QuillEditor"),b=a("va-form"),w=a("form-dialog");return E(),P(w,{show:e.props.show,"onUpdate:show":t[7]||(t[7]=l=>e.emit("update:show",l)),busy:e.formBusy,title:"Create Task",onAdd:e.save,fullscreen:!0},{default:n(()=>[o(b,{ref:"form"},{default:n(()=>[i("div",he,[i("div",ge,[i("div",xe,[o(c,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.title=l),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),i("div",ke,[o(m,{modelValue:e.category,"onUpdate:modelValue":t[1]||(t[1]=l=>e.category=l),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),i("div",Ve,[o(m,{modelValue:e.employee,"onUpdate:modelValue":t[2]||(t[2]=l=>e.employee=l),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:n(({value:l})=>[o(_,{size:"small",class:"mr-1 my-1"},{default:n(()=>[A(B(l.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),i("div",we,[o(c,{modelValue:e.start,"onUpdate:modelValue":t[3]||(t[3]=l=>e.start=l),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),i("div",Ce,[o(c,{modelValue:e.end,"onUpdate:modelValue":t[4]||(t[4]=l=>e.end=l),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),i("div",Ee,[o(f,{modelValue:e.attachments,"onUpdate:modelValue":t[5]||(t[5]=l=>e.attachments=l),dropzone:""},null,8,["modelValue"])]),i("div",Te,[o(u,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[6]||(t[6]=l=>e.description=l),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const Pe=L(be,[["render",Ue]]),Be={components:{FormDialog:R},props:{show:{type:Boolean,default:!1},employees:{type:Array,required:!0},categories:{type:Array,required:!0},item:{type:Object,required:!0}},setup(k,{emit:t}){let V=r(null),e=r(!1);const v=r(null);let g=r(""),c=r(null),m=r(null);const _=r(W().format(dateFormat)),f=r(null),u=r(""),b=r([]);return ne(k.item,l=>{g.value=l.title,m.value=l.employee,c.value=l.category_id,_.value=l.start,f.value=l.end,u.value=l.description,V.value=l},{immediate:!0}),{props:k,form:v,emit:t,save:async()=>{var p;let l=route("task.update",{task:V.value.id});if(!await v.value.validate())return null;const y=new FormData;y.append("_method","PUT"),y.append("title",g.value),y.append("category",c.value),y.append("employee",(p=m.value)==null?void 0:p.id),y.append("start",_.value),y.append("end",f.value),y.append("description",u.value),b.value.forEach((d,h)=>{y.append(`attachments[${h}]`,d)});try{const{data:d}=await axios.post(l,y);t("replace",addProtos(d,{action:!0,showEdit:!1}))}catch(d){console.error(d),validErorrs(d)}},rs:O,busy:e,title:g,start:_,end:f,employee:m,category:c,description:u,attachments:b}}},He={class:"layout gutter--md"},Ae={class:"row align-content--center"},Le={class:"flex xs12 in-box"},Se={class:"flex xs12 in-box"},ze={class:"flex xs12 in-box"},De={class:"flex xs6 in-box"},Fe={class:"flex xs6 in-box"},Re={class:"flex xs12 in-box"},Oe={class:"flex xs12",style:{"min-height":"150px","margin-bottom":"50px"}};function We(k,t,V,e,v,g){const c=a("va-input"),m=a("va-select"),_=a("va-chip"),f=a("va-file-upload"),u=a("QuillEditor"),b=a("va-form"),w=a("form-dialog");return E(),P(w,{show:e.props.show,"onUpdate:show":t[7]||(t[7]=l=>e.emit("update:show",l)),busy:e.busy,title:"Edit Task",onAdd:e.save,fullscreen:!0},{default:n(()=>[o(b,{ref:"form"},{default:n(()=>[i("div",He,[i("div",Ae,[i("div",Le,[o(c,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.title=l),label:"Title *",placeholder:"Title Here",rules:e.rs("title",!0)},null,8,["modelValue","rules"])]),i("div",Se,[o(m,{modelValue:e.category,"onUpdate:modelValue":t[1]||(t[1]=l=>e.category=l),label:"Project Category *",placeholder:"Category Here",rules:e.rs("Category",!0),"text-by":"title","value-by":"id",options:e.props.categories},null,8,["modelValue","rules","options"])]),i("div",ze,[o(m,{modelValue:e.employee,"onUpdate:modelValue":t[2]||(t[2]=l=>e.employee=l),label:"Task Employee *",placeholder:"Task Employee Here",rules:e.rs("member",!0),searchable:"","text-by":"name",options:e.props.employees},{content:n(({value:l})=>[o(_,{size:"small",class:"mr-1 my-1"},{default:n(()=>[A(B(l.name),1)]),_:2},1024)]),_:1},8,["modelValue","rules","options"])]),i("div",De,[o(c,{modelValue:e.start,"onUpdate:modelValue":t[3]||(t[3]=l=>e.start=l),label:"Start *",type:"date",placeholder:"Start Here",rules:e.rs("start",!0)},null,8,["modelValue","rules"])]),i("div",Fe,[o(c,{modelValue:e.end,"onUpdate:modelValue":t[4]||(t[4]=l=>e.end=l),type:"date",label:"Dead Line *",placeholder:"Dead Line Here",rules:e.rs("dead line",!0)},null,8,["modelValue","rules"])]),i("div",Re,[o(f,{modelValue:e.attachments,"onUpdate:modelValue":t[5]||(t[5]=l=>e.attachments=l),dropzone:""},null,8,["modelValue"])]),i("div",Oe,[o(u,{theme:"snow",toolbar:"minimal",contentType:"html",content:e.description,"onUpdate:content":t[6]||(t[6]=l=>e.description=l),placeholder:"Description Html Contant"},null,8,["content"])])])])]),_:1},512)]),_:1},8,["show","busy","onAdd"])}const qe=L(Be,[["render",We]]);const Qe={components:{AppLayout:te,PageTitleBox:oe,Pagination:le,Create:Pe,Edit:qe,List:se,Box:re,CreateButton:fe,RemoveEditButton:ae,StatusBtn:ye,Delete:ie,More:de,Search:ce,Collection:ue},setup(){const k=r(!1),t=r(!0),V=ve(),e=me(),v=r([]),g=r([]),c=r([]),m=r(!1),_=r([]),f=r(50),u=r("title"),b=[{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"title",sortable:!0},{key:"category.title",label:"Category",sortable:!0},{key:"employee",label:"Employee",sortable:!0},{key:"start",label:"Start",sortable:!0},{key:"end",label:"Dead Line",sortable:!0},{key:"status",sortable:!0},{key:"action",thAlign:"right",tdAlign:"right"}],w=r("asc");S("employees",d=>{g.value=d}),S("categories",d=>{c.value=d});const l=async d=>{try{const h=route("task.index",{perPage:f.value,page:d}),{data:x}=await axios.get(h);_.value=x.links,v.value=addProtos(x.data,{action:!0,showEdit:!1})}catch(h){console.error(h)}t.value=!1};return l(1),{busy:t,showCreate:m,perPage:f,sortingOrder:w,items:v,columns:b,sortBy:u,push:d=>{m.value=!1,v.value.push(d)},replace:(d,h)=>{m.value=!1,v.value.splice(h,1,d)},fetchItems:l,employees:g,categories:c,remove:async(d,h)=>{if(!await pe(d,"Task","title"))return null;try{const T=route("task.destroy",{task:d.id});await axios.delete(T),v.value.splice(h,1),_e(V)}catch(T){console.log(T)}},links:_,router:e,isCardWise:k}}},je={class:"filter-row mt-2"},Ne={class:"left-side"},Me={class:"item"},Ie={class:"right-side"},Ge={class:"item right mr-3"},Je={class:"item right"},Ke=["innerHTML"],Xe={class:"ml-1"};function Ye(k,t,V,e,v,g){const c=a("create-button"),m=a("page-title-box"),_=a("el-option"),f=a("collection"),u=a("el-icon"),b=a("el-select"),w=a("list"),l=a("el-button"),H=a("box"),y=a("el-button-group"),p=a("search"),d=a("el-input"),h=a("el-divider"),x=a("el-descriptions-item"),T=a("status-btn"),q=a("delete"),Q=a("more"),j=a("el-descriptions"),N=a("el-card"),M=a("el-col"),I=a("el-row"),G=a("el-avatar"),J=a("el-link"),K=a("edit"),X=a("remove-edit-button"),Y=a("va-data-table"),Z=a("pagination"),$=a("create"),ee=a("app-layout");return E(),P(ee,{busy:e.busy},{default:n(()=>[i("div",null,[o(m,{title:"Task"},{default:n(()=>[o(c,{title:"Add Task",onClick:t[0]||(t[0]=s=>e.showCreate=!0)})]),_:1})]),i("div",je,[i("div",Ne,[i("div",Me,[o(b,{modelValue:e.perPage,"onUpdate:modelValue":t[1]||(t[1]=s=>e.perPage=s),placeholder:"Per Page"},{prefix:n(()=>[o(u,{class:"el-input__icon"},{default:n(()=>[o(f)]),_:1})]),default:n(()=>[(E(),z(F,null,D([10,20,30,40,50,70,100],s=>o(_,{key:s,label:s,value:s},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),i("div",Ie,[i("div",Ge,[o(y,null,{default:n(()=>[o(l,{type:e.isCardWise?"info":"primary",onClick:t[2]||(t[2]=s=>e.isCardWise=!1)},{default:n(()=>[o(u,null,{default:n(()=>[o(w)]),_:1})]),_:1},8,["type"]),o(l,{type:e.isCardWise?"primary":"info",onClick:t[3]||(t[3]=s=>e.isCardWise=!0)},{default:n(()=>[o(u,null,{default:n(()=>[o(H)]),_:1})]),_:1},8,["type"])]),_:1})]),i("div",Je,[o(d,{placeholder:"Type something","prefix-icon":k.Search},{prefix:n(()=>[o(u,{class:"el-input__icon"},{default:n(()=>[o(p)]),_:1})]),_:1},8,["prefix-icon"])])])]),o(h),e.isCardWise?(E(),P(I,{key:0,class:"card-list",gutter:24},{default:n(()=>[(E(!0),z(F,null,D(e.items,(s,U)=>(E(),P(M,{sm:24,md:12,key:U},{default:n(()=>[o(N,null,{default:n(()=>[o(j,{title:s.title,direction:"horizontal",column:1,size:"small",border:""},{default:n(()=>[o(x,{label:"Assgned To:"},{default:n(()=>[A(B(s.employee.model.name),1)]),_:2},1024),o(x,{label:"Dead Line:"},{default:n(()=>[A(B(s.end),1)]),_:2},1024),o(x,{label:"Status:"},{default:n(()=>[o(T,{status:s.status,size:"small"},null,8,["status"])]),_:2},1024),o(x,{label:"Delete:"},{default:n(()=>[o(l,{size:"small",type:"danger",plain:"",onClick:C=>e.remove(s,U)},{default:n(()=>[o(u,null,{default:n(()=>[o(q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),o(x,{label:"View:"},{default:n(()=>[o(l,{size:"small",type:"info",plain:"",onClick:C=>e.router.push({name:"task.show",params:{id:s.id}})},{default:n(()=>[o(u,null,{default:n(()=>[o(Q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"]),i("div",{class:"description",innerHTML:s.description},null,8,Ke)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(E(),P(Y,{key:1,items:e.items,columns:e.columns,hoverable:!0,"sort-by":e.sortBy,"onUpdate:sortBy":t[4]||(t[4]=s=>e.sortBy=s),"sorting-order":e.sortingOrder,"onUpdate:sortingOrder":t[5]||(t[5]=s=>e.sortingOrder=s)},{"cell(employee)":n(({rowData:s})=>[o(J,{underline:!1,onClick:U=>e.router.push({name:"userProfile",params:{user:s.employee.model.id}})},{default:n(()=>[o(G,{size:25,src:s.employee.model.avatar.url},null,8,["src"]),i("b",Xe,B(s.employee.model.name),1)]),_:2},1032,["onClick"])]),"cell(status)":n(({value:s})=>[o(T,{status:s,size:"small"},null,8,["status"])]),"cell(action)":n(({rowData:s,rowIndex:U})=>[o(X,{isView:!0,onViewClick:C=>e.router.push({name:"task.show",params:{id:s.id}}),onEditClick:C=>s.showEdit=!0,onRemoveClick:C=>e.remove(s,U)},{default:n(()=>[o(K,{show:s.showEdit,"onUpdate:show":C=>s.showEdit=C,item:s,employees:e.employees,categories:e.categories,onReplace:C=>e.replace(C,U)},null,8,["show","onUpdate:show","item","employees","categories","onReplace"])]),_:2},1032,["onViewClick","onEditClick","onRemoveClick"])]),_:1},8,["items","columns","sort-by","sorting-order"])),o(Z,{links:e.links,onPage:e.fetchItems},null,8,["links","onPage"]),o($,{show:e.showCreate,"onUpdate:show":t[6]||(t[6]=s=>e.showCreate=s),employees:e.employees,categories:e.categories,onPush:e.push},null,8,["show","employees","categories","onPush"])]),_:1},8,["busy"])}const dt=L(Qe,[["render",Ye],["__scopeId","data-v-47619fdf"]]);export{dt as default};
