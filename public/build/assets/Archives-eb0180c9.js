import{a as z,S as D}from"./app-layout-07ff5ad6.js";import{_ as F}from"./PageTitleBox-c4608ada.js";import{_ as L,aj as T,Z as N,ah as E,r as p,h as R,w as l,e as o,f as v,i as e,b as t,j as q,c as S,p as M,F as U,u as Z,t as i,q as $,s as G}from"./app-65c4e35f.js";import{B as H}from"./BackButton-90e1862a.js";const J={components:{AppLayout:z,PageTitleBox:F,BackButtonVue:H,StatusBtn:D,StarFilled:T,Expand:N,Download:E},setup(){const r=Z(),_=p(!0),d=p([]),n=p([]),f=p(10),b=s=>{r.push(s)};return(async()=>{try{const s=route("my.task.archives"),{data:c}=await axios.get(s);d.value=c.data,n.value=c.links}catch(s){console.error(s)}_.value=!1})(),{items:d,links:n,perPage:f,busy:_,go:b,doArchive:(s,c)=>{d.value.splice(c,1),axios.post(route("task.doArchive",{task:s.id}),{prop:"employee_archive",do:s.employee_archive?0:1})},addStar:s=>{const{employee_star:c}=s;s.employee_star=!c,axios.post(route("task.changeStar",{task:s.id}),{prop:"employee_star",star:c?0:1})}}}},K=r=>($("data-v-efb0a656"),r=r(),G(),r),O={class:"row mt-4"},Q={class:"flex md6"},W={class:"item"},X={class:"flex lg6"},Y={class:"item right"},ee={class:"va-table-responsive"},te={class:"va-table"},ae=K(()=>e("thead",null,[e("tr",null,[e("th",null,"Star"),e("th",null,"ID"),e("th",null,"Title"),e("th",null,"Category"),e("th",null,"Assigner"),e("th",null,"Start"),e("th",null,"DeadLine"),e("th",null,"Status"),e("th",null,"Show")])],-1)),oe={class:"ml-1"};function se(r,_,d,n,f,b){const y=o("back-button-vue"),k=o("page-title-box"),g=o("va-select"),s=o("va-icon"),c=o("va-input"),w=o("star-filled"),m=o("el-icon"),h=o("el-button"),x=o("el-link"),C=o("el-avatar"),A=o("status-btn"),B=o("download"),V=o("expand"),I=o("el-button-group"),P=o("app-layout");return v(),R(P,{busy:n.busy},{default:l(()=>[e("div",null,[t(k,{title:"My Task Archives (jobs)"},{default:l(()=>[t(y)]),_:1})]),e("div",O,[e("div",Q,[e("div",W,[t(g,{class:"flex mb-2 md6",label:"Per Page",modelValue:n.perPage,"onUpdate:modelValue":_[0]||(_[0]=a=>n.perPage=a),options:[10,20,30,40,50]},null,8,["modelValue"])])]),e("div",X,[e("div",Y,[t(c,{class:"flex mb-2 md6",label:"Search"},{prepend:l(()=>[t(s,{class:"material-icons"},{default:l(()=>[q("search")]),_:1})]),_:1})])])]),e("div",ee,[e("table",te,[ae,e("tbody",null,[(v(!0),S(U,null,M(n.items,(a,j)=>(v(),S("tr",{key:a.id},[e("td",null,[t(h,{onClick:u=>n.addStar(a),size:"small",type:a.employee_star?"warning":"",plain:"",round:""},{default:l(()=>[t(m,null,{default:l(()=>[t(w)]),_:1})]),_:2},1032,["onClick","type"])]),e("td",null,i(a.id),1),e("td",null,[t(x,{onClick:u=>n.go({name:"job.task.show",params:{id:a.id}})},{default:l(()=>[e("b",null,i(a.title),1)]),_:2},1032,["onClick"])]),e("td",null,i(a.category.title),1),e("td",null,[t(x,{underline:!1,onClick:u=>n.go({name:"userProfile",params:{user:a.assigner.id}})},{default:l(()=>[t(C,{size:25,src:a.assigner.avatar.url},null,8,["src"]),e("b",oe,i(a.assigner.name),1)]),_:2},1032,["onClick"])]),e("td",null,i(a.start),1),e("td",null,i(a.end),1),e("td",null,[t(A,{status:a.status,size:"small"},null,8,["status"])]),e("td",null,[t(I,null,{default:l(()=>[t(h,{type:"primary",size:"small",title:"Restore From Archive",onClick:u=>n.doArchive(a,j)},{default:l(()=>[t(m,null,{default:l(()=>[t(B)]),_:1})]),_:2},1032,["onClick"]),t(h,{type:"primary",size:"small",onClick:u=>n.go({name:"job.task.show",params:{id:a.id}}),title:"Show"},{default:l(()=>[t(m,null,{default:l(()=>[t(V)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])])])]),_:1},8,["busy"])}const ie=L(J,[["render",se],["__scopeId","data-v-efb0a656"]]);export{ie as default};
