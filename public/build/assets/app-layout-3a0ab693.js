import{d as P,G,H as K,I as Q,J as W,K as X,L as Y,M as Z,N as ee,_ as T,f as v,c as N,b as t,w as o,u as L,e as a,C as j,D as R,i as n,O,q as D,h as $,P as V,j as S,z as B,v as te,r as U,F,x,B as I,m as J,y as E,Q as oe,R as se,S as ne,T as ae,s as le,U as ie,V as de,W as re}from"./app-99bb498d.js";const ue=P({props:{lg:{type:Boolean,required:!0}},components:{HomeFilled:G,Collection:K,Management:Q,Files:W,Connection:X,Avatar:Y,Position:Z,User:ee},setup(e){const s=L();return{props:e,go:i=>{s.push(i)}}}}),m=e=>(j("data-v-045f4c24"),e=e(),R(),e),ce={class:"asside-box"},_e=m(()=>n("span",{style:{"font-weight":"bold"}},"Employees",-1)),fe=m(()=>n("b",null,"Admin Board",-1)),pe=m(()=>n("b",null,"Job Board",-1)),me=m(()=>n("b",null,"Contacts",-1)),ve=m(()=>n("span",{style:{"font-weight":"bold"}},"Employees",-1)),ge=m(()=>n("b",null,"Employees",-1)),he=m(()=>n("b",null,"Department",-1)),be=m(()=>n("b",null,"Designation",-1)),ke=m(()=>n("b",null,"Clients",-1)),$e=m(()=>n("span",{style:{"font-weight":"bold"}},"Events",-1)),ye=m(()=>n("b",null,"Event Categories",-1)),Ce=m(()=>n("b",null,"Events",-1)),we=m(()=>n("span",{style:{"font-weight":"bold"}},"Task Type & Category",-1)),Se=m(()=>n("b",null,"Category",-1)),Ae=m(()=>n("b",null,"Task Type",-1)),Be=m(()=>n("b",null,"Teams",-1)),Ue=m(()=>n("span",{style:{"font-weight":"bold"}},"Projects",-1)),ze=m(()=>n("b",null,"Assignments (Project)",-1)),Ne=m(()=>n("b",null,"Jobs (Job)",-1)),Te=m(()=>n("span",{style:{"font-weight":"bold"}},"Tasks",-1)),Me=m(()=>n("b",null,"Assignments (Task)",-1)),Pe=m(()=>n("b",null,"Jobs (Task)",-1)),Ve=m(()=>n("b",null,"toDoList",-1));function Ie(e,s,d,i,y,C){const f=a("home-filled"),l=a("el-icon"),r=a("el-menu-item"),p=a("el-sub-menu"),g=a("avatar"),c=a("connection"),h=a("position"),b=a("user"),k=a("management"),w=a("files"),A=a("el-menu");return v(),N("div",ce,[t(A,{collapse:!e.props.lg,"default-active":"1"},{default:o(()=>[t(p,{index:"1"},{title:o(()=>[t(l,null,{default:o(()=>[t(f)]),_:1}),_e]),default:o(()=>[t(r,{index:"1-1",onClick:s[0]||(s[0]=_=>e.go({name:"home"}))},{default:o(()=>[t(l,null,{default:o(()=>[t(f)]),_:1}),fe]),_:1}),t(r,{index:"1-2",onClick:s[1]||(s[1]=_=>e.go({name:"job.home"}))},{default:o(()=>[t(l,null,{default:o(()=>[t(f)]),_:1}),pe]),_:1})]),_:1}),t(r,{index:"2",onClick:s[2]||(s[2]=_=>e.go({name:"contact"}))},{title:o(()=>[me]),default:o(()=>[t(l,null,{default:o(()=>[t(g)]),_:1})]),_:1}),t(p,{index:"2"},{title:o(()=>[t(l,null,{default:o(()=>[t(g)]),_:1}),ve]),default:o(()=>[t(r,{index:"2-1",onClick:s[3]||(s[3]=_=>e.go({name:"employee"}))},{default:o(()=>[t(l,null,{default:o(()=>[t(g)]),_:1}),ge]),_:1}),t(r,{index:"2-2",onClick:s[4]||(s[4]=_=>e.go({name:"department"}))},{default:o(()=>[t(l,null,{default:o(()=>[t(c)]),_:1}),he]),_:1}),t(r,{index:"2-3",onClick:s[5]||(s[5]=_=>e.go({name:"designation"}))},{default:o(()=>[t(l,null,{default:o(()=>[t(h)]),_:1}),be]),_:1})]),_:1}),t(r,{index:"3",onClick:s[6]||(s[6]=_=>e.go({name:"client"}))},{title:o(()=>[ke]),default:o(()=>[t(l,null,{default:o(()=>[t(b)]),_:1})]),_:1}),t(p,{index:"3"},{title:o(()=>[t(l,null,{default:o(()=>[t(c)]),_:1}),$e]),default:o(()=>[t(r,{index:"0",onClick:s[7]||(s[7]=_=>e.go({name:"eventCategory"}))},{title:o(()=>[ye]),default:o(()=>[t(l,null,{default:o(()=>[t(b)]),_:1})]),_:1}),t(r,{index:"1",onClick:s[8]||(s[8]=_=>e.go({name:"event"}))},{title:o(()=>[Ce]),default:o(()=>[t(l,null,{default:o(()=>[t(b)]),_:1})]),_:1})]),_:1}),t(p,{index:"4"},{title:o(()=>[t(l,null,{default:o(()=>[t(c)]),_:1}),we]),default:o(()=>[t(r,{index:"4",onClick:s[9]||(s[9]=_=>e.go({name:"category"}))},{title:o(()=>[Se]),default:o(()=>[t(l,null,{default:o(()=>[t(c)]),_:1})]),_:1}),t(r,{index:"4",onClick:s[10]||(s[10]=_=>e.go({name:"taskType"}))},{title:o(()=>[Ae]),default:o(()=>[t(l,null,{default:o(()=>[t(c)]),_:1})]),_:1})]),_:1}),t(r,{index:"7",onClick:s[11]||(s[11]=_=>e.go({name:"team"}))},{title:o(()=>[Be]),default:o(()=>[t(l,null,{default:o(()=>[t(k)]),_:1})]),_:1}),t(p,{index:"8"},{title:o(()=>[t(l,null,{default:o(()=>[t(w)]),_:1}),Ue]),default:o(()=>[t(r,{index:"8-1",onClick:s[12]||(s[12]=_=>e.go({name:"project"}))},{default:o(()=>[ze]),_:1}),t(r,{index:"8-2",onClick:s[13]||(s[13]=_=>e.go({name:"job.project"}))},{default:o(()=>[Ne]),_:1})]),_:1}),t(p,{index:"9"},{title:o(()=>[t(l,null,{default:o(()=>[t(w)]),_:1}),Te]),default:o(()=>[t(r,{index:"9-1",onClick:s[14]||(s[14]=_=>e.go({name:"task"}))},{default:o(()=>[Me]),_:1}),t(r,{index:"9-2",onClick:s[15]||(s[15]=_=>e.go({name:"job.task"}))},{default:o(()=>[Pe]),_:1})]),_:1}),t(r,{index:"10",onClick:s[16]||(s[16]=_=>e.go({name:"toDoList"}))},{title:o(()=>[Ve]),default:o(()=>[t(l,null,{default:o(()=>[t(f)]),_:1})]),_:1})]),_:1},8,["collapse"])])}const De=T(ue,[["render",Ie],["__scopeId","data-v-045f4c24"]]),q=O("notifications",{state(){return{count:0,notifications:[],showModal:!1}},actions:{toggleNodal(e){this.showModal=e},addNotify(e){this.notifications.unshift(e),this.count++},notificationsFetch(){axios.get(route("notification")).then(({data:e})=>{this.notifications=e,this.count=e.length})}},getters:{taskNotifications(){return this.notifications.filter(e=>["TaskAssigned","TaskStatusChanged"].includes(e.type))},employeeAssignedNotifications(){return this.notifications.filter(e=>e.type=="EmployeeAssigned")}}}),Ee={props:{dropdown:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},preset:{type:String,default:"secondary"},size:{type:String,default:"medium"},color:{type:String,default:"primary"},textColor:{type:String,default:""},borderColor:{type:String,default:""},status:{type:[Number,String],required:!0}},setup(e){let s=D(()=>te[parseInt(e.status)]);return{props:e,status:s}}};function Le(e,s,d,i,y,C){const f=a("va-button-dropdown"),l=a("va-button");return d.dropdown?(v(),$(f,{key:0,label:i.status.title,preset:i.props.preset,loading:i.props.loading,plain:i.props.plain,size:i.props.size,color:i.status.color,"text-color":i.props.textColor,"border-color":i.props.borderColor},{default:o(()=>[V(e.$slots,"default")]),_:3},8,["label","preset","loading","plain","size","color","text-color","border-color"])):(v(),$(l,{key:1,preset:i.props.preset,loading:i.props.loading,plain:i.props.plain,size:i.props.size,color:i.status.color,"text-color":i.props.textColor,"border-color":i.props.borderColor},{default:o(()=>[S(B(i.status.title),1)]),_:1},8,["preset","loading","plain","size","color","text-color","border-color"]))}const je=T(Ee,[["render",Le]]);const Re=P({components:{statusBtnVue:je},model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:s}){const d=q(),i=L(),y=U(!1),C="Notifications",f=()=>{s("update:show",!1)};return{title:C,busy:y,props:e,close:f,go:(p,g)=>{axios.put(route("markAsReadNotify",{id:g}),{read:1}),f(),i.push(p)},read:p=>{axios.put(route("markAsReadNotify",{id:p.id}),{read:p.read_at?0:1}),p.read_at=!0},notifyStore:d}}}),Fe={class:"layout va-gutter-1"},xe={class:"row"},Oe={class:"flex xs12"},Je={class:"item mb-4"},qe={class:"form-title"},He={class:"text"},Ge={key:0,class:"flex xs12"},Ke=["src"],Qe={key:1,class:"flex xs12"},We=["src"],Xe={class:"flex xs12"},Ye={class:"item actions-btns"};function Ze(e,s,d,i,y,C){const f=a("va-icon"),l=a("va-list-label"),r=a("va-avatar"),p=a("va-list-item-section"),g=a("el-link"),c=a("va-list-item-label"),h=a("status-btn-vue"),b=a("va-list-item"),k=a("va-list"),w=a("va-button"),A=a("va-inner-loading"),_=a("va-modal");return v(),$(_,{modelValue:e.show,"onUpdate:modelValue":s[0]||(s[0]=u=>e.show=u),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:o(()=>[t(A,{loading:e.busy},{default:o(()=>[n("div",Fe,[n("div",xe,[n("div",Oe,[n("div",Je,[n("div",qe,[t(f,{name:"notifications"}),n("span",He,B(e.title),1)])])]),e.notifyStore.taskNotifications.length?(v(),N("div",Ge,[t(k,null,{default:o(()=>[t(l,null,{default:o(()=>[S(" TaskNotifications ")]),_:1}),(v(!0),N(F,null,x(e.notifyStore.taskNotifications,(u,z)=>(v(),$(b,{class:"list__item",key:z},{default:o(()=>[t(p,{avatar:"",onClick:M=>e.go({name:"userProfile",params:{user:u.data.user_id}},u.id)},{default:o(()=>[t(r,{size:40},{default:o(()=>[n("img",{src:u.fromUser.avatar.url},null,8,Ke)]),_:2},1024)]),_:2},1032,["onClick"]),t(p,null,{default:o(()=>[t(c,{onClick:M=>e.go({name:"userProfile",params:{user:u.data.user_id}},u.id)},{default:o(()=>[t(g,{underline:!1},{default:o(()=>[n("b",null,B(u.fromUser.name),1)]),_:2},1024)]),_:2},1032,["onClick"]),u.type=="TaskStatusChanged"?(v(),$(c,{key:0,onClick:M=>e.go({name:"job.task.show",params:{id:u.data.task_id}},u.id),lines:z+1},{default:o(()=>[S(B(u.data.message)+" Changed Status From ",1),t(h,{status:u.data.beforeStatus,size:"small"},null,8,["status"]),S(" To "),t(h,{status:u.data.status,size:"small"},null,8,["status"])]),_:2},1032,["onClick","lines"])):(v(),$(c,{key:1,onClick:M=>e.go({name:"job.task.show",params:{id:u.data.task_id}},u.id),lines:z+1},{default:o(()=>[S(B(u.data.message),1)]),_:2},1032,["onClick","lines"]))]),_:2},1024),t(p,{icon:""},{default:o(()=>[t(f,{onClick:M=>e.read(u),name:u.read_at?"visibility_off":"remove_red_eye",color:"background-tertiary"},null,8,["onClick","name"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):I("",!0),e.notifyStore.employeeAssignedNotifications.length?(v(),N("div",Qe,[t(k,null,{default:o(()=>[t(l,null,{default:o(()=>[S(" Employee Assigned Notifications ")]),_:1}),(v(!0),N(F,null,x(e.notifyStore.employeeAssignedNotifications,(u,z)=>(v(),$(b,{class:"list__item",key:z,onClick:M=>e.go({name:"userProfile",params:{user:u.data.user_id}},u.id)},{default:o(()=>[t(p,{avatar:""},{default:o(()=>[t(r,{size:40},{default:o(()=>[n("img",{src:u.fromUser.avatar.url},null,8,We)]),_:2},1024)]),_:2},1024),t(p,null,{default:o(()=>[t(c,null,{default:o(()=>[n("b",null,B(u.fromUser.name),1)]),_:2},1024),t(c,{lines:z+1},{default:o(()=>[S(B(u.data.message),1)]),_:2},1032,["lines"])]),_:2},1024),t(p,{icon:""},{default:o(()=>[t(f,{name:"remove_red_eye",color:"background-tertiary"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):I("",!0),n("div",Xe,[n("div",Ye,[t(w,{color:"danger",size:"small",onClick:e.close},{default:o(()=>[t(f,{class:"material-icons"},{default:o(()=>[S("close")]),_:1}),S(" Close")]),_:1},8,["onClick"])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const et=T(Re,[["render",Ze],["__scopeId","data-v-d6d3c6d3"]]);const tt=P({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:s}){const d=J(),i=U(!1),y="Profile Thumbnil";let C=U(!1),f=U(""),l=U(null);return{title:y,attach:l,hasThumb:C,thumbnil:f,fileAded:c=>{let b=c.target.files;if(b.length){let k=b[0];l.value=k;let w=new FileReader;w.onload=()=>{let A=w.result;f.value=A,C.value=!0},w.readAsDataURL(k)}},update:async()=>{try{const c=route("avatar",{},!1),h=new FormData;l.value&&h.append("avatar",l.value);const{data:b}=await axios.post(c,h);d.updateAvatar(b),d.hideProfileModal()}catch(c){console.error(c)}},busy:i,props:e,close:()=>{s("update:show",!1)}}}}),ot=e=>(j("data-v-8d7b5baf"),e=e(),R(),e),st={class:"layout va-gutter-1"},nt={class:"row"},at={class:"flex xs12"},lt={class:"item mb-4"},it={class:"form-title"},dt={class:"text"},rt={class:"flex xs12"},ut={class:"row"},ct={class:"flex xs12"},_t={key:0,class:"img-box"},ft=["src"],pt={class:"input-box"},mt={class:"va-file-upload va-file-upload--dropzone",style:{"background-color":"rgba(21, 79, 193, 0.08)"}},vt=ot(()=>n("div",{class:"va-file-upload__field"},[n("div",{class:"va-file-upload__field__text"}," Click Here And Upload File ")],-1)),gt={class:"flex xs12"},ht={class:"item actions-btns"};function bt(e,s,d,i,y,C){const f=a("va-icon"),l=a("va-button"),r=a("va-inner-loading"),p=a("va-modal");return v(),$(p,{modelValue:e.show,"onUpdate:modelValue":s[1]||(s[1]=g=>e.show=g),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:o(()=>[t(r,{loading:e.busy},{default:o(()=>[n("div",st,[n("div",nt,[n("div",at,[n("div",lt,[n("div",it,[t(f,{name:"notifications"}),n("span",dt,B(e.title),1)])])]),n("div",rt,[n("div",ut,[n("div",ct,[n("div",{class:E(["tumb-card",{hasThumb:e.hasThumb}])},[e.hasThumb?(v(),N("div",_t,[n("img",{src:e.thumbnil,alt:""},null,8,ft)])):I("",!0),n("div",pt,[n("div",mt,[vt,n("input",{type:"file",class:"va-file-upload__field__input",tabindex:"-1","aria-hidden":"true",onChange:s[0]||(s[0]=(...g)=>e.fileAded&&e.fileAded(...g))},null,32)])])],2)])])]),n("div",gt,[n("div",ht,[t(l,{color:"info",onClick:e.update},{default:o(()=>[S(" Skip")]),_:1},8,["onClick"]),t(l,{color:"success",onClick:e.update},{default:o(()=>[S(" Next")]),_:1},8,["onClick"])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const kt=T(tt,[["render",bt],["__scopeId","data-v-8d7b5baf"]]),$t=O("chat",{state(){return{users:[],totalUnreadCount:0}},actions:{async fetchChatUsers(e){try{const{data:s}=await axios.get(route("chatUsers"));this.users=s.map((d,i)=>(d.active=!i,d.messages=[],d)),e(this.users)}catch(s){console.error(s)}},increaseTotalUnread(e){this.totalUnreadCount=+e},increaseUnread(e,s){this.users=this.users.map(d=>(d.id==e&&(d.unReadCount=d.unReadCount+s),d)),this.totalUnreadCount=this.totalUnreadCount+s,oe()},listen(e){Echo.join("chat").joining(s=>{axios.put(route("online",{user:s.id}))}).leaving(s=>{axios.put(route("offline",{user:s.id}),{})}).listen("UserOnline",s=>{const d=this.users.find(i=>i.id==s.id);d&&(d.isOnline=!0)}).listen("UserOffline",s=>{const d=this.users.find(i=>i.id==s.id);d&&(d.isOnline=!1)}).listen("ChatEvent",s=>{e(s)})}}}),yt=P({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0}},setup(e,{emit:s}){return{props:e}}}),Ct=n("div",null,"Chat modal",-1);function wt(e,s,d,i,y,C){const f=a("va-inner-loading"),l=a("va-modal");return v(),$(l,{modelValue:e.show,"onUpdate:modelValue":s[0]||(s[0]=r=>e.show=r),fullscreen:!0,"hide-default-actions":"","no-outside-dismiss":""},{default:o(()=>[t(f,{loading:e.busy},{default:o(()=>[Ct]),_:1},8,["loading"])]),_:1},8,["modelValue"])}const St=T(yt,[["render",wt]]);const At=P({components:{AsideBar:De,NotificationModel:et,ProfileEditModal:kt,ChatModal:St,DArrowLeft:se,DArrowRight:ne},props:{title:{type:String,default:"title"},showInfoBar:{type:Boolean,default:!1},busy:{type:Boolean,default:!0}},setup(e){const s=J(),d=$t(),i=U(null),y=U(!1),C=D(()=>d.totalUnreadCount);let f=s.token,l=s.user,r=s.avatar,p=D(()=>s.showProfileModal),g=U(!1);f&&(window.Echo.connector.options.auth.headers.Authorization=`Bearer ${f}`);const c=L(),h=q();h.notificationsFetch();const b=()=>{ie(),c.push({name:"login"})},k=U(!1),w=()=>{d.users.length?c.push({name:"chat"}):(k.value=!0,d.fetchChatUsers(()=>{k.value=!1,c.push({name:"chat"})}))},A=()=>{c.push({name:"profile"})},_=()=>{const z=de(re).greater("sm");y.value=z.value};return ae(i,u=>{_()}),le(()=>{axios.get(route("chatUnreadcount")).then(({data:u})=>{d.increaseTotalUnread(u)})}),{lg:y,avatar:r,props:e,notifyStore:h,user:l,showProfileModal:p,showChatModal:g,chatUnreadcount:C,chatIconBusy:k,logout:b,goChat:w,goProfile:A}}}),H=e=>(j("data-v-bc27f170"),e=e(),R(),e),Bt={class:"info-bar-body"},Ut={class:"asside"},zt={class:"main-content"},Nt={class:"inner"},Tt={class:"top-nav"},Mt={class:"page-title"},Pt=H(()=>n("span",{class:"hidden-sm-and-down"},"Task Master",-1)),Vt={class:"right-side"},It=H(()=>n("span",{class:"mx-2"},"Logout",-1)),Dt={class:"page-content"};function Et(e,s,d,i,y,C){const f=a("AsideBar"),l=a("DArrowLeft"),r=a("el-icon"),p=a("DArrowRight"),g=a("el-button"),c=a("va-icon"),h=a("va-avatar"),b=a("va-badge"),k=a("va-inner-loading"),w=a("va-button"),A=a("NotificationModel");return v(),N("div",{ref:"el",class:E(["main-layout",{lg:e.lg}])},[n("div",{class:E(["info-bar",{show:e.props.showInfoBar}])},[n("div",Bt,[V(e.$slots,"info",{},void 0,!0)])],2),n("div",Ut,[t(f,{lg:!!e.lg},null,8,["lg"])]),n("div",zt,[n("div",Nt,[n("div",Tt,[n("div",Mt,[t(g,{round:"",onClick:s[0]||(s[0]=_=>e.lg=!e.lg)},{default:o(()=>[e.lg?(v(),$(r,{key:0},{default:o(()=>[t(l)]),_:1})):(v(),$(r,{key:1},{default:o(()=>[t(p)]),_:1}))]),_:1}),Pt]),n("div",Vt,[V(e.$slots,"custom",{},void 0,!0),t(b,{class:"notification-icon",text:e.notifyStore.count,overlap:"",onClick:s[1]||(s[1]=_=>e.notifyStore.toggleNodal(!0))},{default:o(()=>[t(h,{size:"small"},{default:o(()=>[t(c,{size:"small",name:"notifications"})]),_:1})]),_:1},8,["text"]),t(b,{text:e.chatUnreadcount,overlap:""},{default:o(()=>[t(k,{loading:e.chatIconBusy},{default:o(()=>[t(h,{onClick:e.goChat,size:"small"},{default:o(()=>[t(c,{size:"small",name:"message"})]),_:1},8,["onClick"])]),_:1},8,["loading"])]),_:1},8,["text"]),e.user?(v(),N("span",{key:0,class:"profile-badge-box",onClick:s[2]||(s[2]=(..._)=>e.goProfile&&e.goProfile(..._))},[e.avatar?(v(),$(h,{key:0,size:"small",src:e.avatar.url,alt:e.avatar.path},null,8,["src","alt"])):(v(),$(h,{key:1,size:"small",icon:"person"})),n("span",null,B(e.user.name),1),n("span",null,[t(c,{size:"small",name:"expand_more"})])])):I("",!0),t(w,{class:"ml-4",size:"small",preset:"primary",round:"",onClick:e.logout},{default:o(()=>[t(c,{size:"small",name:"lock"}),It]),_:1},8,["onClick"])])]),n("div",Dt,[t(k,{loading:e.props.busy,size:60},{default:o(()=>[V(e.$slots,"default",{},void 0,!0)]),_:3},8,["loading"])])])]),t(A,{show:e.notifyStore.showModal,"onUpdate:show":s[3]||(s[3]=_=>e.notifyStore.toggleNodal(_)),onClose:s[4]||(s[4]=_=>e.notifyStore.toggleNodal(!1))},null,8,["show"])],2)}const jt=T(At,[["render",Et],["__scopeId","data-v-bc27f170"]]);export{je as S,jt as a,$t as c};
