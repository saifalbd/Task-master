import{A as C,P as L}from"./PageTitleBox-ebdb7c37.js";import{d as V,_ as y,j as l,o as d,h as j,i as u,a as t,k as c,e as p,p as B,n as $,c as v,F as g,l as x,t as r,m as A,r as w,L as M,s as N}from"./app-ec84c5d3.js";import{S as P}from"./index-9bac4d7f.js";import{S}from"./statusBtn-1497cb5d.js";import{R as q}from"./RemoveEditButton-5e934d45.js";import"./index-d538a892.js";import"./moment-fbc5633a.js";import"./icon-c404ea0d.js";import"./index-110c5d5d.js";const D=V({model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!0},task:{type:Object,required:!0}},setup(o,{emit:i}){return{props:o,close:()=>{i("update:show",!1)}}}}),E=o=>(B("data-v-b7f3b00a"),o=o(),$(),o),I={class:"layout va-gutter-1"},U={class:"row"},F=E(()=>t("div",{class:"flex xs12"},[t("div",{class:"item mb-4"},[t("div",{class:"form-title"},[t("span",{class:"text"},"Show Task")])])],-1)),z={class:"flex xs12"},H=["innerHTML"],R={class:"flex xs12"},O={class:"item actions-btns"};function G(o,i,k,e,m,b){const h=l("va-icon"),f=l("va-button"),_=l("va-modal");return d(),j(_,{modelValue:o.props.show,"onUpdate:modelValue":i[0]||(i[0]=s=>o.props.show=s),fullscreen:!1,"hide-default-actions":"","no-outside-dismiss":"",class:"form-sceen"},{default:u(()=>[t("div",I,[t("div",U,[F,t("div",z,[t("div",{class:"item",innerHTML:o.task.description},null,8,H)]),t("div",R,[t("div",O,[c(f,{color:"danger",size:"small",onClick:o.close},{default:u(()=>[c(h,{class:"material-icons"},{default:u(()=>[p("close")]),_:1}),p(" Close")]),_:1},8,["onClick"])])])])])]),_:1},8,["modelValue"])}const J=y(D,[["render",G],["__scopeId","data-v-b7f3b00a"]]),K={components:{StatusBtn:S,RemoveEditButton:q,Taskmodel:J},props:{project_id:{type:Number,required:!0},tasks:{type:Array,required:!0}},setup(o){return{props:o}}},Q={class:"va-table-responsive"},W={class:"va-table"},X=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Employees"),t("th",null,"AssignAt"),t("th",null,"DeadLine"),t("th",null,"Status"),t("th",null,"action")])],-1);function Y(o,i,k,e,m,b){const h=l("status-btn"),f=l("taskmodel"),_=l("remove-edit-button");return d(),v("div",Q,[t("table",W,[X,t("tbody",null,[(d(!0),v(g,null,x(e.props.tasks,(s,n)=>(d(),v("tr",{key:n},[t("td",null,r(s.title),1),t("td",null,r(s.employees.map(a=>a.name).join(",")),1),t("td",null,r(s.start),1),t("td",null,r(s.end),1),t("td",null,[c(h,{status:s.status,size:"small"},null,8,["status"])]),t("td",null,[c(_,{isView:!0,isEdit:!1,isDelete:!1,onViewClick:a=>s.showModel=!0},{default:u(()=>[c(f,{show:s.showModel,"onUpdate:show":a=>s.showModel=a,task:s},null,8,["show","onUpdate:show","task"])]),_:2},1032,["onViewClick"])])]))),128))])])])}const Z=y(K,[["render",Y]]),tt={props:{id:{type:[String,Number],required:!0}},components:{AppLayout:C,PageTitleBox:L,ShowProject:P,StatusBtn:S,TaskList:Z},setup(o){const i=A(),k=w(i.auth_id),e=w(null),m=w(!0);w(!1);const b=w([]);(async()=>{m.value=!0;try{const s=route("project.show",{project:o.id}),{data:n}=await axios.get(s);e.value=n}catch(s){console.error(s)}m.value=!1})(),(async()=>{try{const s=route("project.task.index",{project:o.id}),{data:n}=await axios.get(s);b.value=n.map(a=>(a.showModel=!1,a))}catch(s){console.error(s)}})();const _=async s=>{try{const n=route("project.changeStatus",{project:o.id}),{data:a}=await axios.post(n,{status:s});e.value.status=s,init({message:"Succsess Fully Update Status",color:"#432c50",closeable:!0,duration:4e3})}catch(n){console.error(n)}};return{busy:m,id:o.id,project:e,auth_id:k,tasks:b,statusList:M,changeStatus:_}}},st={key:0},et={class:"status-dropdown"},ot=["onClick"];function at(o,i,k,e,m,b){const h=l("page-title-box"),f=l("task-list"),_=l("status-btn"),s=l("show-project"),n=l("app-layout");return d(),j(n,{busy:e.busy},{default:u(()=>[t("div",null,[c(h,{title:"Project"})]),e.project?(d(),v("div",st,[c(s,{auth_id:e.auth_id,id:e.id,project:e.project},{tasks:u(()=>[c(f,{tasks:e.tasks,project_id:e.project.id},null,8,["tasks","project_id"])]),default:u(()=>[t("div",null,[t("h1",null,[p(" Assigner: "),t("b",null,r(e.project.assigner.name),1)]),t("h1",null,[p(" Team: "),t("b",null,r(e.project.team.title),1)]),t("div",null,[p("Status: "),c(_,{dropdown:!0,status:e.project.status},{default:u(()=>[t("ul",et,[(d(!0),v(g,null,x(e.statusList.filter(a=>a.status!=e.project.status),(a,T)=>(d(),v("li",{key:T,onClick:nt=>e.changeStatus(a.status)},r(a.title),9,ot))),128))])]),_:1},8,["status"])]),t("div",null,[p(" Project Assin: "),t("b",null,r(e.project.start),1)]),t("div",null,[p(" DeadLine: "),t("b",null,r(e.project.end),1)])])]),_:1},8,["auth_id","id","project"])])):N("",!0)]),_:1},8,["busy"])}const ht=y(tt,[["render",at]]);export{ht as default};
