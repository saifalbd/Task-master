import{a as P}from"./app-layout-4368b8fd.js";import{_ as j}from"./PageTitleBox-624ea85e.js";import{S as z}from"./statusBtn-f4137a6f.js";import{_ as D,aj as F,Y as L,ah as T,r as u,h as N,w as l,e as s,f as h,i as t,b as e,j as E,c as x,n as R,F as q,u as M,t as d,p as U,q as Y}from"./app-15ad5095.js";import{B as $}from"./BackButton-4645f5cd.js";const G={components:{AppLayout:P,PageTitleBox:j,BackButtonVue:$,StatusBtn:z,StarFilled:F,Expand:L,Download:T},setup(){const r=M(),_=u(!0),i=u([]),n=u([]),v=u(10),f=o=>{r.push(o)};return(async()=>{try{const o=route("my.task.archives"),{data:c}=await axios.get(o);i.value=c.data,n.value=c.links}catch(o){console.error(o)}_.value=!1})(),{items:i,links:n,perPage:v,busy:_,go:f,doArchive:(o,c)=>{i.value.splice(c,1),axios.post(route("task.doArchive",{task:o.id}),{prop:"employee_archive",do:o.employee_archive?0:1})},addStar:o=>{const{employee_star:c}=o;o.employee_star=!c,axios.post(route("task.changeStar",{task:o.id}),{prop:"employee_star",star:c?0:1})}}}},H=r=>(U("data-v-90b84284"),r=r(),Y(),r),J={class:"row mt-4"},K={class:"flex md6"},O={class:"item"},Q={class:"flex lg6"},W={class:"item right"},X={class:"va-table-responsive"},Z={class:"va-table"},tt=H(()=>t("thead",null,[t("tr",null,[t("th",null,"Star"),t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Category"),t("th",null,"Assigner"),t("th",null,"Start"),t("th",null,"DeadLine"),t("th",null,"Status"),t("th",null,"Show")])],-1));function et(r,_,i,n,v,f){const y=s("back-button-vue"),b=s("page-title-box"),g=s("va-select"),o=s("va-icon"),c=s("va-input"),S=s("star-filled"),p=s("el-icon"),m=s("el-button"),w=s("status-btn"),A=s("download"),B=s("expand"),C=s("el-button-group"),V=s("app-layout");return h(),N(V,{busy:n.busy},{default:l(()=>[t("div",null,[e(b,{title:"My Task Archives (jobs)"},{default:l(()=>[e(y)]),_:1})]),t("div",J,[t("div",K,[t("div",O,[e(g,{class:"flex mb-2 md6",label:"Per Page",modelValue:n.perPage,"onUpdate:modelValue":_[0]||(_[0]=a=>n.perPage=a),options:[10,20,30,40,50]},null,8,["modelValue"])])]),t("div",Q,[t("div",W,[e(c,{class:"flex mb-2 md6",label:"Search"},{prepend:l(()=>[e(o,{class:"material-icons"},{default:l(()=>[E("search")]),_:1})]),_:1})])])]),t("div",X,[t("table",Z,[tt,t("tbody",null,[(h(!0),x(q,null,R(n.items,(a,I)=>(h(),x("tr",{key:a.id},[t("td",null,[e(m,{onClick:k=>n.addStar(a),size:"small",type:a.employee_star?"warning":"",plain:"",round:""},{default:l(()=>[e(p,null,{default:l(()=>[e(S)]),_:1})]),_:2},1032,["onClick","type"])]),t("td",null,d(a.id),1),t("td",null,d(a.title),1),t("td",null,d(a.category.title),1),t("td",null,d(a.assigner.name),1),t("td",null,d(a.start),1),t("td",null,d(a.end),1),t("td",null,[e(w,{status:a.status,size:"small"},null,8,["status"])]),t("td",null,[e(C,null,{default:l(()=>[e(m,{type:"primary",size:"small",title:"Restore From Archive",onClick:k=>n.doArchive(a,I)},{default:l(()=>[e(p,null,{default:l(()=>[e(A)]),_:1})]),_:2},1032,["onClick"]),e(m,{type:"primary",size:"small",onClick:k=>n.go({name:"job.task.show",params:{id:a.id}}),title:"Show"},{default:l(()=>[e(p,null,{default:l(()=>[e(B)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])])])]),_:1},8,["busy"])}const ct=D(G,[["render",et],["__scopeId","data-v-90b84284"]]);export{ct as default};
