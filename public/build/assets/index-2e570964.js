import{a as M,S as R}from"./app-layout-e16cfc1f.js";import{_ as U}from"./PageTitleBox-d93af271.js";import{_ as W,n as G,r as d,p as J,q as K,s as j,t as O,h as V,w as a,e as r,f as i,i as s,b as n,c as _,v as x,F as b,j as f,x as Q,u as X,y as p,z as Y,A as Z,B as $}from"./app-c2489b58.js";import{r as P}from"./api-5314060c.js";import{h as ee}from"./moment-fbc5633a.js";import{C as te}from"./CreateButton-4d0242f3.js";import{C as oe}from"./Create-da7fd0e7.js";import"./FormDialog-79e4fca8.js";import"./index-6926ebaf.js";const se={components:{CreateButton:te,ArrowDown:G,AppLayout:M,PageTitleBox:U,statusBtnVue:R,AddTask:oe},setup(){const k=d(!1),m=d(!1),z=d([]),o=d([]),I=X(),T=d([]),A=d([]),w=d([]),g=d([]),v=d([]),C=e=>ee(e).fromNow(),S=e=>{I.push(e)};P(0,e=>{T.value=e}),P(1,e=>{A.value=e}),P(2,e=>{w.value=e}),P(3,e=>{g.value=e}),P(4,e=>{v.value=e});const B=J(()=>[{title:"Pending Tasks",items:T.value},{title:"Accepted Tasks",items:A.value},{title:"Working Tasks",items:w.value},{title:"Submited Tasks",isSubmit:!0,items:g.value},{title:"Completed Tasks",items:v.value}]),y=d([]);axios.get(route("employeeProposal")).then(({data:e})=>{y.value=e});const D=async(e,t)=>{try{await axios.get(route("acceptProposal",{employee:e})),y.value.splice(t,1)}catch(c){console.error(c)}},N=async(e,t)=>{try{await axios.get(route("denyProposal",{employee:e})),y.value.splice(t,1)}catch(c){console.error(c)}},L=async(e,t,c,l)=>{try{const h=route("task.changeStatus",{task:t}),{data:u}=await axios.post(h,{status:e,notify:0});c.splice(l,1)}catch(h){console.error(h)}},E=e=>{T.value.push(e),m.value=!1};return K(()=>{j("employees",e=>{z.value=e}),j("categories",e=>{o.value=e})}),{atNow:C,go:S,push:E,changeStatus:L,doArchive:(e,t)=>{v.value.splice(t,1),axios.post(route("task.doArchive",{task:e.id}),{prop:"user_archive",do:e.user_archive?0:1})},statusList:O,busy:k,employeeProposals:y,Accepted:D,Deny:N,showCreate:m,tasks:B,employees:z,categories:o}}},q=k=>(Z("data-v-eca0174d"),k=k(),$(),k),ae={class:"task-box-list"},ne=["md"],le={class:"card-header"},re={class:"recent-task-list"},ce={class:"avatar-box"},ie=["src"],de={class:"task-line"},ue={class:"center"},_e={class:"el-dropdown-link"},pe=["onClick"],me={class:"right-side-bar"},ve=q(()=>s("div",{class:"card-header"},[s("span",null,"Employee Proposal")],-1)),he={class:"employee-proposals"},ke=["onClick"],ye={class:"line-one"},fe={style:{"text-align":"center"}},we=q(()=>s("div",null,"Send you Employee Proposal as empoyeee",-1)),ge={class:"line-two"};function Ce(k,m,z,o,I,T){const A=r("create-button"),w=r("arrow-down"),g=r("el-icon"),v=r("el-button"),C=r("el-dropdown-item"),S=r("el-dropdown-menu"),B=r("el-dropdown"),y=r("page-title-box"),D=r("el-avatar"),N=r("el-card"),L=r("va-avatar"),E=r("el-link"),F=r("add-task"),e=r("app-layout");return i(),V(e,{busy:o.busy},{default:a(()=>[s("div",null,[n(y,{title:"Home Board"},{default:a(()=>[n(A,{title:"Add Task",onClick:m[0]||(m[0]=t=>o.showCreate=!0)}),n(B,null,{dropdown:a(()=>[n(S,null,{default:a(()=>[(i(!0),_(b,null,x(o.employees,t=>(i(),V(C,{key:t.id,onClick:c=>o.go({name:"userProfile",params:{user:t.user_id}})},{default:a(()=>[f(p(t.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[n(v,{type:"primary",style:{"margin-left":"15px"}},{default:a(()=>[f(" Employees"),n(g,{class:"el-icon--right"},{default:a(()=>[n(w)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",{class:Q(["home-page admin",{hasProposal:!!o.employeeProposals.length}])},[s("div",ae,[(i(!0),_(b,null,x(o.tasks,(t,c)=>(i(),_("div",{sm:24,md:4.8,key:c},[n(N,{class:"box-card mb-3"},{header:a(()=>[s("div",le,[s("span",null,[s("b",null,p(t.title),1)])])]),default:a(()=>[s("ul",re,[(i(!0),_(b,null,x(t.items,(l,h)=>(i(),_("li",{key:h},[s("div",ce,[n(D,{size:25},{default:a(()=>[s("img",{src:l.employee.model.avatar.url},null,8,ie)]),_:2},1024)]),s("div",de,[s("b",null,p(l.employee.model.name),1),s("small",ue,p(o.atNow(l.created_at)),1),n(B,null,{dropdown:a(()=>[n(S,null,{default:a(()=>[(i(!0),_(b,null,x(o.statusList.filter(u=>![0,1,2,3,6,7].includes(u.status)).filter(u=>u.status!=l.status),(u,H)=>(i(),V(C,{key:H,onClick:xe=>o.changeStatus(u.status,l.id,t.items,h)},{default:a(()=>[f(p(u.title),1)]),_:2},1032,["onClick"]))),128)),l.status==4?(i(),V(C,{key:0,onClick:u=>o.doArchive(l,h)},{default:a(()=>[f(" Archive ")]),_:2},1032,["onClick"])):Y("",!0)]),_:2},1024)]),default:a(()=>[s("span",_e,[n(g,{class:"el-icon--right"},{default:a(()=>[n(w)]),_:1})])]),_:2},1024)]),s("div",{class:"text-box",onClick:u=>o.go({name:"task.show",params:{id:l.id}})},p(l.title),9,pe)]))),128))])]),_:2},1024)],8,ne))),128))]),s("div",me,[n(N,{class:"box-card"},{header:a(()=>[ve]),default:a(()=>[s("ul",he,[(i(!0),_(b,null,x(o.employeeProposals,(t,c)=>(i(),_("li",{key:c},[s("div",{class:"avatar-box",onClick:l=>o.go({name:"userProfile",params:{user:t.user.id}})},[n(L,{src:t.user.avatar.url,size:30},null,8,["src"])],8,ke),s("div",ye,[s("div",null,[n(E,{underline:!1,onClick:l=>o.go({name:"userProfile",params:{user:t.user.id}})},{default:a(()=>[s("b",null,p(t.user.name),1)]),_:2},1032,["onClick"]),s("small",fe,p(o.atNow(t.created_at)),1)]),we]),s("div",ge,[n(v,{size:"small",type:"primary",onClick:l=>o.Accepted(t,c)},{default:a(()=>[f(" Accepted ")]),_:2},1032,["onClick"]),n(v,{size:"small",type:"danger",onClick:l=>o.Deny(t,c)},{default:a(()=>[f(" Deny ")]),_:2},1032,["onClick"])])]))),128))])]),_:1})])],2),n(F,{show:o.showCreate,"onUpdate:show":m[1]||(m[1]=t=>o.showCreate=t),employees:o.employees,categories:o.categories,onPush:o.push},null,8,["show","employees","categories","onPush"])]),_:1},8,["busy"])}const De=W(se,[["render",Ce],["__scopeId","data-v-eca0174d"]]);export{De as default};
