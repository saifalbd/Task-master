import{a as j,S as F}from"./app-layout-3dca36ac.js";import{_ as L}from"./PageTitleBox-d182f4bf.js";import{_ as T,ar as N,a9 as E,ap as R,r as v,h as M,w as l,e as o,f as k,i as e,b as t,j as U,c as w,x as q,F as G,u as H,z as i,C as J,D as K}from"./app-090196be.js";import{P as O}from"./Pagination-12f3e00c.js";import{B as Q}from"./BackButton-e17aa13c.js";const W={components:{AppLayout:j,PageTitleBox:L,BackButtonVue:Q,StatusBtn:F,StarFilled:N,Expand:E,Download:R,Pagination:O},setup(){const r=H(),_=v(!0),d=v([]),n=v([]),h=v(50),y=s=>{r.push(s)},u=async(s=1)=>{try{const c=route("my.task.archives",{page:s,perPage:h.value}),{data:p}=await axios.get(c);d.value=p.data,n.value=p.links}catch(c){console.error(c)}_.value=!1};return u(),{items:d,links:n,perPage:h,busy:_,go:y,doArchive:(s,c)=>{d.value.splice(c,1),axios.post(route("task.doArchive",{task:s.id}),{prop:"employee_archive",do:s.employee_archive?0:1})},addStar:s=>{const{employee_star:c}=s;s.employee_star=!c,axios.post(route("task.changeStar",{task:s.id}),{prop:"employee_star",star:c?0:1})},fetchItems:u}}},X=r=>(J("data-v-ed3f0734"),r=r(),K(),r),Y={class:"row mt-4"},Z={class:"flex md6"},$={class:"item"},ee={class:"flex lg6"},te={class:"item right"},ae={class:"va-table-responsive"},oe={class:"va-table"},ne=X(()=>e("thead",null,[e("tr",null,[e("th",null,"Star"),e("th",null,"ID"),e("th",null,"Title"),e("th",null,"Category"),e("th",null,"Assigner"),e("th",null,"Start"),e("th",null,"DeadLine"),e("th",null,"Status"),e("th",null,"Show")])],-1)),le={class:"ml-1"};function se(r,_,d,n,h,y){const u=o("back-button-vue"),b=o("page-title-box"),x=o("va-select"),s=o("va-icon"),c=o("va-input"),p=o("star-filled"),f=o("el-icon"),g=o("el-button"),S=o("el-link"),C=o("el-avatar"),P=o("status-btn"),A=o("download"),B=o("expand"),V=o("el-button-group"),I=o("pagination"),z=o("app-layout");return k(),M(z,{busy:n.busy},{default:l(()=>[e("div",null,[t(b,{title:"My Task Archives (jobs)"},{default:l(()=>[t(u)]),_:1})]),e("div",Y,[e("div",Z,[e("div",$,[t(x,{class:"flex mb-2 md6",label:"Per Page",modelValue:n.perPage,"onUpdate:modelValue":_[0]||(_[0]=a=>n.perPage=a),options:[10,20,30,40,50]},null,8,["modelValue"])])]),e("div",ee,[e("div",te,[t(c,{class:"flex mb-2 md6",label:"Search"},{prepend:l(()=>[t(s,{class:"material-icons"},{default:l(()=>[U("search")]),_:1})]),_:1})])])]),e("div",ae,[e("table",oe,[ne,e("tbody",null,[(k(!0),w(G,null,q(n.items,(a,D)=>(k(),w("tr",{key:a.id},[e("td",null,[t(g,{onClick:m=>n.addStar(a),size:"small",type:a.employee_star?"warning":"",plain:"",round:""},{default:l(()=>[t(f,null,{default:l(()=>[t(p)]),_:1})]),_:2},1032,["onClick","type"])]),e("td",null,i(a.id),1),e("td",null,[t(S,{onClick:m=>n.go({name:"job.task.show",params:{id:a.id}})},{default:l(()=>[e("b",null,i(a.title),1)]),_:2},1032,["onClick"])]),e("td",null,i(a.category.title),1),e("td",null,[t(S,{underline:!1,onClick:m=>n.go({name:"userProfile",params:{user:a.assigner.id}})},{default:l(()=>[t(C,{size:25,src:a.assigner.avatar.url},null,8,["src"]),e("b",le,i(a.assigner.name),1)]),_:2},1032,["onClick"])]),e("td",null,i(a.start),1),e("td",null,i(a.end),1),e("td",null,[t(P,{status:a.status,size:"small"},null,8,["status"])]),e("td",null,[t(V,null,{default:l(()=>[t(g,{type:"primary",size:"small",title:"Restore From Archive",onClick:m=>n.doArchive(a,D)},{default:l(()=>[t(f,null,{default:l(()=>[t(A)]),_:1})]),_:2},1032,["onClick"]),t(g,{type:"primary",size:"small",onClick:m=>n.go({name:"job.task.show",params:{id:a.id}}),title:"Show"},{default:l(()=>[t(f,null,{default:l(()=>[t(B)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]),t(I,{links:n.links,onPage:n.fetchItems},null,8,["links","onPage"])])]),_:1},8,["busy"])}const ue=T(W,[["render",se],["__scopeId","data-v-ed3f0734"]]);export{ue as default};
