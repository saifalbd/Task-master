import{a as W}from"./app-layout-d1a0a4ef.js";import{_ as I}from"./PageTitleBox-570dae93.js";import{P as L}from"./Pagination-a78f2a50.js";import{_ as N,T as S,a5 as T,a6 as D,r as b,a as O,f as m,h,w as t,b as o,i as r,j as A,c as z,p as F,F as R,e as l,J as B,Q as j,R as J}from"./app-c6f1798b.js";import{F as Q}from"./FormDialog-92bd4cbd.js";import{C as q}from"./CreateButton-12a6cee4.js";import{R as G}from"./RemoveEditButton-beafb6ed.js";import{u as H}from"./useToast-811b8009.js";const K={components:{FormDialog:Q,ElementPlus:S,Remove:T,Camera:D},props:{show:{type:Boolean,default:!1}},setup(w,{emit:n}){let C=b(!1);const e=O({name:"",phone:[{value:""}],email:[{value:""}],website:[{value:""}],address:""}),E=()=>e.phone.push({value:""}),U=a=>e.phone.splice(a,1),V=()=>e.email.push({value:""}),P=a=>e.email.splice(a,1),_=()=>e.website.push({value:""}),d=a=>e.website.splice(a,1),p=a=>{},f=b(w.src),g=b(null);return{props:w,form:e,emit:n,busy:C,src:f,avatar:g,fileChange:a=>{let k=a.target.files;if(k.length){let y=k[0];g.value=y;let v=new FileReader;v.onload=()=>{let s=v.result;f.value=s},v.readAsDataURL(y)}},save:async()=>{try{let a=new FormData;a.append("name",e.name),a.append("address",e.address),e.phone.forEach((y,v)=>{a.append(`phone[${v}]`,y.value)}),e.email.forEach((y,v)=>{a.append(`email[${v}]`,y.value)}),e.website.forEach((y,v)=>{a.append(`website[${v}]`,y.value)}),g.value&&a.append("avatar",g.value);const{data:k}=await axios.post(route("contact.store"),a)}catch(a){console.error(a)}},morePhone:E,removePhone:U,moreEmail:V,removeEmail:P,moreWebsite:_,removeWebSite:d,moreAddress:p}}},M={class:"avatar-box"},X={class:"inner"},Y={class:"camera-icon"},Z={class:"input-box"},$={class:"input-box"},ee={class:"group-box"},oe={class:"input-box"},te={class:"group-box"},ae={class:"input-box"},le={class:"group-box"};function ne(w,n,C,e,E,U){const V=l("el-avatar"),P=l("camera"),_=l("el-icon"),d=l("el-button"),p=l("el-col"),f=l("el-input"),g=l("el-form-item"),c=l("element-plus"),i=l("remove"),a=l("el-button-group"),k=l("el-row"),y=l("el-form"),v=l("form-dialog");return m(),h(v,{show:e.props.show,"onUpdate:show":n[3]||(n[3]=s=>e.emit("update:show",s)),busy:e.busy,title:"Create Contact",onAdd:e.save},{default:t(()=>[o(y,{"label-position":"top"},{default:t(()=>[o(k,{gutter:24},{default:t(()=>[o(p,{span:24},{default:t(()=>[r("div",M,[r("div",X,[o(V,{size:120,src:e.src},null,8,["src"]),r("div",Y,[o(d,{type:"info",circle:""},{default:t(()=>[o(_,null,{default:t(()=>[o(P)]),_:1})]),_:1})]),r("input",{type:"file",onChange:n[0]||(n[0]=(...s)=>e.fileChange&&e.fileChange(...s))},null,32)])])]),_:1}),o(p,{span:24},{default:t(()=>[r("div",Z,[o(g,{prop:"name"},{default:t(()=>[o(f,{modelValue:e.form.name,"onUpdate:modelValue":n[1]||(n[1]=s=>e.form.name=s)},{prepend:t(()=>[A("Name")]),_:1},8,["modelValue"])]),_:1})])]),_:1}),(m(!0),z(R,null,F(e.form.phone,(s,u)=>(m(),h(p,{sm:24,md:24,key:u},{default:t(()=>[r("div",$,[o(f,{modelValue:s.value,"onUpdate:modelValue":x=>s.value=x},{prepend:t(()=>[A("Phone")]),_:2},1032,["modelValue","onUpdate:modelValue"]),r("div",ee,[o(a,null,{default:t(()=>[u==e.form.phone.length-1?(m(),h(d,{key:0,size:"small",type:"primary",plain:"",onClick:e.morePhone},{default:t(()=>[o(_,null,{default:t(()=>[o(c)]),_:1})]),_:1},8,["onClick"])):B("",!0),u?(m(),h(d,{key:1,size:"small",type:"danger",plain:"",onClick:x=>e.removePhone(u)},{default:t(()=>[o(_,{class:"el-icon--right"},{default:t(()=>[o(i)]),_:1})]),_:2},1032,["onClick"])):B("",!0)]),_:2},1024)])])]),_:2},1024))),128)),(m(!0),z(R,null,F(e.form.email,(s,u)=>(m(),h(p,{sm:24,md:24,key:u},{default:t(()=>[r("div",oe,[o(f,{modelValue:s.value,"onUpdate:modelValue":x=>s.value=x},{prepend:t(()=>[A("Email")]),_:2},1032,["modelValue","onUpdate:modelValue"]),r("div",te,[o(a,null,{default:t(()=>[u==e.form.email.length-1?(m(),h(d,{key:0,size:"small",type:"primary",plain:"",onClick:e.moreEmail},{default:t(()=>[o(_,null,{default:t(()=>[o(c)]),_:1})]),_:1},8,["onClick"])):B("",!0),u?(m(),h(d,{key:1,size:"small",type:"danger",plain:"",onClick:x=>e.removeEmail(u)},{default:t(()=>[o(_,{class:"el-icon--right"},{default:t(()=>[o(i)]),_:1})]),_:2},1032,["onClick"])):B("",!0)]),_:2},1024)])])]),_:2},1024))),128)),(m(!0),z(R,null,F(e.form.website,(s,u)=>(m(),h(p,{sm:24,md:24,key:u},{default:t(()=>[r("div",ae,[o(f,{modelValue:s.value,"onUpdate:modelValue":x=>s.value=x},{prepend:t(()=>[A("Website")]),_:2},1032,["modelValue","onUpdate:modelValue"]),r("div",le,[o(a,null,{default:t(()=>[u==e.form.website.length-1?(m(),h(d,{key:0,size:"small",type:"primary",plain:"",onClick:e.moreWebsite},{default:t(()=>[o(_,null,{default:t(()=>[o(c)]),_:1})]),_:1},8,["onClick"])):B("",!0),u?(m(),h(d,{key:1,size:"small",type:"danger",plain:"",onClick:x=>e.removeWebSite(u)},{default:t(()=>[o(_,{class:"el-icon--right"},{default:t(()=>[o(i)]),_:1})]),_:2},1032,["onClick"])):B("",!0)]),_:2},1024)])])]),_:2},1024))),128)),o(p,null,{default:t(()=>[o(g,{label:"Address"},{default:t(()=>[o(f,{type:"textarea",modelValue:e.form.address,"onUpdate:modelValue":n[2]||(n[2]=s=>e.form.address=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show","busy","onAdd"])}const se=N(K,[["render",ne],["__scopeId","data-v-f4edf7d3"]]);const re={components:{AppLayout:W,PageTitleBox:I,Pagination:L,Create:se,CreateButton:q,RemoveEditButton:G},setup(){const w=b(!1),n=H(),C=b([]),e=b(!0),E=b([]),U=b(10),V=b("title"),P=[{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"title",sortable:!0},{key:"action",thAlign:"right",tdAlign:"right"}],_=b("asc"),d=async c=>{w.value=!0;const i=route("category.index",{perPage:U.value,page:c}),{data:a}=await axios.get(i);E.value=a.links,C.value=addProtos(a.data,{action:!0,showEdit:!1}),w.value=!1};return d(1),{showCreate:e,perPage:U,sortingOrder:_,items:C,columns:P,sortBy:V,push:c=>{e.value=!1,C.value.push(c)},replace:(c,i)=>{e.value=!1,C.value.splice(i,1,c)},fetchItems:d,remove:async(c,i)=>{if(!await j(c,"Category"))return null;try{const k=route("category.destroy",{category:c.id});await axios.delete(k),C.value.splice(i,1),J(n)}catch(k){console.log(k)}},links:E,busy:w}}},ce={class:"row mt-4"},ie={class:"flex md6"},de={class:"item"},ue={class:"flex lg6"},me={class:"item right"};function _e(w,n,C,e,E,U){const V=l("create-button"),P=l("page-title-box"),_=l("va-select"),d=l("va-icon"),p=l("va-input"),f=l("pagination"),g=l("create"),c=l("app-layout");return m(),h(c,{busy:e.busy},{default:t(()=>[r("div",null,[o(P,{title:"Categories"},{default:t(()=>[o(V,{title:"Add Category",onClick:n[0]||(n[0]=i=>e.showCreate=!0)})]),_:1})]),r("div",ce,[r("div",ie,[r("div",de,[o(_,{class:"flex mb-2 md6",label:"Per Page",modelValue:e.perPage,"onUpdate:modelValue":n[1]||(n[1]=i=>e.perPage=i),options:[10,20,30,40,50]},null,8,["modelValue"])])]),r("div",ue,[r("div",me,[o(p,{class:"flex mb-2 md6",label:"Search"},{prepend:t(()=>[o(d,{class:"material-icons"},{default:t(()=>[A("search")]),_:1})]),_:1})])])]),o(f,{links:e.links,onPage:e.fetchItems},null,8,["links","onPage"]),o(g,{show:e.showCreate,"onUpdate:show":n[2]||(n[2]=i=>e.showCreate=i),onPush:e.push},null,8,["show","onPush"])]),_:1},8,["busy"])}const ke=N(re,[["render",_e],["__scopeId","data-v-98c84306"]]);export{ke as default};
