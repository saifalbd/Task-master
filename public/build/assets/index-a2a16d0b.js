import{a as j,S as q}from"./app-layout-d1dbc87c.js";import{_ as H}from"./PageTitleBox-ede345b9.js";import{_ as R,n as W,r as u,p as G,s as J,h as I,w as a,e as n,f as r,i as e,b as l,c as p,q as w,F as g,t as K,u as M,v as m,j as N,x as O,y as Q}from"./app-97810647.js";import{r as y}from"./api-5314060c.js";import{h as U}from"./moment-fbc5633a.js";const X={components:{ArrowDown:W,AppLayout:j,PageTitleBox:H,statusBtnVue:q},setup(){const v=u(!1),D=M(),x=u([]),s=u([]),b=u([]),C=u([]),f=u([]),P=t=>U(t).fromNow(),S=t=>{D.push(t)};y(0,t=>{x.value=t}),y(1,t=>{s.value=t}),y(2,t=>{b.value=t}),y(3,t=>{C.value=t}),y(4,t=>{f.value=t});const T=G(()=>[{title:"Pending Tasks",items:x.value},{title:"Accepted Tasks",items:s.value},{title:"Working Tasks",items:b.value},{title:"Submited Tasks",isSubmit:!0,items:C.value},{title:"Completed Tasks",items:f.value}]),h=u([]);return axios.get(route("employeeProposal")).then(({data:t})=>{h.value=t}),{atNow:P,go:S,changeStatus:async(t,d,i,A)=>{try{const o=route("task.changeStatus",{task:d}),{data:k}=await axios.post(o,{status:t,notify:0});i.splice(A,1)}catch(o){console.error(o)}},statusList:J,busy:v,employeeProposals:h,Accepted:async(t,d)=>{try{await axios.get(route("acceptProposal",{employee:t})),h.value.splice(d,1)}catch(i){console.error(i)}},Deny:async(t,d)=>{try{await axios.get(route("denyProposal",{employee:t})),h.value.splice(d,1)}catch(i){console.error(i)}},tasks:T}}},E=v=>(O("data-v-59d3730f"),v=v(),Q(),v),Y={class:"task-box-list"},Z=["md"],$={class:"card-header"},ee={class:"recent-task-list"},te={class:"avatar-box"},se=["src"],oe={class:"task-line"},ae={class:"center"},ne={class:"el-dropdown-link"},le=["onClick"],ce={class:"right-side-bar"},re=E(()=>e("div",{class:"card-header"},[e("span",null,"Employee Proposal")],-1)),ie={class:"employee-proposals"},de=["onClick"],_e={class:"line-one"},ue={style:{"text-align":"center"}},pe=E(()=>e("div",null,"Send you Employee Proposal as empoyeee",-1)),me={class:"line-two"};function ve(v,D,x,s,b,C){const f=n("page-title-box"),P=n("el-avatar"),S=n("arrow-down"),T=n("el-icon"),h=n("el-dropdown-item"),z=n("el-dropdown-menu"),L=n("el-dropdown"),B=n("el-card"),t=n("va-avatar"),d=n("el-link"),i=n("el-button"),A=n("app-layout");return r(),I(A,{busy:s.busy},{default:a(()=>[e("div",null,[l(f,{title:"Home Board"})]),e("div",{class:K(["home-page admin",{hasProposal:!!s.employeeProposals.length}])},[e("div",Y,[(r(!0),p(g,null,w(s.tasks,(o,k)=>(r(),p("div",{sm:24,md:4.8,key:k},[l(B,{class:"box-card mb-3"},{header:a(()=>[e("div",$,[e("span",null,[e("b",null,m(o.title),1)])])]),default:a(()=>[e("ul",ee,[(r(!0),p(g,null,w(o.items,(c,V)=>(r(),p("li",{key:V},[e("div",te,[l(P,{size:25},{default:a(()=>[e("img",{src:c.employee.model.avatar.url},null,8,se)]),_:2},1024)]),e("div",oe,[e("b",null,m(c.employee.model.name),1),e("small",ae,m(s.atNow(c.created_at)),1),l(L,null,{dropdown:a(()=>[l(z,null,{default:a(()=>[(r(!0),p(g,null,w(s.statusList.filter(_=>![0,1,2,3,6,7].includes(_.status)).filter(_=>_.status!=c.status),(_,F)=>(r(),I(h,{key:F,onClick:he=>s.changeStatus(_.status,c.id,o.items,V)},{default:a(()=>[N(m(_.title),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:a(()=>[e("span",ne,[l(T,{class:"el-icon--right"},{default:a(()=>[l(S)]),_:1})])]),_:2},1024)]),e("div",{class:"text-box",onClick:_=>s.go({name:"task.show",params:{id:c.id}})},m(c.title),9,le)]))),128))])]),_:2},1024)],8,Z))),128))]),e("div",ce,[l(B,{class:"box-card"},{header:a(()=>[re]),default:a(()=>[e("ul",ie,[(r(!0),p(g,null,w(s.employeeProposals,(o,k)=>(r(),p("li",{key:k},[e("div",{class:"avatar-box",onClick:c=>s.go({name:"userProfile",params:{user:o.user.id}})},[l(t,{src:o.user.avatar.url,size:30},null,8,["src"])],8,de),e("div",_e,[e("div",null,[l(d,{underline:!1,onClick:c=>s.go({name:"userProfile",params:{user:o.user.id}})},{default:a(()=>[e("b",null,m(o.user.name),1)]),_:2},1032,["onClick"]),e("small",ue,m(s.atNow(o.created_at)),1)]),pe]),e("div",me,[l(i,{size:"small",type:"primary",onClick:c=>s.Accepted(o,k)},{default:a(()=>[N(" Accepted ")]),_:2},1032,["onClick"]),l(i,{size:"small",type:"danger",onClick:c=>s.Deny(o,k)},{default:a(()=>[N(" Deny ")]),_:2},1032,["onClick"])])]))),128))])]),_:1})])],2)]),_:1},8,["busy"])}const xe=R(X,[["render",ve],["__scopeId","data-v-59d3730f"]]);export{xe as default};
