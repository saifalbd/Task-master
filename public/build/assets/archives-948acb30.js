import{a as ee,S as te}from"./app-layout-b069f2a8.js";import{_ as oe}from"./PageTitleBox-31010f1c.js";import{P as le}from"./Pagination-7c96924b.js";import{R as se}from"./RemoveEditButton-10adca12.js";import{C as ae}from"./Create-000dd647.js";import{E as ne}from"./Edit-81665dca.js";import{C as re}from"./CreateButton-15a388a2.js";import{_ as ie,a7 as ce,ai as de,aj as _e,a6 as ue,ag as pe,ak as me,H as fe,a9 as ve,ap as ye,aq as he,ar as ke,r as p,t as W,h as w,w as t,u as ge,l as be,a1 as Ce,a2 as we,e as s,f as y,i as c,b as e,c as O,x as R,F as U,z as x,j as F}from"./app-1f23f49e.js";import{B as xe}from"./BackButton-745850e6.js";import{u as Be}from"./useToast-519e3e80.js";import"./FormDialog-74f276fc.js";import"./index-b1f930e8.js";import"./moment-fbc5633a.js";const Pe={components:{AppLayout:ee,PageTitleBox:oe,Pagination:le,Create:ae,EditVue:ne,Edit:ce,List:de,Box:_e,CreateButton:re,RemoveEditButton:se,StatusBtn:te,Delete:ue,More:pe,Search:me,Collection:fe,Expand:ve,Download:ye,Star:he,StarFilled:ke,BackButton:xe},setup(){const B=p(!1),r=p(!0),E=Be(),l=ge(),m=p([]),P=p([]),k=p([]),h=p(!1),g=p([]),b=p(50),i=[{key:"user_star",label:"Star",sortable:!0},{key:"id",sortable:!0,sortingOptions:["desc","asc"]},{key:"title",sortable:!0},{key:"category.title",label:"Category",sortable:!0},{key:"employee",label:"Employee",sortable:!0},{key:"start",label:"Start",sortable:!0},{key:"end",label:"Dead Line",sortable:!0},{key:"status",sortable:!0},{key:"action",thAlign:"right",tdAlign:"right"}],S=p("asc");W("employees",a=>{P.value=a}),W("categories",a=>{k.value=a});const C=async a=>{try{const n=route("task.archives",{perPage:b.value,page:a}),{data:f}=await axios.get(n);g.value=f.links,m.value=be.sortBy(addProtos(f.data,{action:!0,showEdit:!1}),"user_star").reverse()}catch(n){console.error(n)}r.value=!1};return C(1),{busy:r,showCreate:h,perPage:b,sortingOrder:S,items:m,columns:i,push:a=>{h.value=!1,m.value.push(a)},replace:(a,n)=>{h.value=!1,m.value.splice(n,1,a)},fetchItems:C,employees:P,categories:k,remove:async(a,n)=>{if(!await Ce(a,"Task","title"))return null;try{const v=route("task.destroy",{task:a.id});await axios.delete(v),m.value.splice(n,1),we(E)}catch(v){console.log(v)}},addStar:a=>{a.user_star=!a.user_star,axios.post(route("task.changeStar",{task:a.id}),{prop:"user_star",star:a.user_star?0:1})},doArchive:(a,n)=>{m.value.splice(n,1),axios.post(route("task.doArchive",{task:a.id}),{prop:"user_archive",do:a.user_archive?0:1})},links:g,router:l,isCardWise:B}}},Se={class:"filter-row mt-2"},ze={class:"left-side"},Ee={class:"item"},Ve={class:"right-side"},Ae={class:"item right mr-3"},Te={class:"item right"},Le=["innerHTML"],We={class:"ml-1"};function Oe(B,r,E,l,m,P){const k=s("back-button"),h=s("page-title-box"),g=s("el-option"),b=s("collection"),i=s("el-icon"),S=s("el-select"),C=s("list"),d=s("el-button"),V=s("box"),z=s("el-button-group"),A=s("search"),T=s("el-input"),a=s("el-divider"),n=s("el-descriptions-item"),f=s("status-btn"),v=s("delete"),H=s("more"),M=s("el-descriptions"),N=s("el-card"),j=s("el-col"),q=s("el-row"),L=s("el-link"),I=s("star-filled"),G=s("el-avatar"),J=s("download"),K=s("expand"),Q=s("edit"),X=s("edit-vue"),Y=s("va-data-table"),Z=s("pagination"),D=s("create"),$=s("app-layout");return y(),w($,{busy:l.busy},{default:t(()=>[c("div",null,[e(h,{title:"Task Archives"},{default:t(()=>[e(k)]),_:1})]),c("div",Se,[c("div",ze,[c("div",Ee,[e(S,{modelValue:l.perPage,"onUpdate:modelValue":r[0]||(r[0]=o=>l.perPage=o),placeholder:"Per Page"},{prefix:t(()=>[e(i,{class:"el-input__icon"},{default:t(()=>[e(b)]),_:1})]),default:t(()=>[(y(),O(U,null,R([10,20,30,40,50,70,100],o=>e(g,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),c("div",Ve,[c("div",Ae,[e(z,null,{default:t(()=>[e(d,{type:l.isCardWise?"info":"primary",onClick:r[1]||(r[1]=o=>l.isCardWise=!1)},{default:t(()=>[e(i,null,{default:t(()=>[e(C)]),_:1})]),_:1},8,["type"]),e(d,{type:l.isCardWise?"primary":"info",onClick:r[2]||(r[2]=o=>l.isCardWise=!0)},{default:t(()=>[e(i,null,{default:t(()=>[e(V)]),_:1})]),_:1},8,["type"])]),_:1})]),c("div",Te,[e(T,{placeholder:"Type something"},{prefix:t(()=>[e(i,{class:"el-input__icon"},{default:t(()=>[e(A)]),_:1})]),_:1})])])]),e(a),l.isCardWise?(y(),w(q,{key:0,class:"card-list",gutter:24},{default:t(()=>[(y(!0),O(U,null,R(l.items,(o,_)=>(y(),w(j,{sm:24,md:12,key:_},{default:t(()=>[e(N,null,{default:t(()=>[e(M,{title:o.title,direction:"horizontal",column:1,size:"small",border:""},{default:t(()=>[e(n,{label:"Assgned To:"},{default:t(()=>[F(x(o.employee.model.name),1)]),_:2},1024),e(n,{label:"Dead Line:"},{default:t(()=>[F(x(o.end),1)]),_:2},1024),e(n,{label:"Status:"},{default:t(()=>[e(f,{status:o.status,size:"small"},null,8,["status"])]),_:2},1024),e(n,{label:"Delete:"},{default:t(()=>[e(d,{size:"small",type:"danger",plain:"",onClick:u=>l.remove(o,_)},{default:t(()=>[e(i,null,{default:t(()=>[e(v)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(n,{label:"View:"},{default:t(()=>[e(d,{size:"small",type:"info",plain:"",onClick:u=>l.router.push({name:"task.show",params:{id:o.id}})},{default:t(()=>[e(i,null,{default:t(()=>[e(H)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"]),c("div",{class:"description",innerHTML:o.description},null,8,Le)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(y(),w(Y,{key:1,items:l.items,columns:l.columns,hoverable:!0,"sorting-order":l.sortingOrder,"onUpdate:sortingOrder":r[3]||(r[3]=o=>l.sortingOrder=o)},{"cell(title)":t(({rowData:o})=>[e(L,{onClick:_=>B.go({name:"task.show",params:{id:o.id}})},{default:t(()=>[c("b",null,x(o.title),1)]),_:2},1032,["onClick"])]),"cell(user_star)":t(({rowData:o})=>[e(d,{onClick:_=>l.addStar(o),size:"small",type:o.user_star?"warning":"",plain:"",round:""},{default:t(()=>[e(i,null,{default:t(()=>[e(I)]),_:1})]),_:2},1032,["onClick","type"])]),"cell(employee)":t(({rowData:o})=>[e(L,{underline:!1,onClick:_=>l.router.push({name:"userProfile",params:{user:o.employee.model.id}})},{default:t(()=>[e(G,{size:25,src:o.employee.model.avatar.url},null,8,["src"]),c("b",We,x(o.employee.model.name),1)]),_:2},1032,["onClick"])]),"cell(status)":t(({value:o})=>[e(f,{status:o,size:"small"},null,8,["status"])]),"cell(action)":t(({rowData:o,rowIndex:_})=>[c("div",null,[e(z,null,{default:t(()=>[e(d,{type:"primary",size:"small",title:"Archive",onClick:u=>l.doArchive(o,_)},{default:t(()=>[e(i,null,{default:t(()=>[e(J)]),_:1})]),_:2},1032,["onClick"]),e(d,{type:"primary",size:"small",onClick:u=>l.router.push({name:"task.show",params:{id:o.id}}),title:"Show"},{default:t(()=>[e(i,null,{default:t(()=>[e(K)]),_:1})]),_:2},1032,["onClick"]),e(d,{type:"primary",size:"small",onClick:u=>o.showEdit=!0,title:"edit"},{default:t(()=>[e(i,null,{default:t(()=>[e(Q)]),_:1})]),_:2},1032,["onClick"]),e(d,{type:"danger",size:"small",onClick:u=>l.remove(o,_),title:"remove"},{default:t(()=>[e(i,null,{default:t(()=>[e(v)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(X,{show:o.showEdit,"onUpdate:show":u=>o.showEdit=u,item:o,employees:l.employees,categories:l.categories,onReplace:u=>l.replace(u,_)},null,8,["show","onUpdate:show","item","employees","categories","onReplace"])])]),_:1},8,["items","columns","sorting-order"])),e(Z,{links:l.links,onPage:l.fetchItems},null,8,["links","onPage"]),e(D,{show:l.showCreate,"onUpdate:show":r[4]||(r[4]=o=>l.showCreate=o),employees:l.employees,categories:l.categories,onPush:l.push},null,8,["show","employees","categories","onPush"])]),_:1},8,["busy"])}const Xe=ie(Pe,[["render",Oe],["__scopeId","data-v-b20e713f"]]);export{Xe as default};
